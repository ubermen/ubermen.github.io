<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>airflow_analysis: Contributing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">airflow_analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Contributing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Contributions are welcome and are greatly appreciated! Every little bit helps, and credit will always be given.</p>
<h1>Table of Contents</h1>
<ul>
<li><a href="#table-of-contents">TOC</a></li>
<li><a href="#types-of-contribution">Types of Contributions</a><ul>
<li><a href="#report-bugs">Report Bugs</a></li>
<li><a href="#fix-bugs">Fix Bugs</a></li>
<li><a href="#implement-features">Implement Features</a></li>
<li><a href="#improve-documentation">Improve Documentation</a></li>
<li><a href="#submit-feedback">Submit Feedback</a></li>
</ul>
</li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#development-and-testing">Development and Testing</a><ul>
<li><a href="#setting-up-a-development-environment">Setting up a development environment</a></li>
<li><a href="#pull-requests-guidelines">Pull requests guidelines</a></li>
<li><a href="#testing-locally">Testing Locally</a></li>
</ul>
</li>
<li><a href="#changing-the-metadata-database">Changing the Metadata Database</a></li>
</ul>
<h2>Types of Contributions</h2>
<h3>Report Bugs</h3>
<p>Report bugs through <a href="https://issues.apache.org/jira/browse/AIRFLOW">Apache Jira</a></p>
<p>Please report relevant information and preferably code that exhibits the problem.</p>
<h3>Fix Bugs</h3>
<p>Look through the Jira issues for bugs. Anything is open to whoever wants to implement it.</p>
<h3>Implement Features</h3>
<p>Look through the GitHub issues for features. Anything tagged with "feature" is open to whoever wants to implement it.</p>
<p>We've created the operators, hooks, macros and executors we needed, but we made sure that this part of Airflow is extensible. New operators, hooks and operators are very welcomed!</p>
<h3>Improve Documentation</h3>
<p>Airflow could always use better documentation, whether as part of the official Airflow docs, in docstrings, <code>docs/*.rst</code> or even on the web as blog posts or articles.</p>
<h3>Submit Feedback</h3>
<p>The best way to send feedback is to file an issue on Github.</p>
<p>If you are proposing a feature:</p>
<ul>
<li>Explain in detail how it would work.</li>
<li>Keep the scope as narrow as possible, to make it easier to implement.</li>
<li>Remember that this is a volunteer-driven project, and that contributions are welcome :)</li>
</ul>
<h2>Documentation</h2>
<p>The latest API documentation is usually available <a href="http://pythonhosted.org/airflow">here</a>. To generate a local version, you need to have installed airflow with the <code>doc</code> extra. In that case you can generate the doc by running: </p><pre class="fragment">cd docs &amp;&amp; ./build.sh
</pre><h2>Development and Testing</h2>
<h3>Setting up a development environment</h3>
<p>Please install python(2.7.x or 3.4.x), mysql, and libxml by using system-level package managers like yum, apt-get for Linux, or homebrew for Mac OS at first. It is usually best to work in a virtualenv and tox. Install development requirements: </p><pre class="fragment">cd $AIRFLOW_HOME
virtualenv env
source env/bin/activate
pip install -e .[devel]
tox
</pre><p>Feel free to customize based on the extras available in <a href="./setup.py">setup.py</a></p>
<h3>Pull Request Guidelines</h3>
<p>Before you submit a pull request from your forked repo, check that it meets these guidelines:</p>
<ol type="1">
<li>The pull request should include tests, either as doctests, unit tests, or both. The airflow repo uses <a href="https://travis-ci.org/apache/incubator-airflow">Travis CI</a> to run the tests and <a href="https://codecov.io/gh/apache/incubator-airflow">codecov</a> to track coverage. You can set up both for free on your fork. It will help you making sure you do not break the build with your PR and that you help increase coverage.</li>
<li>Please <a href="http://stackoverflow.com/a/7244456/1110993">rebase your fork</a>, squash commits, and resolve all conflicts.</li>
<li>Every pull request should have an associated <a href="https://issues.apache.org/jira/browse/AIRFLOW/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">JIRA</a>. The JIRA link should also be contained in the PR description.</li>
<li>Preface your commit's subject &amp; PR's title with <b>[AIRFLOW-XXX]</b> where <em>XXX</em> is the JIRA number. We compose release notes (i.e. for Airflow releases) from all commit titles in a release. By placing the JIRA number in the commit title and hence in the release notes, Airflow users can look into JIRA and Github PRs for more details about a particular change.</li>
<li>Add an <a href="http://www.apache.org/legal/src-headers.html">Apache License</a> header to all new files</li>
<li>If the pull request adds functionality, the docs should be updated as part of the same PR. Doc string are often sufficient. Make sure to follow the Sphinx compatible standards.</li>
<li>The pull request should work for Python 2.7 and 3.4. If you need help writing code that works in both Python 2 and 3, see the documentation at the <a href="http://python-future.org">Python-Future project</a> (the future package is an Airflow requirement and should be used where possible).</li>
<li>As Airflow grows as a project, we try to enforce a more consistent style and try to follow the Python community guidelines. We track this using <a href="https://landscape.io/github/apache/incubator-airflow/">landscape.io</a>, which you can setup on your fork as well to check before you submit your PR. We currently enforce most <a href="https://www.python.org/dev/peps/pep-0008/">PEP8</a> and a few other linting rules. It is usually a good idea to lint locally as well using <a href="https://flake8.readthedocs.org/en/latest/">flake8</a> using <code>flake8 airflow tests</code></li>
<li>Please read this excellent <a href="http://chris.beams.io/posts/git-commit/">article</a> on commit messages and adhere to them. It makes the lives of those who come after you a lot easier.</li>
</ol>
<h3>Testing locally</h3>
<h4>TL;DR</h4>
<p>Tests can then be run with (see also the <a href="#running-unit-tests">Running unit tests</a> section below): </p><pre class="fragment">./run_unit_tests.sh
</pre><h4>Running unit tests</h4>
<p>We <em>highly</em> recommend setting up <a href="https://travis-ci.org/">Travis CI</a> on your repo to automate this. It is free for open source projects. If for some reason you cannot, you can use the steps below to run tests.</p>
<p>Here are loose guidelines on how to get your environment to run the unit tests. We do understand that no one out there can run the full test suite since Airflow is meant to connect to virtually any external system and that you most likely have only a subset of these in your environment. You should run the CoreTests and tests related to things you touched in your PR.</p>
<p>To set up a unit test environment, first take a look at <code>run_unit_tests.sh</code> and understand that your <code>AIRFLOW_CONFIG</code> points to an alternate config file while running the tests. You shouldn't have to alter this config file but you may if need be.</p>
<p>From that point, you can actually export these same environment variables in your shell, start an Airflow webserver <code>airflow webserver -d</code> and go and configure your connection. Default connections that are used in the tests should already have been created, you just need to point them to the systems where you want your tests to run.</p>
<p>Once your unit test environment is setup, you should be able to simply run <code>./run_unit_tests.sh</code> at will.</p>
<p>For example, in order to just execute the "core" unit tests, run the following:</p>
<div class="fragment"><div class="line">./run_unit_tests.sh tests.core:CoreTest -s --logging-level=DEBUG</div></div><!-- fragment --><p>or a single test method:</p>
<div class="fragment"><div class="line">./run_unit_tests.sh tests.core:CoreTest.test_check_operators -s --logging-level=DEBUG</div></div><!-- fragment --><p>For more information on how to run a subset of the tests, take a look at the nosetests docs.</p>
<p>See also the list of test classes and methods in <code><a class="el" href="core_8py.html">tests/core.py</a></code>.</p>
<h3>Changing the Metadata Database</h3>
<p>When developing features the need may arise to persist information to the the metadata database. Airflow has <a href="https://bitbucket.org/zzzeek/alembic">Alembic</a> built-in to handle all schema changes. Alembic must be installed on your development machine before continuing.</p>
<div class="fragment"><div class="line"># starting at the root of the project</div><div class="line">$ pwd</div><div class="line">~/airflow</div><div class="line"># change to the airflow directory</div><div class="line">$ cd airflow</div><div class="line">$ alembic revision -m &quot;add new field to db&quot;</div><div class="line">  Generating</div><div class="line">~/airflow/airflow/migrations/versions/12341123_add_new_field_to_db.py</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
