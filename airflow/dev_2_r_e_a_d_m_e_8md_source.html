<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>airflow_analysis: E:/00_Code/incubator-airflow-master/dev/README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">airflow_analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">E:/00_Code/incubator-airflow-master/dev/README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dev_2_r_e_a_d_m_e_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Development Tools</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;## Airflow Pull Request Tool</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;The `airflow-pr` tool interactively guides committers through the process of merging GitHub PRs into Airflow and closing associated JIRA issues.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;It is very important that PRs reference a JIRA issue. The preferred way to do that is for the PR title to begin with [AIRFLOW-XX]. However, the PR tool can recognize and parse many other JIRA issue formats in the title and will offer to correct them if possible.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;__Please note:__ this tool will restore your current branch when it finishes, but you will lose any uncommitted changes. Make sure you commit any changes you wish to keep before proceeding.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;### Execution</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;Simply execute the `airflow-pr` tool:</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;```</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;$ ./airflow-pr</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;Usage: airflow-pr [OPTIONS] COMMAND [ARGS]...</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  This tool should be used by Airflow committers to test PRs, merge them</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  into the master branch, and close related JIRA issues.</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  Before you begin, make sure you have created the &#39;apache&#39; and &#39;github&#39; git</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  remotes. You can use the &quot;setup_git_remotes&quot; command to do this</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  automatically. If you do not want to use these remote names, you can tell</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  the PR tool by setting the appropriate environment variables. For more</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  information, run:</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      airflow-pr merge --help</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;Options:</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  --help  Show this message and exit.</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;Commands:</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  close_jira         Close a JIRA issue (without merging a PR)</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  merge              Merge a GitHub PR into Airflow master</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  setup_git_remotes  Set up default git remotes</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  work_local         Clone a GitHub PR locally for testing (no push)</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;```</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;#### Commands</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;Execute `airflow-pr merge` to be interactively guided through the process of merging a PR, pushing changes to master, and closing JIRA issues.</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;Execute `airflow-pr work_local` to only merge the PR locally. The tool will pause once the merge is complete, allowing the user to explore the PR, and then will delete the merge and restore the original development environment.</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;Execute `airflow-pr close_jira` to close a JIRA issue without needing to merge a PR. You will be prompted for an issue number and close comment.</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;Execute `airflow-pr setup_git_remotes` to configure the default (expected) git remotes. See below for details.</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;### Configuration</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;#### Python Libraries</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;The merge tool requires the `click` and `jira` libraries to be installed. If the libraries are not found, the user will be prompted to install them:</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;```bash</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;pip install click jira</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;```</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;#### git Remotes</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;tl;dr run `airflow-pr setup_git_remotes` before using the tool for the first time.</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;Before using the merge tool, users need to make sure their git remotes are configured. By default, the tool assumes a setup like the one below, where the github repo remote is named `github` and the Apache repo remote is named `apache`. If users have other remote names, they can be supplied by setting environment variables `GITHUB_REMOTE_NAME` and `APACHE_REMOTE_NAME`, respectively.</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;Users can configure this automatically by running `airflow-pr setup_git_remotes`.</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;```bash</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;$ git remote -v</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;apache https://git-wip-us.apache.org/repos/asf/incubator-airflow.git (fetch)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;apache https://git-wip-us.apache.org/repos/asf/incubator-airflow.git (push)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;github https://github.com/apache/incubator-airflow.git (fetch)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;github https://github.com/apache/incubator-airflow.git (push)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;origin https://github.com/&lt;USER&gt;/airflow (fetch)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;origin https://github.com/&lt;USER&gt;/airflow (push)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;```</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;#### JIRA</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;Users should set environment variables `JIRA_USERNAME` and `JIRA_PASSWORD` corresponding to their ASF JIRA login. This will allow the tool to automatically close issues. If they are not set, the user will be prompted every time.</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;#### GitHub OAuth Token</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;Unauthenticated users can only make 60 requests/hour to the Github API. If you get an error about exceeding the rate, you will need to set a `GITHUB_OAUTH_KEY` environment variable that contains a token value. Users can generate tokens from their GitHub profile.</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
