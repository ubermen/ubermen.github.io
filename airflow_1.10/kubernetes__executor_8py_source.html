<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>airflow_1.10.0_stable: F:/00_Code/incubator-airflow-1-10-stable/airflow/contrib/executors/kubernetes_executor.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">airflow_1.10.0_stable
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e38cca866e3d74f67c36b6eb5e35f8b2.html">00_Code</a></li><li class="navelem"><a class="el" href="dir_e9b614651da0e4e15ebac8c294618d94.html">incubator-airflow-1-10-stable</a></li><li class="navelem"><a class="el" href="dir_f41595f7a122928de41a7afa7ce76574.html">airflow</a></li><li class="navelem"><a class="el" href="dir_c9594264e92876a33e6b418a9be830c9.html">contrib</a></li><li class="navelem"><a class="el" href="dir_fec6db7670684e63d724353553d431fd.html">executors</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">kubernetes_executor.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="kubernetes__executor_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespaceairflow_1_1contrib_1_1executors_1_1kubernetes__executor.html">    1</a></span>&#160;<span class="comment"># Licensed to the Apache Software Foundation (ASF) under one</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># or more contributor license agreements.  See the NOTICE file</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"># distributed with this work for additional information</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"># regarding copyright ownership.  The ASF licenses this file</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># to you under the Apache License, Version 2.0 (the</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># &quot;License&quot;); you may not use this file except in compliance</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"># with the License.  You may obtain a copy of the License at</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">#   http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"># Unless required by applicable law or agreed to in writing,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"># software distributed under the License is distributed on an</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"># &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"># KIND, either express or implied.  See the License for the</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"># specific language governing permissions and limitations</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"># under the License.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> base64</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">import</span> multiprocessing</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">from</span> queue <span class="keyword">import</span> Queue</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">from</span> dateutil <span class="keyword">import</span> parser</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">from</span> uuid <span class="keyword">import</span> uuid4</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">import</span> kubernetes</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">from</span> kubernetes <span class="keyword">import</span> watch, client</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">from</span> kubernetes.client.rest <span class="keyword">import</span> ApiException</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1configuration.html">airflow.configuration</a> <span class="keyword">import</span> conf</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1contrib_1_1kubernetes_1_1pod__launcher.html">airflow.contrib.kubernetes.pod_launcher</a> <span class="keyword">import</span> PodLauncher</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1contrib_1_1kubernetes_1_1kube__client.html">airflow.contrib.kubernetes.kube_client</a> <span class="keyword">import</span> get_kube_client</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1contrib_1_1kubernetes_1_1worker__configuration.html">airflow.contrib.kubernetes.worker_configuration</a> <span class="keyword">import</span> WorkerConfiguration</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1executors_1_1base__executor.html">airflow.executors.base_executor</a> <span class="keyword">import</span> BaseExecutor</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1executors.html">airflow.executors</a> <span class="keyword">import</span> Executors</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1models.html">airflow.models</a> <span class="keyword">import</span> TaskInstance, KubeResourceVersion, KubeWorkerIdentifier</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1utils_1_1state.html">airflow.utils.state</a> <span class="keyword">import</span> State</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">from</span> airflow <span class="keyword">import</span> configuration, settings</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1exceptions.html">airflow.exceptions</a> <span class="keyword">import</span> AirflowConfigException, AirflowException</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceairflow_1_1utils_1_1log_1_1logging__mixin.html">airflow.utils.log.logging_mixin</a> <span class="keyword">import</span> LoggingMixin</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html">   39</a></span>&#160;<span class="keyword">class </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html">KubernetesExecutorConfig</a>:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a74e195b44d06d71a70511035f7d3b20d">__init__</a>(self, image=None, image_pull_policy=None, request_memory=None,</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                 request_cpu=None, limit_memory=None, limit_cpu=None,</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a74e195b44d06d71a70511035f7d3b20d">   42</a></span>&#160;                 gcp_service_account_key=None):</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ad66f1b82fd101e51c3a09fa08c8e9313">   43</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ad66f1b82fd101e51c3a09fa08c8e9313">image</a> = image</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac4bf20b954883c53c93c0687718d31f6">   44</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac4bf20b954883c53c93c0687718d31f6">image_pull_policy</a> = image_pull_policy</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a3dea8aed782ef7bab6c75a6522d10a45">   45</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a3dea8aed782ef7bab6c75a6522d10a45">request_memory</a> = request_memory</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#aa15fed7552dc3114b028976d990eebeb">   46</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#aa15fed7552dc3114b028976d990eebeb">request_cpu</a> = request_cpu</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ae6944b5021eccf94df7b46313f3d9e85">   47</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ae6944b5021eccf94df7b46313f3d9e85">limit_memory</a> = limit_memory</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#abc43ef22a916daa67c84e8f902f9bd66">   48</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#abc43ef22a916daa67c84e8f902f9bd66">limit_cpu</a> = limit_cpu</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a5bb53ed45d206324f547172db4fab6f6">   49</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a5bb53ed45d206324f547172db4fab6f6">gcp_service_account_key</a> = gcp_service_account_key</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac17e1a809f6ea5c59735475f26086e4e">   51</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac17e1a809f6ea5c59735475f26086e4e">__repr__</a>(self):</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;{}(image={}, image_pull_policy={}, request_memory={}, request_cpu={}, &quot;</span> \</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;               <span class="stringliteral">&quot;limit_memory={}, limit_cpu={}, gcp_service_account_key={})&quot;</span> \</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            .format(KubernetesExecutorConfig.__name__, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ad66f1b82fd101e51c3a09fa08c8e9313">image</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac4bf20b954883c53c93c0687718d31f6">image_pull_policy</a>,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                    self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a3dea8aed782ef7bab6c75a6522d10a45">request_memory</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#aa15fed7552dc3114b028976d990eebeb">request_cpu</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ae6944b5021eccf94df7b46313f3d9e85">limit_memory</a>,</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                    self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#abc43ef22a916daa67c84e8f902f9bd66">limit_cpu</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a5bb53ed45d206324f547172db4fab6f6">gcp_service_account_key</a>)</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    @staticmethod</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a94fcd6abaa9be3747db567f831fc8b47">   59</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a94fcd6abaa9be3747db567f831fc8b47">from_dict</a>(obj):</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keywordflow">if</span> obj <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html">KubernetesExecutorConfig</a>()</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(obj, dict):</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">raise</span> TypeError(</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                <span class="stringliteral">&#39;Cannot convert a non-dictionary object into a KubernetesExecutorConfig&#39;</span>)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        namespaced = obj.get(Executors.KubernetesExecutor, {})</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html">KubernetesExecutorConfig</a>(</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            image=namespaced.get(<span class="stringliteral">&#39;image&#39;</span>, <span class="keywordtype">None</span>),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            image_pull_policy=namespaced.get(<span class="stringliteral">&#39;image_pull_policy&#39;</span>, <span class="keywordtype">None</span>),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            request_memory=namespaced.get(<span class="stringliteral">&#39;request_memory&#39;</span>, <span class="keywordtype">None</span>),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            request_cpu=namespaced.get(<span class="stringliteral">&#39;request_cpu&#39;</span>, <span class="keywordtype">None</span>),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            limit_memory=namespaced.get(<span class="stringliteral">&#39;limit_memory&#39;</span>, <span class="keywordtype">None</span>),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            limit_cpu=namespaced.get(<span class="stringliteral">&#39;limit_cpu&#39;</span>, <span class="keywordtype">None</span>),</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            gcp_service_account_key=namespaced.get(<span class="stringliteral">&#39;gcp_service_account_key&#39;</span>, <span class="keywordtype">None</span>)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        )</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a2ff727a32e1a87846e900a5b0887def2">   79</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a2ff727a32e1a87846e900a5b0887def2">as_dict</a>(self):</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">return</span> {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="stringliteral">&#39;image&#39;</span>: self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ad66f1b82fd101e51c3a09fa08c8e9313">image</a>,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="stringliteral">&#39;image_pull_policy&#39;</span>: self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac4bf20b954883c53c93c0687718d31f6">image_pull_policy</a>,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="stringliteral">&#39;request_memory&#39;</span>: self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a3dea8aed782ef7bab6c75a6522d10a45">request_memory</a>,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="stringliteral">&#39;request_cpu&#39;</span>: self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#aa15fed7552dc3114b028976d990eebeb">request_cpu</a>,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="stringliteral">&#39;limit_memory&#39;</span>: self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ae6944b5021eccf94df7b46313f3d9e85">limit_memory</a>,</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="stringliteral">&#39;limit_cpu&#39;</span>: self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#abc43ef22a916daa67c84e8f902f9bd66">limit_cpu</a>,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="stringliteral">&#39;gcp_service_account_key&#39;</span>: self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a5bb53ed45d206324f547172db4fab6f6">gcp_service_account_key</a></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html">   91</a></span>&#160;<span class="keyword">class </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html">KubeConfig</a>:</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a0b36fb8f63ce5de874776e926b0cf06e">   92</a></span>&#160;    core_section = <span class="stringliteral">&#39;core&#39;</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">   93</a></span>&#160;    kubernetes_section = <span class="stringliteral">&#39;kubernetes&#39;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a9e525a1be4f1967d9eb11235cb888ef4">   95</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a9e525a1be4f1967d9eb11235cb888ef4">__init__</a>(self):</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        configuration_dict = configuration.as_dict(display_sensitive=<span class="keyword">True</span>)</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a635df58ab3e275fea79187f8628c7186">   97</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a635df58ab3e275fea79187f8628c7186">core_configuration</a> = configuration_dict[<span class="stringliteral">&#39;core&#39;</span>]</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a6526293b2f93085160c6f81fcc0b56da">   98</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a6526293b2f93085160c6f81fcc0b56da">kube_secrets</a> = configuration_dict.get(<span class="stringliteral">&#39;kubernetes_secrets&#39;</span>, {})</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aa3a17a395e40be0005e7d2d0fa2b725c">   99</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aa3a17a395e40be0005e7d2d0fa2b725c">airflow_home</a> = configuration.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a0b36fb8f63ce5de874776e926b0cf06e">core_section</a>, <span class="stringliteral">&#39;airflow_home&#39;</span>)</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a05087e293ee45357fa1a88dedd520128">  100</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a05087e293ee45357fa1a88dedd520128">dags_folder</a> = configuration.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a0b36fb8f63ce5de874776e926b0cf06e">core_section</a>, <span class="stringliteral">&#39;dags_folder&#39;</span>)</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a9b18a357b08a5501d4cbbdd5c30303e5">  101</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a9b18a357b08a5501d4cbbdd5c30303e5">parallelism</a> = configuration.getint(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a0b36fb8f63ce5de874776e926b0cf06e">core_section</a>, <span class="stringliteral">&#39;PARALLELISM&#39;</span>)</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5f311d06f7ccf87bf2540e9dbc674551">  102</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5f311d06f7ccf87bf2540e9dbc674551">worker_container_repository</a> = configuration.get(</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;worker_container_repository&#39;</span>)</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a42e6eb55e481cc8702754eb56b80dbbe">  104</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a42e6eb55e481cc8702754eb56b80dbbe">worker_container_tag</a> = configuration.get(</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;worker_container_tag&#39;</span>)</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#afeece30614784df7ed297bc88568c9e1">  106</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#afeece30614784df7ed297bc88568c9e1">kube_image</a> = <span class="stringliteral">&#39;{}:{}&#39;</span>.format(</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5f311d06f7ccf87bf2540e9dbc674551">worker_container_repository</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a42e6eb55e481cc8702754eb56b80dbbe">worker_container_tag</a>)</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aaba955fbb7ac585167a7bc41e05675b0">  108</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aaba955fbb7ac585167a7bc41e05675b0">kube_image_pull_policy</a> = configuration.get(</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&quot;worker_container_image_pull_policy&quot;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        )</div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#af4b243abfaf2092033f1084d1114c932">  111</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#af4b243abfaf2092033f1084d1114c932">delete_worker_pods</a> = conf.getboolean(</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;delete_worker_pods&#39;</span>)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aa09a23bc92c975b46f3292bce9e2cdef">  114</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aa09a23bc92c975b46f3292bce9e2cdef">worker_service_account_name</a> = conf.get(</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;worker_service_account_name&#39;</span>)</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a710cc9cac1fa78f577e0a433ca9e71d2">  116</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a710cc9cac1fa78f577e0a433ca9e71d2">image_pull_secrets</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;image_pull_secrets&#39;</span>)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment"># NOTE: `git_repo` and `git_branch` must be specified together as a pair</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment"># The http URL of the git repository to clone from</span></div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a58ebe933694685a89a16e2c1694196ef">  120</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a58ebe933694685a89a16e2c1694196ef">git_repo</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_repo&#39;</span>)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="comment"># The branch of the repository to be checked out</span></div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5057bef531562466e10f9a4126281974">  122</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5057bef531562466e10f9a4126281974">git_branch</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_branch&#39;</span>)</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment"># Optionally, the directory in the git repository containing the dags</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a170e0bbdccc563f8baa088e8ed1b8aff">  124</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a170e0bbdccc563f8baa088e8ed1b8aff">git_subpath</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_subpath&#39;</span>)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="comment"># Optionally a user may supply a `git_user` and `git_password` for private</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment"># repositories</span></div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a2e45812324719c3e9cb966e2d2a40e65">  128</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a2e45812324719c3e9cb966e2d2a40e65">git_user</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_user&#39;</span>)</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a62c37e58712818f7560b872731fc6c5a">  129</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a62c37e58712818f7560b872731fc6c5a">git_password</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_password&#39;</span>)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment"># NOTE: The user may optionally use a volume claim to mount a PV containing</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment"># DAGs directly</span></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#adba169e4eed2bb6bf8a5a34c9faf46a1">  133</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#adba169e4eed2bb6bf8a5a34c9faf46a1">dags_volume_claim</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;dags_volume_claim&#39;</span>)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment"># This prop may optionally be set for PV Claims and is used to write logs</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ac96658c848d4aa14d16368ef88d9ee4a">  136</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ac96658c848d4aa14d16368ef88d9ee4a">logs_volume_claim</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;logs_volume_claim&#39;</span>)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment"># This prop may optionally be set for PV Claims and is used to locate DAGs</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment"># on a SubPath</span></div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5ff06b9b42146b1e5ecdac254e0d0153">  140</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5ff06b9b42146b1e5ecdac254e0d0153">dags_volume_subpath</a> = conf.get(</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;dags_volume_subpath&#39;</span>)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment"># This prop may optionally be set for PV Claims and is used to locate logs</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment"># on a SubPath</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5f6df491f2f5922064399e32f7e1baf2">  145</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5f6df491f2f5922064399e32f7e1baf2">logs_volume_subpath</a> = conf.get(</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;logs_volume_subpath&#39;</span>)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="comment"># This prop may optionally be set for PV Claims and is used to write logs</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ab1e21c6b38fa10b39b3aff88b4559754">  149</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ab1e21c6b38fa10b39b3aff88b4559754">base_log_folder</a> = configuration.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a0b36fb8f63ce5de874776e926b0cf06e">core_section</a>, <span class="stringliteral">&#39;base_log_folder&#39;</span>)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment"># The Kubernetes Namespace in which the Scheduler and Webserver reside. Note</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment"># that if your</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment"># cluster has RBAC enabled, your scheduler may need service account permissions to</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment"># create, watch, get, and delete pods in this namespace.</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a14b1c4286ca709414b967bc45567b0c6">  155</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a14b1c4286ca709414b967bc45567b0c6">kube_namespace</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;namespace&#39;</span>)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment"># The Kubernetes Namespace in which pods will be created by the executor. Note</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment"># that if your</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment"># cluster has RBAC enabled, your workers may need service account permissions to</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment"># interact with cluster components.</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#af8cda7eeff04c1d0d92172f8790cf69b">  160</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#af8cda7eeff04c1d0d92172f8790cf69b">executor_namespace</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;namespace&#39;</span>)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment"># Task secrets managed by KubernetesExecutor.</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a19badfb4b9ebcf88b05f18eec61d7efd">  162</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a19badfb4b9ebcf88b05f18eec61d7efd">gcp_service_account_keys</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                                 <span class="stringliteral">&#39;gcp_service_account_keys&#39;</span>)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment"># If the user is using the git-sync container to clone their repository via git,</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment"># allow them to specify repository, tag, and pod name for the init container.</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a2974e9ce1548f7aff2e096fa37971503">  167</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a2974e9ce1548f7aff2e096fa37971503">git_sync_container_repository</a> = conf.get(</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_sync_container_repository&#39;</span>)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ae31c8273474160a5a1d0e61751a66138">  170</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ae31c8273474160a5a1d0e61751a66138">git_sync_container_tag</a> = conf.get(</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_sync_container_tag&#39;</span>)</div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a453f6b6cf2650631ce146b8558de8688">  172</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a453f6b6cf2650631ce146b8558de8688">git_sync_container</a> = <span class="stringliteral">&#39;{}:{}&#39;</span>.format(</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a2974e9ce1548f7aff2e096fa37971503">git_sync_container_repository</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ae31c8273474160a5a1d0e61751a66138">git_sync_container_tag</a>)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ad0700f30580a29ce2f13565a4638ae20">  175</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ad0700f30580a29ce2f13565a4638ae20">git_sync_init_container_name</a> = conf.get(</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;git_sync_init_container_name&#39;</span>)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment"># The worker pod may optionally have a  valid Airflow config loaded via a</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment"># configmap</span></div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#abee81da26c8afd6cbe5d09a185801be5">  180</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#abee81da26c8afd6cbe5d09a185801be5">airflow_configmap</a> = conf.get(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">kubernetes_section</a>, <span class="stringliteral">&#39;airflow_configmap&#39;</span>)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a53514c4e425b0a916d7187d4386edadc">_validate</a>()</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">def </span>_validate(self):</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#adba169e4eed2bb6bf8a5a34c9faf46a1">dags_volume_claim</a> <span class="keywordflow">and</span> (<span class="keywordflow">not</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a58ebe933694685a89a16e2c1694196ef">git_repo</a> <span class="keywordflow">or</span> <span class="keywordflow">not</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5057bef531562466e10f9a4126281974">git_branch</a>):</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classairflow_1_1exceptions_1_1_airflow_config_exception.html">AirflowConfigException</a>(</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="stringliteral">&#39;In kubernetes mode the following must be set in the `kubernetes` &#39;</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="stringliteral">&#39;config section: `dags_volume_claim` or `git_repo and git_branch`&#39;</span>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html">  191</a></span>&#160;<span class="keyword">class </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html">KubernetesJobWatcher</a>(multiprocessing.Process, <a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html">LoggingMixin</a>, object):</div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a1a57e6f3cd2b1b6b543449324f4295d5">  192</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a1a57e6f3cd2b1b6b543449324f4295d5">__init__</a>(self, namespace, watcher_queue, resource_version, worker_uuid):</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        multiprocessing.Process.__init__(self)</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a066216a42123bd8a72c3b560f9eecd06">  194</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a066216a42123bd8a72c3b560f9eecd06">namespace</a> = namespace</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a97be4647df5daa55051db4a3e6ebe840">  195</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a97be4647df5daa55051db4a3e6ebe840">worker_uuid</a> = worker_uuid</div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a35d0516bc7926461e36e68c4721120c9">  196</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a35d0516bc7926461e36e68c4721120c9">watcher_queue</a> = watcher_queue</div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8e5c1cd7168c427cd4e4aabb0d1d1840">  197</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8e5c1cd7168c427cd4e4aabb0d1d1840">resource_version</a> = resource_version</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a2d8e9431c328a5e148fabaccaa9303fa">  199</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a2d8e9431c328a5e148fabaccaa9303fa">run</a>(self):</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        kube_client = <a class="code" href="namespaceairflow_1_1contrib_1_1kubernetes_1_1kube__client.html#a89e6e321931680952fd89f44703f8447">get_kube_client</a>()</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8e5c1cd7168c427cd4e4aabb0d1d1840">resource_version</a> = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8cb4941cc6f8b60b980c307f0e56a375">_run</a>(kube_client, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8e5c1cd7168c427cd4e4aabb0d1d1840">resource_version</a>,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                                  self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a97be4647df5daa55051db4a3e6ebe840">worker_uuid</a>)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">except</span> Exception:</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.exception(<span class="stringliteral">&#39;Unknown error in KubernetesJobWatcher. Failing&#39;</span>)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">raise</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.warn(<span class="stringliteral">&#39;Watch died gracefully, starting back up with: &#39;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                              <span class="stringliteral">&#39;last resource_version: %s&#39;</span>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8e5c1cd7168c427cd4e4aabb0d1d1840">resource_version</a>)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">def </span>_run(self, kube_client, resource_version, worker_uuid):</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="stringliteral">&#39;Event: and now my watch begins starting at resource_version: %s&#39;</span>,</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            resource_version</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        )</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        watcher = watch.Watch()</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        kwargs = {<span class="stringliteral">&#39;label_selector&#39;</span>: <span class="stringliteral">&#39;airflow-worker={}&#39;</span>.format(worker_uuid)}</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">if</span> resource_version:</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            kwargs[<span class="stringliteral">&#39;resource_version&#39;</span>] = resource_version</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        last_resource_version = <span class="keywordtype">None</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">for</span> event <span class="keywordflow">in</span> watcher.stream(kube_client.list_namespaced_pod, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a066216a42123bd8a72c3b560f9eecd06">namespace</a>,</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                    **kwargs):</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            task = event[<span class="stringliteral">&#39;object&#39;</span>]</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="stringliteral">&#39;Event: %s had an event of type %s&#39;</span>,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                task.metadata.name, event[<span class="stringliteral">&#39;type&#39;</span>]</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            )</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">if</span> event[<span class="stringliteral">&#39;type&#39;</span>] == <span class="stringliteral">&#39;ERROR&#39;</span>:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="keywordflow">return</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#aada0eef7ad9a932c38f13e5e7503b476">process_error</a>(event)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a282aaf8b15e0bfa72fcce8eb2b605529">process_status</a>(</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                task.metadata.name, task.status.phase, task.metadata.labels,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                task.metadata.resource_version</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            )</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            last_resource_version = task.metadata.resource_version</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">return</span> last_resource_version</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#aada0eef7ad9a932c38f13e5e7503b476">  241</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#aada0eef7ad9a932c38f13e5e7503b476">process_error</a>(self, event):</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.error(</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="stringliteral">&#39;Encountered Error response from k8s list namespaced pod stream =&gt; %s&#39;</span>,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            event</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        )</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        raw_object = event[<span class="stringliteral">&#39;raw_object&#39;</span>]</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">if</span> raw_object[<span class="stringliteral">&#39;code&#39;</span>] == 410:</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="stringliteral">&#39;Kubernetes resource version is too old, must reset to 0 =&gt; %s&#39;</span>,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                raw_object[<span class="stringliteral">&#39;message&#39;</span>]</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            )</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="comment"># Return resource version 0</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;0&#39;</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">raise</span> <a class="code" href="classairflow_1_1exceptions_1_1_airflow_exception.html">AirflowException</a>(</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="stringliteral">&#39;Kubernetes failure for %s with code %s and message: %s&#39;</span>,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            raw_object[<span class="stringliteral">&#39;reason&#39;</span>], raw_object[<span class="stringliteral">&#39;code&#39;</span>], raw_object[<span class="stringliteral">&#39;message&#39;</span>]</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        )</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a282aaf8b15e0bfa72fcce8eb2b605529">  259</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a282aaf8b15e0bfa72fcce8eb2b605529">process_status</a>(self, pod_id, status, labels, resource_version):</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> status == <span class="stringliteral">&#39;Pending&#39;</span>:</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Event: %s Pending&#39;</span>, pod_id)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">elif</span> status == <span class="stringliteral">&#39;Failed&#39;</span>:</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Event: %s Failed&#39;</span>, pod_id)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a35d0516bc7926461e36e68c4721120c9">watcher_queue</a>.put((pod_id, State.FAILED, labels, resource_version))</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">elif</span> status == <span class="stringliteral">&#39;Succeeded&#39;</span>:</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Event: %s Succeeded&#39;</span>, pod_id)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a35d0516bc7926461e36e68c4721120c9">watcher_queue</a>.put((pod_id, <span class="keywordtype">None</span>, labels, resource_version))</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">elif</span> status == <span class="stringliteral">&#39;Running&#39;</span>:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Event: %s is Running&#39;</span>, pod_id)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.warn(</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="stringliteral">&#39;Event: Invalid state: %s on pod: %s with labels: %s with &#39;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="stringliteral">&#39;resource_version: %s&#39;</span>, status, pod_id, labels, resource_version</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            )</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html">  277</a></span>&#160;<span class="keyword">class </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html">AirflowKubernetesScheduler</a>(<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html">LoggingMixin</a>):</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aad370a3e31a5fc0bf3695ccc13abf43d">__init__</a>(self, kube_config, task_queue, result_queue, session,</div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aad370a3e31a5fc0bf3695ccc13abf43d">  279</a></span>&#160;                 kube_client, worker_uuid):</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&quot;Creating Kubernetes executor&quot;</span>)</div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6fe879b65f728367a25d33f6c888b851">  281</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6fe879b65f728367a25d33f6c888b851">kube_config</a> = kube_config</div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a7a9f533f703b4e066af63aca79bd08d1">  282</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a7a9f533f703b4e066af63aca79bd08d1">task_queue</a> = task_queue</div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#adb64803bb21e4065b2785d62ca4fa761">  283</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#adb64803bb21e4065b2785d62ca4fa761">result_queue</a> = result_queue</div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3196c6a77b7dd8cde41b433146ba6c0">  284</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3196c6a77b7dd8cde41b433146ba6c0">namespace</a> = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6fe879b65f728367a25d33f6c888b851">kube_config</a>.kube_namespace</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&quot;Kubernetes using namespace %s&quot;</span>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3196c6a77b7dd8cde41b433146ba6c0">namespace</a>)</div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a53c47112fd213eb0825c1173a36c699b">  286</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a53c47112fd213eb0825c1173a36c699b">kube_client</a> = kube_client</div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aeb0ac2b79a238de270fff518195bceb5">  287</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aeb0ac2b79a238de270fff518195bceb5">launcher</a> = <a class="code" href="classairflow_1_1contrib_1_1kubernetes_1_1pod__launcher_1_1_pod_launcher.html">PodLauncher</a>(kube_client=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a53c47112fd213eb0825c1173a36c699b">kube_client</a>)</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6d7347a96a59148ea05ec1a0e52023ff">  288</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6d7347a96a59148ea05ec1a0e52023ff">worker_configuration</a> = <a class="code" href="classairflow_1_1contrib_1_1kubernetes_1_1worker__configuration_1_1_worker_configuration.html">WorkerConfiguration</a>(kube_config=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6fe879b65f728367a25d33f6c888b851">kube_config</a>)</div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab7a8a7bfc5fda77ecd322da5abb7c9dc">  289</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab7a8a7bfc5fda77ecd322da5abb7c9dc">watcher_queue</a> = multiprocessing.Queue()</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a8084c60da25bb709fd35ce9b247d6b6b">_session</a> = session</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#af87655d43f8c2325a646ceb0c7d1449e">  291</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#af87655d43f8c2325a646ceb0c7d1449e">worker_uuid</a> = worker_uuid</div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aead75ac3c099928e17ff275e2468633f">  292</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aead75ac3c099928e17ff275e2468633f">kube_watcher</a> = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a8d1bb877ce900fa0927e3b3fe4047037">_make_kube_watcher</a>()</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keyword">def </span>_make_kube_watcher(self):</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        resource_version = KubeResourceVersion.get_current_resource_version(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a8084c60da25bb709fd35ce9b247d6b6b">_session</a>)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        watcher = <a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html">KubernetesJobWatcher</a>(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3196c6a77b7dd8cde41b433146ba6c0">namespace</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab7a8a7bfc5fda77ecd322da5abb7c9dc">watcher_queue</a>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                       resource_version, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#af87655d43f8c2325a646ceb0c7d1449e">worker_uuid</a>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        watcher.start()</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> watcher</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keyword">def </span>_health_check_kube_watcher(self):</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aead75ac3c099928e17ff275e2468633f">kube_watcher</a>.is_alive():</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">pass</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.error(</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="stringliteral">&#39;Error while health checking kube watcher process. &#39;</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="stringliteral">&#39;Process died for unknown reasons&#39;</span>)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aead75ac3c099928e17ff275e2468633f">kube_watcher</a> = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a8d1bb877ce900fa0927e3b3fe4047037">_make_kube_watcher</a>()</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a455f07c61226c970b20e6db8f9e53235">  310</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a455f07c61226c970b20e6db8f9e53235">run_next</a>(self, next_job):</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="stringliteral">        The run_next command will check the task_queue for any un-run jobs.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="stringliteral">        It will then create a unique job-id, launch that job in the cluster,</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="stringliteral">        and store relevant info in the current_jobs map so we can track the job&#39;s</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="stringliteral">        status</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Kubernetes job is %s&#39;</span>, str(next_job))</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        key, command, kube_executor_config = next_job</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        dag_id, task_id, execution_date = key</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&quot;Kubernetes running for command %s&quot;</span>, command)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&quot;Kubernetes launching image %s&quot;</span>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6fe879b65f728367a25d33f6c888b851">kube_config</a>.kube_image)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        pod = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6d7347a96a59148ea05ec1a0e52023ff">worker_configuration</a>.make_pod(</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            namespace=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3196c6a77b7dd8cde41b433146ba6c0">namespace</a>, worker_uuid=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#af87655d43f8c2325a646ceb0c7d1449e">worker_uuid</a>,</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            pod_id=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a1e1d2cecf33ffc7c4610e0b88761d3bd">_create_pod_id</a>(dag_id, task_id),</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            dag_id=dag_id, task_id=task_id,</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            execution_date=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a33226d94eba8e1609d28ce33bef512e4">_datetime_to_label_safe_datestring</a>(execution_date),</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            airflow_command=command, kube_executor_config=kube_executor_config</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        )</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="comment"># the watcher will monitor pods, so we do not block.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aeb0ac2b79a238de270fff518195bceb5">launcher</a>.run_pod_async(pod)</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&quot;Kubernetes Job created!&quot;</span>)</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a78f54c8f8a3391fc5015326d9d91f608">  334</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a78f54c8f8a3391fc5015326d9d91f608">delete_pod</a>(self, pod_id):</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6fe879b65f728367a25d33f6c888b851">kube_config</a>.delete_worker_pods:</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a53c47112fd213eb0825c1173a36c699b">kube_client</a>.delete_namespaced_pod(</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    pod_id, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3196c6a77b7dd8cde41b433146ba6c0">namespace</a>, body=client.V1DeleteOptions())</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">except</span> ApiException <span class="keyword">as</span> e:</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="comment"># If the pod is already deleted</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">if</span> e.status != 404:</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    <span class="keywordflow">raise</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a158c8dc1478d76eaa154fd21454b57d6">  344</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a158c8dc1478d76eaa154fd21454b57d6">sync</a>(self):</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="stringliteral">        The sync function checks the status of all currently running kubernetes jobs.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="stringliteral">        If a job is completed, it&#39;s status is placed in the result queue to</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="stringliteral">        be sent back to the scheduler.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="stringliteral">        :return:</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#af81752e16918868280a12a3b26fde67f">_health_check_kube_watcher</a>()</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">while</span> <span class="keywordflow">not</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab7a8a7bfc5fda77ecd322da5abb7c9dc">watcher_queue</a>.empty():</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#affbf96de5b98fe6c19c2b349a6ed5e43">process_watcher_task</a>()</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#affbf96de5b98fe6c19c2b349a6ed5e43">  357</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#affbf96de5b98fe6c19c2b349a6ed5e43">process_watcher_task</a>(self):</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        pod_id, state, labels, resource_version = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab7a8a7bfc5fda77ecd322da5abb7c9dc">watcher_queue</a>.<a class="code" href="namespaceairflow_1_1configuration.html#aaf0a87fd1a9e6566e44bcffc645e16dc">get</a>()</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="stringliteral">&#39;Attempting to finish pod; pod_id: %s; state: %s; labels: %s&#39;</span>,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            pod_id, state, labels</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        )</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        key = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab92e6c6906fb2ac6d1af5100fe42cd60">_labels_to_key</a>(labels=labels)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">if</span> key:</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&#39;finishing job %s - %s (%s)&#39;</span>, key, state, pod_id)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#adb64803bb21e4065b2785d62ca4fa761">result_queue</a>.put((key, state, pod_id, resource_version))</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    @staticmethod</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keyword">def </span>_strip_unsafe_kubernetes_special_chars(string):</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="stringliteral">        Kubernetes only supports lowercase alphanumeric characters and &quot;-&quot; and &quot;.&quot; in</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="stringliteral">        the pod name</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="stringliteral">        However, there are special rules about how &quot;-&quot; and &quot;.&quot; can be used so let&#39;s</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="stringliteral">        only keep</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="stringliteral">        alphanumeric chars  see here for detail:</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="stringliteral">        https://kubernetes.io/docs/concepts/overview/working-with-objects/names/</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="stringliteral">        :param string: The requested Pod name</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="stringliteral">        :return: ``str`` Pod name stripped of any unsafe characters</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>.<a class="code" href="namespaceexample__qubole__operator.html#a3e837ac5199f7d098e4ab1d01761db99">join</a>(ch.lower() <span class="keywordflow">for</span> ind, ch <span class="keywordflow">in</span> enumerate(string) <span class="keywordflow">if</span> ch.isalnum())</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    @staticmethod</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">def </span>_make_safe_pod_id(safe_dag_id, safe_task_id, safe_uuid):</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="stringliteral">        Kubernetes pod names must be &lt;= 253 chars and must pass the following regex for</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="stringliteral">        validation</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="stringliteral">        &quot;^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$&quot;</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="stringliteral">        :param safe_dag_id: a dag_id with only alphanumeric characters</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="stringliteral">        :param safe_task_id: a task_id with only alphanumeric characters</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="stringliteral">        :param random_uuid: a uuid</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="stringliteral">        :return: ``str`` valid Pod name of appropriate length</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        MAX_POD_ID_LEN = 253</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        safe_key = safe_dag_id + safe_task_id</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        safe_pod_id = safe_key[:MAX_POD_ID_LEN - len(safe_uuid) - 1] + <span class="stringliteral">&quot;-&quot;</span> + safe_uuid</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">return</span> safe_pod_id</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    @staticmethod</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keyword">def </span>_create_pod_id(dag_id, task_id):</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        safe_dag_id = AirflowKubernetesScheduler._strip_unsafe_kubernetes_special_chars(</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            dag_id)</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        safe_task_id = AirflowKubernetesScheduler._strip_unsafe_kubernetes_special_chars(</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            task_id)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        safe_uuid = AirflowKubernetesScheduler._strip_unsafe_kubernetes_special_chars(</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            uuid4().hex)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">return</span> AirflowKubernetesScheduler._make_safe_pod_id(safe_dag_id, safe_task_id,</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                                            safe_uuid)</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    @staticmethod</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keyword">def </span>_label_safe_datestring_to_datetime(string):</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="stringliteral">        Kubernetes doesn&#39;t permit &quot;:&quot; in labels. ISO datetime format uses &quot;:&quot; but not</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="stringliteral">        &quot;_&quot;, let&#39;s</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="stringliteral">        replace &quot;:&quot; with &quot;_&quot;</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="stringliteral">        :param string: string</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="stringliteral">        :return: datetime.datetime object</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">return</span> parser.parse(string.replace(<span class="stringliteral">&#39;_plus_&#39;</span>, <span class="stringliteral">&#39;+&#39;</span>).replace(<span class="stringliteral">&quot;_&quot;</span>, <span class="stringliteral">&quot;:&quot;</span>))</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    @staticmethod</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">def </span>_datetime_to_label_safe_datestring(datetime_obj):</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="stringliteral">        Kubernetes doesn&#39;t like &quot;:&quot; in labels, since ISO datetime format uses &quot;:&quot; but</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="stringliteral">        not &quot;_&quot; let&#39;s</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="stringliteral">        replace &quot;:&quot; with &quot;_&quot;</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="stringliteral">        :param datetime_obj: datetime.datetime object</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="stringliteral">        :return: ISO-like string representing the datetime</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">return</span> datetime_obj.isoformat().replace(<span class="stringliteral">&quot;:&quot;</span>, <span class="stringliteral">&quot;_&quot;</span>).replace(<span class="stringliteral">&#39;+&#39;</span>, <span class="stringliteral">&#39;_plus_&#39;</span>)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keyword">def </span>_labels_to_key(self, labels):</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <span class="keywordflow">return</span> (</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                labels[<span class="stringliteral">&#39;dag_id&#39;</span>], labels[<span class="stringliteral">&#39;task_id&#39;</span>],</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3f63ac104e35c68ba65b3f02639de28">_label_safe_datestring_to_datetime</a>(labels[<span class="stringliteral">&#39;execution_date&#39;</span>]))</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.warn(</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                <span class="stringliteral">&#39;Error while converting labels to key; labels: %s; exception: %s&#39;</span>,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                labels, e</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            )</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html">  450</a></span>&#160;<span class="keyword">class </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html">KubernetesExecutor</a>(<a class="code" href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html">BaseExecutor</a>, <a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html">LoggingMixin</a>):</div><div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a87387d25af4963436e5799bb5b5f0e8e">  451</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a87387d25af4963436e5799bb5b5f0e8e">__init__</a>(self):</div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">  452</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a> = <a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html">KubeConfig</a>()</div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">  453</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">task_queue</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab6e5d6baeda4aba56ec04858485c0067">  455</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab6e5d6baeda4aba56ec04858485c0067">result_queue</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a6c4a26d239637a8d2f899f507539b2d4">  456</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a6c4a26d239637a8d2f899f507539b2d4">kube_scheduler</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">  457</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">kube_client</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a31c7e155fd5d738fe67480f29f988a77">  458</a></span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a31c7e155fd5d738fe67480f29f988a77">worker_uuid</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        super(KubernetesExecutor, self).<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a87387d25af4963436e5799bb5b5f0e8e">__init__</a>(parallelism=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a>.parallelism)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a950352d335616e1f04ecae3128df585d">  461</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a950352d335616e1f04ecae3128df585d">clear_not_launched_queued_tasks</a>(self):</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="stringliteral">        If the airflow scheduler restarts with pending &quot;Queued&quot; tasks, the tasks may or</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="stringliteral">        may not</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="stringliteral">        have been launched Thus, on starting up the scheduler let&#39;s check every</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="stringliteral">        &quot;Queued&quot; task to</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="stringliteral">        see if it has been launched (ie: if there is a corresponding pod on kubernetes)</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="stringliteral">        If it has been launched then do nothing, otherwise reset the state to &quot;None&quot; so</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="stringliteral">        the task</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="stringliteral">        will be rescheduled</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="stringliteral">        This will not be necessary in a future version of airflow in which there is</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="stringliteral">        proper support</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="stringliteral">        for State.LAUNCHED</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        queued_tasks = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>.query(</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            TaskInstance).filter(TaskInstance.state == State.QUEUED).all()</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="stringliteral">&#39;When executor started up, found %s queued task instances&#39;</span>,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            len(queued_tasks)</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        )</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">for</span> task <span class="keywordflow">in</span> queued_tasks:</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            dict_string = <span class="stringliteral">&quot;dag_id={},task_id={},execution_date={},airflow-worker={}&quot;</span> \</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                .format(task.dag_id, task.task_id,</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                        AirflowKubernetesScheduler._datetime_to_label_safe_datestring(</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                            task.execution_date), self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a31c7e155fd5d738fe67480f29f988a77">worker_uuid</a>)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            kwargs = dict(label_selector=dict_string)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            pod_list = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">kube_client</a>.list_namespaced_pod(</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a>.kube_namespace, **kwargs)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">if</span> len(pod_list.items) == 0:</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    <span class="stringliteral">&#39;TaskInstance: %s found in queued state but was not launched, &#39;</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    <span class="stringliteral">&#39;rescheduling&#39;</span>, task</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                )</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>.query(TaskInstance).filter(</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    TaskInstance.dag_id == task.dag_id,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    TaskInstance.task_id == task.task_id,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                    TaskInstance.execution_date == task.execution_date</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                ).update({TaskInstance.state: State.NONE})</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>.commit()</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keyword">def </span>_inject_secrets(self):</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keyword">def </span>_create_or_update_secret(secret_name, secret_path):</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                <span class="keywordflow">return</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">kube_client</a>.create_namespaced_secret(</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                    self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a>.executor_namespace, kubernetes.client.V1Secret(</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        data={</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            <span class="stringliteral">&#39;key.json&#39;</span>: base64.b64encode(open(secret_path, <span class="stringliteral">&#39;r&#39;).read())},</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="stringliteral">                        metadata=kubernetes.client.V1ObjectMeta(name=secret_name)))</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="stringliteral">            </span><span class="keywordflow">except</span> ApiException <span class="keyword">as</span> e:</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="keywordflow">if</span> e.status == 409:</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    <span class="keywordflow">return</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">kube_client</a>.replace_namespaced_secret(</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                        secret_name, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a>.executor_namespace,</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        kubernetes.client.V1Secret(</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                            data={<span class="stringliteral">&#39;key.json&#39;</span>: base64.b64encode(</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                                open(secret_path, <span class="stringliteral">&#39;r&#39;).read())},</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="stringliteral">                            metadata=kubernetes.client.V1ObjectMeta(name=secret_name)))</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="stringliteral">                self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.exception(</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral">                    &#39;Exception while trying to inject secret. &#39;</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    <span class="stringliteral">&#39;Secret name: %s, error details: %s&#39;</span>,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    secret_name, e</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                )</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="keywordflow">raise</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment"># For each GCP service account key, inject it as a secret in executor</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="comment"># namespace with the specific secret name configured in the airflow.cfg.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="comment"># We let exceptions to pass through to users.</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a>.gcp_service_account_keys:</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            name_path_pair_list = [</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                {<span class="stringliteral">&#39;name&#39;</span>: account_spec.strip().split(<span class="stringliteral">&#39;=&#39;</span>)[0],</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                 <span class="stringliteral">&#39;path&#39;</span>: account_spec.strip().split(<span class="stringliteral">&#39;=&#39;</span>)[1]}</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="keywordflow">for</span> account_spec <span class="keywordflow">in</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a>.gcp_service_account_keys.split(<span class="stringliteral">&#39;,&#39;</span>)]</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">for</span> service_account <span class="keywordflow">in</span> name_path_pair_list:</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                _create_or_update_secret(service_account[<span class="stringliteral">&#39;name&#39;</span>], service_account[<span class="stringliteral">&#39;path&#39;</span>])</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#abaa828f348bdf9c8a7887ef039056f1a">  539</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#abaa828f348bdf9c8a7887ef039056f1a">start</a>(self):</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Start Kubernetes executor&#39;</span>)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a> = settings.Session()</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a31c7e155fd5d738fe67480f29f988a77">worker_uuid</a> = KubeWorkerIdentifier.get_or_create_current_kube_worker_uuid(</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&#39;Start with worker_uuid: %s&#39;</span>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a31c7e155fd5d738fe67480f29f988a77">worker_uuid</a>)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="comment"># always need to reset resource version since we don&#39;t know</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="comment"># when we last started, note for behavior below</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="comment"># https://github.com/kubernetes-client/python/blob/master/kubernetes/docs</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="comment"># /CoreV1Api.md#list_namespaced_pod</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        KubeResourceVersion.reset_resource_version(self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">task_queue</a> = Queue()</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab6e5d6baeda4aba56ec04858485c0067">result_queue</a> = Queue()</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">kube_client</a> = <a class="code" href="namespaceairflow_1_1contrib_1_1kubernetes_1_1kube__client.html#a89e6e321931680952fd89f44703f8447">get_kube_client</a>()</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a6c4a26d239637a8d2f899f507539b2d4">kube_scheduler</a> = <a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html">AirflowKubernetesScheduler</a>(</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">kube_config</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">task_queue</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab6e5d6baeda4aba56ec04858485c0067">result_queue</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">kube_client</a>, self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a31c7e155fd5d738fe67480f29f988a77">worker_uuid</a></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        )</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a04a25c58e26c5b31ec034c5f0ba3d398">_inject_secrets</a>()</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a950352d335616e1f04ecae3128df585d">clear_not_launched_queued_tasks</a>()</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a53bd517214319080c783d10e75a3b1d3">  560</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a53bd517214319080c783d10e75a3b1d3">execute_async</a>(self, key, command, queue=None, executor_config=None):</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="stringliteral">&#39;Add task %s with command %s with executor_config %s&#39;</span>,</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            key, command, executor_config</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        )</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        kube_executor_config = KubernetesExecutorConfig.from_dict(executor_config)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">task_queue</a>.put((key, command, kube_executor_config))</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a68dfa9ced133d44d474666f80ef9900b">  568</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a68dfa9ced133d44d474666f80ef9900b">sync</a>(self):</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#a61befad000d8eb462a18c3bae2999403">running</a>:</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;self.running: %s&#39;</span>, self.<a class="code" href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#a61befad000d8eb462a18c3bae2999403">running</a>)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#a279c270085fb5ce5a6a8dc2fe9dd64a3">queued_tasks</a>:</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;self.queued: %s&#39;</span>, self.<a class="code" href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#a279c270085fb5ce5a6a8dc2fe9dd64a3">queued_tasks</a>)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a6c4a26d239637a8d2f899f507539b2d4">kube_scheduler</a>.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a68dfa9ced133d44d474666f80ef9900b">sync</a>()</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        last_resource_version = <span class="keywordtype">None</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">while</span> <span class="keywordflow">not</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab6e5d6baeda4aba56ec04858485c0067">result_queue</a>.empty():</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            results = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab6e5d6baeda4aba56ec04858485c0067">result_queue</a>.<a class="code" href="namespaceairflow_1_1configuration.html#aaf0a87fd1a9e6566e44bcffc645e16dc">get</a>()</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            key, state, pod_id, resource_version = results</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            last_resource_version = resource_version</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Changing state of %s to %s&#39;</span>, results, state)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#af40412a32f4496cc49b9e2500fb0d3e9">_change_state</a>(key, state, pod_id)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        KubeResourceVersion.checkpoint_resource_version(</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            last_resource_version, session=self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">task_queue</a>.empty():</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            key, command, kube_executor_config = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">task_queue</a>.<a class="code" href="namespaceairflow_1_1configuration.html#aaf0a87fd1a9e6566e44bcffc645e16dc">get</a>()</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a6c4a26d239637a8d2f899f507539b2d4">kube_scheduler</a>.run_next((key, command, kube_executor_config))</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keyword">def </span>_change_state(self, key, state, pod_id):</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">if</span> state != State.RUNNING:</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a6c4a26d239637a8d2f899f507539b2d4">kube_scheduler</a>.delete_pod(pod_id)</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Deleted pod: %s&#39;</span>, str(key))</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                self.<a class="code" href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#a61befad000d8eb462a18c3bae2999403">running</a>.pop(key)</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">except</span> KeyError:</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.debug(<span class="stringliteral">&#39;Could not find key: %s&#39;</span>, str(key))</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                <span class="keywordflow">pass</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        self.<a class="code" href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#ab30fdd0990b4c7224fec2f51ac9385c5">event_buffer</a>[key] = state</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        (dag_id, task_id, ex_time) = key</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        item = self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>.query(TaskInstance).filter_by(</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            dag_id=dag_id,</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            task_id=task_id,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            execution_date=ex_time</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        ).one()</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> state:</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            item.state = state</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>.add(item)</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">_session</a>.commit()</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ae20ed08bb272d92241aa69a7a8b6a30c">  611</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ae20ed08bb272d92241aa69a7a8b6a30c">end</a>(self):</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        self.<a class="code" href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">log</a>.info(<span class="stringliteral">&#39;Shutting down Kubernetes executor&#39;</span>)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        self.<a class="code" href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">task_queue</a>.<a class="code" href="namespaceexample__qubole__operator.html#a3e837ac5199f7d098e4ab1d01761db99">join</a>()</div><div class="ttc" id="namespaceairflow_1_1executors_1_1base__executor_html"><div class="ttname"><a href="namespaceairflow_1_1executors_1_1base__executor.html">airflow.executors.base_executor</a></div><div class="ttdef"><b>Definition:</b> <a href="base__executor_8py_source.html#l00001">base_executor.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_a3dea8aed782ef7bab6c75a6522d10a45"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a3dea8aed782ef7bab6c75a6522d10a45">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.request_memory</a></div><div class="ttdeci">request_memory</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00045">kubernetes_executor.py:45</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a066216a42123bd8a72c3b560f9eecd06"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a066216a42123bd8a72c3b560f9eecd06">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.namespace</a></div><div class="ttdeci">namespace</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00194">kubernetes_executor.py:194</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a453f6b6cf2650631ce146b8558de8688"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a453f6b6cf2650631ce146b8558de8688">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_sync_container</a></div><div class="ttdeci">git_sync_container</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00172">kubernetes_executor.py:172</a></div></div>
<div class="ttc" id="classairflow_1_1exceptions_1_1_airflow_config_exception_html"><div class="ttname"><a href="classairflow_1_1exceptions_1_1_airflow_config_exception.html">airflow.exceptions.AirflowConfigException</a></div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8py_source.html#l00042">exceptions.py:42</a></div></div>
<div class="ttc" id="namespaceairflow_1_1configuration_html_aaf0a87fd1a9e6566e44bcffc645e16dc"><div class="ttname"><a href="namespaceairflow_1_1configuration.html#aaf0a87fd1a9e6566e44bcffc645e16dc">airflow.configuration.get</a></div><div class="ttdeci">get</div><div class="ttdef"><b>Definition:</b> <a href="configuration_8py_source.html#l00525">configuration.py:525</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a5ff06b9b42146b1e5ecdac254e0d0153"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5ff06b9b42146b1e5ecdac254e0d0153">airflow.contrib.executors.kubernetes_executor.KubeConfig.dags_volume_subpath</a></div><div class="ttdeci">dags_volume_subpath</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00140">kubernetes_executor.py:140</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a31c7e155fd5d738fe67480f29f988a77"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a31c7e155fd5d738fe67480f29f988a77">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.worker_uuid</a></div><div class="ttdeci">worker_uuid</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00458">kubernetes_executor.py:458</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_aeb0ac2b79a238de270fff518195bceb5"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aeb0ac2b79a238de270fff518195bceb5">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.launcher</a></div><div class="ttdeci">launcher</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00287">kubernetes_executor.py:287</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_afeece30614784df7ed297bc88568c9e1"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#afeece30614784df7ed297bc88568c9e1">airflow.contrib.executors.kubernetes_executor.KubeConfig.kube_image</a></div><div class="ttdeci">kube_image</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00106">kubernetes_executor.py:106</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a87387d25af4963436e5799bb5b5f0e8e"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a87387d25af4963436e5799bb5b5f0e8e">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00451">kubernetes_executor.py:451</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher</a></div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00191">kubernetes_executor.py:191</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a58ebe933694685a89a16e2c1694196ef"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a58ebe933694685a89a16e2c1694196ef">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_repo</a></div><div class="ttdeci">git_repo</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00120">kubernetes_executor.py:120</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_ac17e1a809f6ea5c59735475f26086e4e"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac17e1a809f6ea5c59735475f26086e4e">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.__repr__</a></div><div class="ttdeci">def __repr__(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00051">kubernetes_executor.py:51</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_a74e195b44d06d71a70511035f7d3b20d"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a74e195b44d06d71a70511035f7d3b20d">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.__init__</a></div><div class="ttdeci">def __init__(self, image=None, image_pull_policy=None, request_memory=None, request_cpu=None, limit_memory=None, limit_cpu=None, gcp_service_account_key=None)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00042">kubernetes_executor.py:42</a></div></div>
<div class="ttc" id="namespaceairflow_1_1configuration_html"><div class="ttname"><a href="namespaceairflow_1_1configuration.html">airflow.configuration</a></div><div class="ttdef"><b>Definition:</b> <a href="configuration_8py_source.html#l00001">configuration.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a2974e9ce1548f7aff2e096fa37971503"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a2974e9ce1548f7aff2e096fa37971503">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_sync_container_repository</a></div><div class="ttdeci">git_sync_container_repository</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00167">kubernetes_executor.py:167</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a907edb8200fa7162d343ed1672aca95d"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a907edb8200fa7162d343ed1672aca95d">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor._session</a></div><div class="ttdeci">_session</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00454">kubernetes_executor.py:454</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a51ec29f1df983277adbfe50ff2079364"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a51ec29f1df983277adbfe50ff2079364">airflow.contrib.executors.kubernetes_executor.KubeConfig.kubernetes_section</a></div><div class="ttdeci">string kubernetes_section</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00093">kubernetes_executor.py:93</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_ac4bf20b954883c53c93c0687718d31f6"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ac4bf20b954883c53c93c0687718d31f6">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.image_pull_policy</a></div><div class="ttdeci">image_pull_policy</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00044">kubernetes_executor.py:44</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_aa3a17a395e40be0005e7d2d0fa2b725c"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aa3a17a395e40be0005e7d2d0fa2b725c">airflow.contrib.executors.kubernetes_executor.KubeConfig.airflow_home</a></div><div class="ttdeci">airflow_home</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00099">kubernetes_executor.py:99</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_ab3f63ac104e35c68ba65b3f02639de28"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3f63ac104e35c68ba65b3f02639de28">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler._label_safe_datestring_to_datetime</a></div><div class="ttdeci">def _label_safe_datestring_to_datetime(string)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00415">kubernetes_executor.py:415</a></div></div>
<div class="ttc" id="classairflow_1_1executors_1_1base__executor_1_1_base_executor_html_ab30fdd0990b4c7224fec2f51ac9385c5"><div class="ttname"><a href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#ab30fdd0990b4c7224fec2f51ac9385c5">airflow.executors.base_executor.BaseExecutor.event_buffer</a></div><div class="ttdeci">event_buffer</div><div class="ttdef"><b>Definition:</b> <a href="base__executor_8py_source.html#l00044">base_executor.py:44</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a97be4647df5daa55051db4a3e6ebe840"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a97be4647df5daa55051db4a3e6ebe840">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.worker_uuid</a></div><div class="ttdeci">worker_uuid</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00195">kubernetes_executor.py:195</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a0b36fb8f63ce5de874776e926b0cf06e"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a0b36fb8f63ce5de874776e926b0cf06e">airflow.contrib.executors.kubernetes_executor.KubeConfig.core_section</a></div><div class="ttdeci">string core_section</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00092">kubernetes_executor.py:92</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a7a9f533f703b4e066af63aca79bd08d1"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a7a9f533f703b4e066af63aca79bd08d1">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.task_queue</a></div><div class="ttdeci">task_queue</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00282">kubernetes_executor.py:282</a></div></div>
<div class="ttc" id="namespaceairflow_1_1executors_html"><div class="ttname"><a href="namespaceairflow_1_1executors.html">airflow.executors</a></div><div class="ttdef"><b>Definition:</b> <a href="executors_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_abaa828f348bdf9c8a7887ef039056f1a"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#abaa828f348bdf9c8a7887ef039056f1a">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.start</a></div><div class="ttdeci">def start(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00539">kubernetes_executor.py:539</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00039">kubernetes_executor.py:39</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a170e0bbdccc563f8baa088e8ed1b8aff"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a170e0bbdccc563f8baa088e8ed1b8aff">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_subpath</a></div><div class="ttdeci">git_subpath</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00124">kubernetes_executor.py:124</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_a5bb53ed45d206324f547172db4fab6f6"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a5bb53ed45d206324f547172db4fab6f6">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.gcp_service_account_key</a></div><div class="ttdeci">gcp_service_account_key</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00049">kubernetes_executor.py:49</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_abee81da26c8afd6cbe5d09a185801be5"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#abee81da26c8afd6cbe5d09a185801be5">airflow.contrib.executors.kubernetes_executor.KubeConfig.airflow_configmap</a></div><div class="ttdeci">airflow_configmap</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00180">kubernetes_executor.py:180</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a282aaf8b15e0bfa72fcce8eb2b605529"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a282aaf8b15e0bfa72fcce8eb2b605529">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.process_status</a></div><div class="ttdeci">def process_status(self, pod_id, status, labels, resource_version)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00259">kubernetes_executor.py:259</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_ab3196c6a77b7dd8cde41b433146ba6c0"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab3196c6a77b7dd8cde41b433146ba6c0">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.namespace</a></div><div class="ttdeci">namespace</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00284">kubernetes_executor.py:284</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a19badfb4b9ebcf88b05f18eec61d7efd"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a19badfb4b9ebcf88b05f18eec61d7efd">airflow.contrib.executors.kubernetes_executor.KubeConfig.gcp_service_account_keys</a></div><div class="ttdeci">gcp_service_account_keys</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00162">kubernetes_executor.py:162</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a8084c60da25bb709fd35ce9b247d6b6b"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a8084c60da25bb709fd35ce9b247d6b6b">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler._session</a></div><div class="ttdeci">_session</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00290">kubernetes_executor.py:290</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_ac96658c848d4aa14d16368ef88d9ee4a"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ac96658c848d4aa14d16368ef88d9ee4a">airflow.contrib.executors.kubernetes_executor.KubeConfig.logs_volume_claim</a></div><div class="ttdeci">logs_volume_claim</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00136">kubernetes_executor.py:136</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler</a></div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00277">kubernetes_executor.py:277</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a42e6eb55e481cc8702754eb56b80dbbe"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a42e6eb55e481cc8702754eb56b80dbbe">airflow.contrib.executors.kubernetes_executor.KubeConfig.worker_container_tag</a></div><div class="ttdeci">worker_container_tag</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00104">kubernetes_executor.py:104</a></div></div>
<div class="ttc" id="namespaceairflow_1_1utils_1_1log_1_1logging__mixin_html"><div class="ttname"><a href="namespaceairflow_1_1utils_1_1log_1_1logging__mixin.html">airflow.utils.log.logging_mixin</a></div><div class="ttdef"><b>Definition:</b> <a href="logging__mixin_8py_source.html#l00001">logging_mixin.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a455f07c61226c970b20e6db8f9e53235"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a455f07c61226c970b20e6db8f9e53235">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.run_next</a></div><div class="ttdeci">def run_next(self, next_job)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00310">kubernetes_executor.py:310</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_ac18a8943bfee38753061b450ae3161f2"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ac18a8943bfee38753061b450ae3161f2">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.kube_config</a></div><div class="ttdeci">kube_config</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00452">kubernetes_executor.py:452</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_ae20ed08bb272d92241aa69a7a8b6a30c"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ae20ed08bb272d92241aa69a7a8b6a30c">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.end</a></div><div class="ttdeci">def end(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00611">kubernetes_executor.py:611</a></div></div>
<div class="ttc" id="namespaceexample__qubole__operator_html_a3e837ac5199f7d098e4ab1d01761db99"><div class="ttname"><a href="namespaceexample__qubole__operator.html#a3e837ac5199f7d098e4ab1d01761db99">example_qubole_operator.join</a></div><div class="ttdeci">join</div><div class="ttdef"><b>Definition:</b> <a href="example__qubole__operator_8py_source.html#l00107">example_qubole_operator.py:107</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a8d1bb877ce900fa0927e3b3fe4047037"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a8d1bb877ce900fa0927e3b3fe4047037">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler._make_kube_watcher</a></div><div class="ttdeci">def _make_kube_watcher(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00294">kubernetes_executor.py:294</a></div></div>
<div class="ttc" id="classairflow_1_1exceptions_1_1_airflow_exception_html"><div class="ttname"><a href="classairflow_1_1exceptions_1_1_airflow_exception.html">airflow.exceptions.AirflowException</a></div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8py_source.html#l00024">exceptions.py:24</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_af4b243abfaf2092033f1084d1114c932"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#af4b243abfaf2092033f1084d1114c932">airflow.contrib.executors.kubernetes_executor.KubeConfig.delete_worker_pods</a></div><div class="ttdeci">delete_worker_pods</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00111">kubernetes_executor.py:111</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a78f54c8f8a3391fc5015326d9d91f608"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a78f54c8f8a3391fc5015326d9d91f608">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.delete_pod</a></div><div class="ttdeci">def delete_pod(self, pod_id)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00334">kubernetes_executor.py:334</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a14b1c4286ca709414b967bc45567b0c6"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a14b1c4286ca709414b967bc45567b0c6">airflow.contrib.executors.kubernetes_executor.KubeConfig.kube_namespace</a></div><div class="ttdeci">kube_namespace</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00155">kubernetes_executor.py:155</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_ad0700f30580a29ce2f13565a4638ae20"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ad0700f30580a29ce2f13565a4638ae20">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_sync_init_container_name</a></div><div class="ttdeci">git_sync_init_container_name</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00175">kubernetes_executor.py:175</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_aaba955fbb7ac585167a7bc41e05675b0"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aaba955fbb7ac585167a7bc41e05675b0">airflow.contrib.executors.kubernetes_executor.KubeConfig.kube_image_pull_policy</a></div><div class="ttdeci">kube_image_pull_policy</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00108">kubernetes_executor.py:108</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_af81752e16918868280a12a3b26fde67f"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#af81752e16918868280a12a3b26fde67f">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler._health_check_kube_watcher</a></div><div class="ttdeci">def _health_check_kube_watcher(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00301">kubernetes_executor.py:301</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_a94fcd6abaa9be3747db567f831fc8b47"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a94fcd6abaa9be3747db567f831fc8b47">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.from_dict</a></div><div class="ttdeci">def from_dict(obj)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00059">kubernetes_executor.py:59</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a8e5c1cd7168c427cd4e4aabb0d1d1840"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8e5c1cd7168c427cd4e4aabb0d1d1840">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.resource_version</a></div><div class="ttdeci">resource_version</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00197">kubernetes_executor.py:197</a></div></div>
<div class="ttc" id="classairflow_1_1executors_1_1base__executor_1_1_base_executor_html_a61befad000d8eb462a18c3bae2999403"><div class="ttname"><a href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#a61befad000d8eb462a18c3bae2999403">airflow.executors.base_executor.BaseExecutor.running</a></div><div class="ttdeci">running</div><div class="ttdef"><b>Definition:</b> <a href="base__executor_8py_source.html#l00043">base_executor.py:43</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a5057bef531562466e10f9a4126281974"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5057bef531562466e10f9a4126281974">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_branch</a></div><div class="ttdeci">git_branch</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00122">kubernetes_executor.py:122</a></div></div>
<div class="ttc" id="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin_html"><div class="ttname"><a href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html">airflow.utils.log.logging_mixin.LoggingMixin</a></div><div class="ttdef"><b>Definition:</b> <a href="logging__mixin_8py_source.html#l00036">logging_mixin.py:36</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_affbf96de5b98fe6c19c2b349a6ed5e43"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#affbf96de5b98fe6c19c2b349a6ed5e43">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.process_watcher_task</a></div><div class="ttdeci">def process_watcher_task(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00357">kubernetes_executor.py:357</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_ab92e6c6906fb2ac6d1af5100fe42cd60"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab92e6c6906fb2ac6d1af5100fe42cd60">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler._labels_to_key</a></div><div class="ttdeci">def _labels_to_key(self, labels)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00437">kubernetes_executor.py:437</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_aa09a23bc92c975b46f3292bce9e2cdef"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#aa09a23bc92c975b46f3292bce9e2cdef">airflow.contrib.executors.kubernetes_executor.KubeConfig.worker_service_account_name</a></div><div class="ttdeci">worker_service_account_name</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00114">kubernetes_executor.py:114</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a2e45812324719c3e9cb966e2d2a40e65"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a2e45812324719c3e9cb966e2d2a40e65">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_user</a></div><div class="ttdeci">git_user</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00128">kubernetes_executor.py:128</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a6d7347a96a59148ea05ec1a0e52023ff"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6d7347a96a59148ea05ec1a0e52023ff">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.worker_configuration</a></div><div class="ttdeci">worker_configuration</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00288">kubernetes_executor.py:288</a></div></div>
<div class="ttc" id="namespaceairflow_1_1models_html"><div class="ttname"><a href="namespaceairflow_1_1models.html">airflow.models</a></div><div class="ttdef"><b>Definition:</b> <a href="models_8py_source.html#l00001">models.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_af40412a32f4496cc49b9e2500fb0d3e9"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#af40412a32f4496cc49b9e2500fb0d3e9">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor._change_state</a></div><div class="ttdeci">def _change_state(self, key, state, pod_id)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00590">kubernetes_executor.py:590</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a9e525a1be4f1967d9eb11235cb888ef4"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a9e525a1be4f1967d9eb11235cb888ef4">airflow.contrib.executors.kubernetes_executor.KubeConfig.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00095">kubernetes_executor.py:95</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a6526293b2f93085160c6f81fcc0b56da"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a6526293b2f93085160c6f81fcc0b56da">airflow.contrib.executors.kubernetes_executor.KubeConfig.kube_secrets</a></div><div class="ttdeci">kube_secrets</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00098">kubernetes_executor.py:98</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_aada0eef7ad9a932c38f13e5e7503b476"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#aada0eef7ad9a932c38f13e5e7503b476">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.process_error</a></div><div class="ttdeci">def process_error(self, event)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00241">kubernetes_executor.py:241</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a2d8e9431c328a5e148fabaccaa9303fa"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a2d8e9431c328a5e148fabaccaa9303fa">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.run</a></div><div class="ttdeci">def run(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00199">kubernetes_executor.py:199</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a950352d335616e1f04ecae3128df585d"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a950352d335616e1f04ecae3128df585d">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.clear_not_launched_queued_tasks</a></div><div class="ttdeci">def clear_not_launched_queued_tasks(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00461">kubernetes_executor.py:461</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_ae31c8273474160a5a1d0e61751a66138"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ae31c8273474160a5a1d0e61751a66138">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_sync_container_tag</a></div><div class="ttdeci">git_sync_container_tag</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00170">kubernetes_executor.py:170</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a33226d94eba8e1609d28ce33bef512e4"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a33226d94eba8e1609d28ce33bef512e4">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler._datetime_to_label_safe_datestring</a></div><div class="ttdeci">def _datetime_to_label_safe_datestring(datetime_obj)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00427">kubernetes_executor.py:427</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a6c4a26d239637a8d2f899f507539b2d4"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a6c4a26d239637a8d2f899f507539b2d4">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.kube_scheduler</a></div><div class="ttdeci">kube_scheduler</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00456">kubernetes_executor.py:456</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a1e1d2cecf33ffc7c4610e0b88761d3bd"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a1e1d2cecf33ffc7c4610e0b88761d3bd">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler._create_pod_id</a></div><div class="ttdeci">def _create_pod_id(dag_id, task_id)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00404">kubernetes_executor.py:404</a></div></div>
<div class="ttc" id="namespaceairflow_1_1contrib_1_1kubernetes_1_1kube__client_html_a89e6e321931680952fd89f44703f8447"><div class="ttname"><a href="namespaceairflow_1_1contrib_1_1kubernetes_1_1kube__client.html#a89e6e321931680952fd89f44703f8447">airflow.contrib.kubernetes.kube_client.get_kube_client</a></div><div class="ttdeci">def get_kube_client(in_cluster=conf.getboolean('kubernetes', 'in_cluster'), cluster_context=None, config_file=None)</div><div class="ttdef"><b>Definition:</b> <a href="kube__client_8py_source.html#l00038">kube_client.py:38</a></div></div>
<div class="ttc" id="classairflow_1_1executors_1_1base__executor_1_1_base_executor_html"><div class="ttname"><a href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html">airflow.executors.base_executor.BaseExecutor</a></div><div class="ttdef"><b>Definition:</b> <a href="base__executor_8py_source.html#l00030">base_executor.py:30</a></div></div>
<div class="ttc" id="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin_html_a4748867be8237041588c62ed4b75bffa"><div class="ttname"><a href="classairflow_1_1utils_1_1log_1_1logging__mixin_1_1_logging_mixin.html#a4748867be8237041588c62ed4b75bffa">airflow.utils.log.logging_mixin.LoggingMixin.log</a></div><div class="ttdeci">def log(self)</div><div class="ttdef"><b>Definition:</b> <a href="logging__mixin_8py_source.html#l00057">logging_mixin.py:57</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a9b18a357b08a5501d4cbbdd5c30303e5"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a9b18a357b08a5501d4cbbdd5c30303e5">airflow.contrib.executors.kubernetes_executor.KubeConfig.parallelism</a></div><div class="ttdeci">parallelism</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00101">kubernetes_executor.py:101</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a53514c4e425b0a916d7187d4386edadc"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a53514c4e425b0a916d7187d4386edadc">airflow.contrib.executors.kubernetes_executor.KubeConfig._validate</a></div><div class="ttdeci">def _validate(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00184">kubernetes_executor.py:184</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_ab1e21c6b38fa10b39b3aff88b4559754"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#ab1e21c6b38fa10b39b3aff88b4559754">airflow.contrib.executors.kubernetes_executor.KubeConfig.base_log_folder</a></div><div class="ttdeci">base_log_folder</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00149">kubernetes_executor.py:149</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_ab6e5d6baeda4aba56ec04858485c0067"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab6e5d6baeda4aba56ec04858485c0067">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.result_queue</a></div><div class="ttdeci">result_queue</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00455">kubernetes_executor.py:455</a></div></div>
<div class="ttc" id="namespaceairflow_1_1exceptions_html"><div class="ttname"><a href="namespaceairflow_1_1exceptions.html">airflow.exceptions</a></div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8py_source.html#l00001">exceptions.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a53c47112fd213eb0825c1173a36c699b"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a53c47112fd213eb0825c1173a36c699b">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.kube_client</a></div><div class="ttdeci">kube_client</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00286">kubernetes_executor.py:286</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a1a57e6f3cd2b1b6b543449324f4295d5"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a1a57e6f3cd2b1b6b543449324f4295d5">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.__init__</a></div><div class="ttdeci">def __init__(self, namespace, watcher_queue, resource_version, worker_uuid)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00192">kubernetes_executor.py:192</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a5f311d06f7ccf87bf2540e9dbc674551"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5f311d06f7ccf87bf2540e9dbc674551">airflow.contrib.executors.kubernetes_executor.KubeConfig.worker_container_repository</a></div><div class="ttdeci">worker_container_repository</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00102">kubernetes_executor.py:102</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a158c8dc1478d76eaa154fd21454b57d6"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a158c8dc1478d76eaa154fd21454b57d6">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.sync</a></div><div class="ttdeci">def sync(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00344">kubernetes_executor.py:344</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_ae6944b5021eccf94df7b46313f3d9e85"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ae6944b5021eccf94df7b46313f3d9e85">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.limit_memory</a></div><div class="ttdeci">limit_memory</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00047">kubernetes_executor.py:47</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a35d0516bc7926461e36e68c4721120c9"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a35d0516bc7926461e36e68c4721120c9">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher.watcher_queue</a></div><div class="ttdeci">watcher_queue</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00196">kubernetes_executor.py:196</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1kubernetes_1_1worker__configuration_1_1_worker_configuration_html"><div class="ttname"><a href="classairflow_1_1contrib_1_1kubernetes_1_1worker__configuration_1_1_worker_configuration.html">airflow.contrib.kubernetes.worker_configuration.WorkerConfiguration</a></div><div class="ttdef"><b>Definition:</b> <a href="worker__configuration_8py_source.html#l00027">worker_configuration.py:27</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_af8cda7eeff04c1d0d92172f8790cf69b"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#af8cda7eeff04c1d0d92172f8790cf69b">airflow.contrib.executors.kubernetes_executor.KubeConfig.executor_namespace</a></div><div class="ttdeci">executor_namespace</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00160">kubernetes_executor.py:160</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1kubernetes_1_1pod__launcher_1_1_pod_launcher_html"><div class="ttname"><a href="classairflow_1_1contrib_1_1kubernetes_1_1pod__launcher_1_1_pod_launcher.html">airflow.contrib.kubernetes.pod_launcher.PodLauncher</a></div><div class="ttdef"><b>Definition:</b> <a href="pod__launcher_8py_source.html#l00040">pod_launcher.py:40</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a635df58ab3e275fea79187f8628c7186"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a635df58ab3e275fea79187f8628c7186">airflow.contrib.executors.kubernetes_executor.KubeConfig.core_configuration</a></div><div class="ttdeci">core_configuration</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00097">kubernetes_executor.py:97</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a04a25c58e26c5b31ec034c5f0ba3d398"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a04a25c58e26c5b31ec034c5f0ba3d398">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor._inject_secrets</a></div><div class="ttdeci">def _inject_secrets(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00505">kubernetes_executor.py:505</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html">airflow.contrib.executors.kubernetes_executor.KubeConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00091">kubernetes_executor.py:91</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor</a></div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00450">kubernetes_executor.py:450</a></div></div>
<div class="ttc" id="namespaceairflow_1_1contrib_1_1kubernetes_1_1worker__configuration_html"><div class="ttname"><a href="namespaceairflow_1_1contrib_1_1kubernetes_1_1worker__configuration.html">airflow.contrib.kubernetes.worker_configuration</a></div><div class="ttdef"><b>Definition:</b> <a href="worker__configuration_8py_source.html#l00001">worker_configuration.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_ab8b4905f61e6abd59eed443596a0d104"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#ab8b4905f61e6abd59eed443596a0d104">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.kube_client</a></div><div class="ttdeci">kube_client</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00457">kubernetes_executor.py:457</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a5f6df491f2f5922064399e32f7e1baf2"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a5f6df491f2f5922064399e32f7e1baf2">airflow.contrib.executors.kubernetes_executor.KubeConfig.logs_volume_subpath</a></div><div class="ttdeci">logs_volume_subpath</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00145">kubernetes_executor.py:145</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_a2ff727a32e1a87846e900a5b0887def2"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#a2ff727a32e1a87846e900a5b0887def2">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.as_dict</a></div><div class="ttdeci">def as_dict(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00079">kubernetes_executor.py:79</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher_html_a8cb4941cc6f8b60b980c307f0e56a375"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_job_watcher.html#a8cb4941cc6f8b60b980c307f0e56a375">airflow.contrib.executors.kubernetes_executor.KubernetesJobWatcher._run</a></div><div class="ttdeci">def _run(self, kube_client, resource_version, worker_uuid)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00212">kubernetes_executor.py:212</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_aa15fed7552dc3114b028976d990eebeb"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#aa15fed7552dc3114b028976d990eebeb">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.request_cpu</a></div><div class="ttdeci">request_cpu</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00046">kubernetes_executor.py:46</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a710cc9cac1fa78f577e0a433ca9e71d2"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a710cc9cac1fa78f577e0a433ca9e71d2">airflow.contrib.executors.kubernetes_executor.KubeConfig.image_pull_secrets</a></div><div class="ttdeci">image_pull_secrets</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00116">kubernetes_executor.py:116</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a53bd517214319080c783d10e75a3b1d3"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a53bd517214319080c783d10e75a3b1d3">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.execute_async</a></div><div class="ttdeci">def execute_async(self, key, command, queue=None, executor_config=None)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00560">kubernetes_executor.py:560</a></div></div>
<div class="ttc" id="namespaceairflow_1_1contrib_1_1kubernetes_1_1kube__client_html"><div class="ttname"><a href="namespaceairflow_1_1contrib_1_1kubernetes_1_1kube__client.html">airflow.contrib.kubernetes.kube_client</a></div><div class="ttdef"><b>Definition:</b> <a href="kube__client_8py_source.html#l00001">kube_client.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_ab7a8a7bfc5fda77ecd322da5abb7c9dc"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#ab7a8a7bfc5fda77ecd322da5abb7c9dc">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.watcher_queue</a></div><div class="ttdeci">watcher_queue</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00289">kubernetes_executor.py:289</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_ad66f1b82fd101e51c3a09fa08c8e9313"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#ad66f1b82fd101e51c3a09fa08c8e9313">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.image</a></div><div class="ttdeci">image</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00043">kubernetes_executor.py:43</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_af87655d43f8c2325a646ceb0c7d1449e"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#af87655d43f8c2325a646ceb0c7d1449e">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.worker_uuid</a></div><div class="ttdeci">worker_uuid</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00291">kubernetes_executor.py:291</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a85b403a9fe0931156ed5c90bd7bf4b3b"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a85b403a9fe0931156ed5c90bd7bf4b3b">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.task_queue</a></div><div class="ttdeci">task_queue</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00453">kubernetes_executor.py:453</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_aad370a3e31a5fc0bf3695ccc13abf43d"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aad370a3e31a5fc0bf3695ccc13abf43d">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.__init__</a></div><div class="ttdeci">def __init__(self, kube_config, task_queue, result_queue, session, kube_client, worker_uuid)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00279">kubernetes_executor.py:279</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a05087e293ee45357fa1a88dedd520128"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a05087e293ee45357fa1a88dedd520128">airflow.contrib.executors.kubernetes_executor.KubeConfig.dags_folder</a></div><div class="ttdeci">dags_folder</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00100">kubernetes_executor.py:100</a></div></div>
<div class="ttc" id="namespaceairflow_1_1utils_1_1state_html"><div class="ttname"><a href="namespaceairflow_1_1utils_1_1state.html">airflow.utils.state</a></div><div class="ttdef"><b>Definition:</b> <a href="state_8py_source.html#l00001">state.py:1</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config_html_abc43ef22a916daa67c84e8f902f9bd66"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_config.html#abc43ef22a916daa67c84e8f902f9bd66">airflow.contrib.executors.kubernetes_executor.KubernetesExecutorConfig.limit_cpu</a></div><div class="ttdeci">limit_cpu</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00048">kubernetes_executor.py:48</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor_html_a68dfa9ced133d44d474666f80ef9900b"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kubernetes_executor.html#a68dfa9ced133d44d474666f80ef9900b">airflow.contrib.executors.kubernetes_executor.KubernetesExecutor.sync</a></div><div class="ttdeci">def sync(self)</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00568">kubernetes_executor.py:568</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_adb64803bb21e4065b2785d62ca4fa761"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#adb64803bb21e4065b2785d62ca4fa761">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.result_queue</a></div><div class="ttdeci">result_queue</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00283">kubernetes_executor.py:283</a></div></div>
<div class="ttc" id="classairflow_1_1executors_1_1base__executor_1_1_base_executor_html_a279c270085fb5ce5a6a8dc2fe9dd64a3"><div class="ttname"><a href="classairflow_1_1executors_1_1base__executor_1_1_base_executor.html#a279c270085fb5ce5a6a8dc2fe9dd64a3">airflow.executors.base_executor.BaseExecutor.queued_tasks</a></div><div class="ttdeci">queued_tasks</div><div class="ttdef"><b>Definition:</b> <a href="base__executor_8py_source.html#l00042">base_executor.py:42</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_adba169e4eed2bb6bf8a5a34c9faf46a1"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#adba169e4eed2bb6bf8a5a34c9faf46a1">airflow.contrib.executors.kubernetes_executor.KubeConfig.dags_volume_claim</a></div><div class="ttdeci">dags_volume_claim</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00133">kubernetes_executor.py:133</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_aead75ac3c099928e17ff275e2468633f"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#aead75ac3c099928e17ff275e2468633f">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.kube_watcher</a></div><div class="ttdeci">kube_watcher</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00292">kubernetes_executor.py:292</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler_html_a6fe879b65f728367a25d33f6c888b851"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_airflow_kubernetes_scheduler.html#a6fe879b65f728367a25d33f6c888b851">airflow.contrib.executors.kubernetes_executor.AirflowKubernetesScheduler.kube_config</a></div><div class="ttdeci">kube_config</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00281">kubernetes_executor.py:281</a></div></div>
<div class="ttc" id="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config_html_a62c37e58712818f7560b872731fc6c5a"><div class="ttname"><a href="classairflow_1_1contrib_1_1executors_1_1kubernetes__executor_1_1_kube_config.html#a62c37e58712818f7560b872731fc6c5a">airflow.contrib.executors.kubernetes_executor.KubeConfig.git_password</a></div><div class="ttdeci">git_password</div><div class="ttdef"><b>Definition:</b> <a href="kubernetes__executor_8py_source.html#l00129">kubernetes_executor.py:129</a></div></div>
<div class="ttc" id="namespaceairflow_1_1contrib_1_1kubernetes_1_1pod__launcher_html"><div class="ttname"><a href="namespaceairflow_1_1contrib_1_1kubernetes_1_1pod__launcher.html">airflow.contrib.kubernetes.pod_launcher</a></div><div class="ttdef"><b>Definition:</b> <a href="pod__launcher_8py_source.html#l00001">pod_launcher.py:1</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
