<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>openjdk8_analysis: Package java.lang.invoke</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openjdk8_analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Packages</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejava.html">java</a></li><li class="navelem"><a class="el" href="namespacejava_1_1lang.html">lang</a></li><li class="navelem"><a class="el" href="namespacejava_1_1lang_1_1invoke.html">invoke</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Package java.lang.invoke</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>AbstractValidatingLambdaMetafactory</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>BoundMethodHandle</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_constant_call_site.html">ConstantCallSite</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>DelegatingMethodHandle</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>DirectMethodHandle</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacejava_1_1lang_1_1invoke_1_1_dont_inline.html">DontInline</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacejava_1_1lang_1_1invoke_1_1_force_inline.html">ForceInline</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>InfoFromMemberName</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacejava_1_1lang_1_1invoke_1_1_injected_profile.html">InjectedProfile</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>InnerClassLambdaMetafactory</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>InvokeDynamic</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>InvokerBytecodeGenerator</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>Invokers</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_conversion_exception.html">LambdaConversionException</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>LambdaForm</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>LambdaFormBuffer</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>LambdaFormEditor</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">LambdaMetafactory</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MemberName</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MethodHandleImpl</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacejava_1_1lang_1_1invoke_1_1_method_handle_info.html">MethodHandleInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MethodHandleNatives</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle_proxies.html">MethodHandleProxies</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handles.html">MethodHandles</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MethodHandleStatics</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MethodTypeForm</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html">MutableCallSite</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>ProxyClassesDumper</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_serialized_lambda.html">SerializedLambda</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>SimpleMethodHandle</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacejava_1_1lang_1_1invoke_1_1_stable.html">Stable</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html">SwitchPoint</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>TypeConvertingMethodAdapter</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_volatile_call_site.html">VolatileCallSite</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_wrong_method_type_exception.html">WrongMethodTypeException</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The</p><div class="fragment"><div class="line"><a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1lang.html">lang</a>.<a class="code" href="namespacejava_1_1lang_1_1invoke.html">invoke</a> </div></div><!-- fragment --><p> package contains dynamic language support provided directly by the Java core class libraries and virtual machine.</p>
<p>As described in the Java Virtual Machine Specification, certain types in this package have special relations to dynamic language support in the virtual machine: </p><ul>
<li>
<p class="startli">The class <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a> contains <a href="MethodHandle.html#sigpoly">signature polymorphic methods</a> which can be linked regardless of their type descriptor. Normally, method linkage requires exact matching of type descriptors. </p>
<p class="endli"></p>
</li>
<li>
The JVM bytecode format supports immediate constants of the classes <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a> and <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a>.  </li>
</ul>
<h1><a class="anchor" id="jvm_mods"></a>Summary of relevant Java Virtual Machine changes</h1>
<p>The following low-level information summarizes relevant parts of the Java Virtual Machine specification. For full details, please see the current version of that specification.</p>
<p>Each occurrence of an</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> instruction is called a <em>dynamic call site</em>. </p><h2><a class="anchor" id="indyinsn"></a> invokedynamic  instructions</h2>
<p>A dynamic call site is originally in an unlinked state. In this state, there is no target method for the call site to invoke. </p>
<p>Before the JVM can execute a dynamic call site (an</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> instruction), the call site must first be <em>linked</em>. Linking is accomplished by calling a <em>bootstrap method</em> which is given the static information content of the call site, and which must produce a <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">method handle</a> that gives the behavior of the call site. </p>
<p>Each</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> instruction statically specifies its own bootstrap method as a constant pool reference. The constant pool reference also specifies the call site's name and type descriptor, just like</p><div class="fragment"><div class="line">invokevirtual </div></div><!-- fragment --><p> and the other invoke instructions. </p>
<p>Linking starts with resolving the constant pool entry for the bootstrap method, and resolving a <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> object for the type descriptor of the dynamic call site. This resolution process may trigger class loading. It may therefore throw an error if a class fails to load. This error becomes the abnormal termination of the dynamic call site execution. Linkage does not trigger class initialization. </p>
<p>The bootstrap method is invoked on at least three values: </p><ul>
<li>
a<div class="fragment"><div class="line">MethodHandles.Lookup </div></div><!-- fragment --> , a lookup object on the <em>caller class</em> in which dynamic call site occurs  </li>
<li>
a<div class="fragment"><div class="line">String </div></div><!-- fragment --> , the method name mentioned in the call site  </li>
<li>
a<div class="fragment"><div class="line">MethodType </div></div><!-- fragment --> , the resolved type descriptor of the call  </li>
<li>
optionally, between 1 and 251 additional static arguments taken from the constant pool  </li>
</ul>
<p>Invocation is as if by <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html#acd7919705abc3fa4810709f3c00d1d47">MethodHandle.invoke</a>. The returned result must be a <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> (or a subclass). The type of the call site's target must be exactly equal to the type derived from the dynamic call site's type descriptor and passed to the bootstrap method. The call site then becomes permanently linked to the dynamic call site. </p>
<p>As documented in the JVM specification, all failures arising from the linkage of a dynamic call site are reported by a <a class="el" href="classjava_1_1lang_1_1_bootstrap_method_error.html">BootstrapMethodError</a>, which is thrown as the abnormal termination of the dynamic call site execution. If this happens, the same error will the thrown for all subsequent attempts to execute the dynamic call site.</p>
<h2>timing of linkage</h2>
<p>A dynamic call site is linked just before its first execution. The bootstrap method call implementing the linkage occurs within a thread that is attempting a first execution. </p>
<p>If there are several such threads, the bootstrap method may be invoked in several threads concurrently. Therefore, bootstrap methods which access global application data must take the usual precautions against race conditions. In any case, every</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> instruction is either unlinked or linked to a unique</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> object. </p>
<p>In an application which requires dynamic call sites with individually mutable behaviors, their bootstrap methods should produce distinct <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> objects, one for each linkage request. Alternatively, an application can link a single</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> object to several</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> instructions, in which case a change to the target method will become visible at each of the instructions. </p>
<p>If several threads simultaneously execute a bootstrap method for a single dynamic call site, the JVM must choose one</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> object and install it visibly to all threads. Any other bootstrap method calls are allowed to complete, but their results are ignored, and their dynamic call site invocations proceed with the originally chosen target object.</p>
<p><em>Discussion:</em> These rules do not enable the JVM to duplicate dynamic call sites, or to issue &ldquo;causeless&rdquo; bootstrap method calls. Every dynamic call site transitions at most once from unlinked to linked, just before its first invocation. There is no way to undo the effect of a completed bootstrap method call.</p>
<h2>types of bootstrap methods</h2>
<p>As long as each bootstrap method can be correctly invoked by</p><div class="fragment"><div class="line">MethodHandle.invoke </div></div><!-- fragment --><p> , its detailed type is arbitrary. For example, the first argument could be</p><div class="fragment"><div class="line">Object </div></div><!-- fragment --><p> instead of</p><div class="fragment"><div class="line">MethodHandles.Lookup </div></div><!-- fragment --><p> , and the return type could also be</p><div class="fragment"><div class="line">Object </div></div><!-- fragment --><p> instead of</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> . (Note that the types and number of the stacked arguments limit the legal kinds of bootstrap methods to appropriately typed static methods and constructors of</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> subclasses.) </p>
<p>If a given</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> instruction specifies no static arguments, the instruction's bootstrap method will be invoked on three arguments, conveying the instruction's caller class, name, and method type. If the</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> instruction specifies one or more static arguments, those values will be passed as additional arguments to the method handle. (Note that because there is a limit of 255 arguments to any method, at most 251 extra arguments can be supplied, since the bootstrap method handle itself and its first three arguments must also be stacked.) The bootstrap method will be invoked as if by either</p><div class="fragment"><div class="line">MethodHandle.invoke </div></div><!-- fragment --><p> or</p><div class="fragment"><div class="line">invokeWithArguments </div></div><!-- fragment --><p> . (There is no way to tell the difference.) </p>
<p>The normal argument conversion rules for</p><div class="fragment"><div class="line">MethodHandle.invoke </div></div><!-- fragment --><p> apply to all stacked arguments. For example, if a pushed value is a primitive type, it may be converted to a reference by boxing conversion. If the bootstrap method is a variable arity method (its modifier bit</p><div class="fragment"><div class="line">0x0080 </div></div><!-- fragment --><p> is set), then some or all of the arguments specified here may be collected into a trailing array parameter. (This is not a special rule, but rather a useful consequence of the interaction between</p><div class="fragment"><div class="line">CONSTANT_MethodHandle </div></div><!-- fragment --><p> constants, the modifier bit for variable arity methods, and the <a class="el" href="">asVarargsCollector</a> transformation.) </p>
<p>Given these rules, here are examples of legal bootstrap method declarations, given various numbers</p><div class="fragment"><div class="line">N </div></div><!-- fragment --><p> of extra arguments. The first rows (marked</p><div class="fragment"><div class="line">* </div></div><!-- fragment --><p> ) will work for any number of extra arguments. </p><table  border="1" cellpadding="5" summary="Static argument types">
<tr>
<th>N</th><th>sample bootstrap method </th></tr>
<tr>
<td>*</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(Lookup caller, <a class="el" href="classjava_1_1lang_1_1_string.html">String</a> name, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> type, <a class="el" href="classjava_1_1lang_1_1_object.html">Object</a>... args)</code> </td></tr>
<tr>
<td>*</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(<a class="el" href="classjava_1_1lang_1_1_object.html">Object</a>... args)</code> </td></tr>
<tr>
<td>*</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(<a class="el" href="classjava_1_1lang_1_1_object.html">Object</a> caller, <a class="el" href="classjava_1_1lang_1_1_object.html">Object</a>... nameAndTypeWithArgs)</code> </td></tr>
<tr>
<td>0</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(Lookup caller, String name, MethodType type)</code> </td></tr>
<tr>
<td>0</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(Lookup caller, <a class="el" href="classjava_1_1lang_1_1_object.html">Object</a>... nameAndType)</code> </td></tr>
<tr>
<td>1</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(Lookup caller, String name, MethodType type, Object arg)</code> </td></tr>
<tr>
<td>2</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(Lookup caller, <a class="el" href="classjava_1_1lang_1_1_string.html">String</a> name, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> type, <a class="el" href="classjava_1_1lang_1_1_object.html">Object</a>... args)</code> </td></tr>
<tr>
<td>2</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(Lookup caller, <a class="el" href="classjava_1_1lang_1_1_string.html">String</a> name, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> type, <a class="el" href="classjava_1_1lang_1_1_string.html">String</a>... args)</code> </td></tr>
<tr>
<td>2</td><td><code><a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> bootstrap(Lookup caller, String name, MethodType type, String x, int y)</code> </td></tr>
</table>
<p>The last example assumes that the extra arguments are of type </p><div class="fragment"><div class="line">CONSTANT_String </div></div><!-- fragment --><p> and</p><div class="fragment"><div class="line">CONSTANT_Integer </div></div><!-- fragment --><p> , respectively. The second-to-last example assumes that all extra arguments are of type </p><div class="fragment"><div class="line">CONSTANT_String </div></div><!-- fragment --><p> . The other examples work with all types of extra arguments. </p>
<p>As noted above, the actual method type of the bootstrap method can vary. For example, the fourth argument could be</p><div class="fragment"><div class="line">MethodHandle </div></div><!-- fragment --><p> , if that is the type of the corresponding constant in the</p><div class="fragment"><div class="line">CONSTANT_InvokeDynamic </div></div><!-- fragment --><p> entry. In that case, the</p><div class="fragment"><div class="line">MethodHandle.invoke </div></div><!-- fragment --><p> call will pass the extra method handle constant as an</p><div class="fragment"><div class="line">Object </div></div><!-- fragment --><p> , but the type matching machinery of</p><div class="fragment"><div class="line">MethodHandle.invoke </div></div><!-- fragment --><p> will cast the reference back to</p><div class="fragment"><div class="line">MethodHandle </div></div><!-- fragment --><p> before invoking the bootstrap method. (If a string constant were passed instead, by badly generated code, that cast would then fail, resulting in a</p><div class="fragment"><div class="line">BootstrapMethodError </div></div><!-- fragment --><p> .) </p>
<p>Note that, as a consequence of the above rules, the bootstrap method may accept a primitive argument, if it can be represented by a constant pool entry. However, arguments of type</p><div class="fragment"><div class="line"><span class="keywordtype">boolean</span> </div></div><!-- fragment --><p> ,</p><div class="fragment"><div class="line">byte </div></div><!-- fragment --><p> ,</p><div class="fragment"><div class="line"><span class="keywordtype">short</span> </div></div><!-- fragment --><p> , or</p><div class="fragment"><div class="line"><span class="keywordtype">char</span> </div></div><!-- fragment --><p> cannot be created for bootstrap methods, since such constants cannot be directly represented in the constant pool, and the invocation of the bootstrap method will not perform the necessary narrowing primitive conversions. </p>
<p>Extra bootstrap method arguments are intended to allow language implementors to safely and compactly encode metadata. In principle, the name and extra arguments are redundant, since each call site could be given its own unique bootstrap method. Such a practice is likely to produce large class files and constant pools.</p>
<dl class="section author"><dt>Author</dt><dd>John Rose, JSR 292 EG </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.7 </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
