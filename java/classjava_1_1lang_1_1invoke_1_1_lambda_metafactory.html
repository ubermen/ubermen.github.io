<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>openjdk8_analysis: java.lang.invoke.LambdaMetafactory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openjdk8_analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejava.html">java</a></li><li class="navelem"><a class="el" href="namespacejava_1_1lang.html">lang</a></li><li class="navelem"><a class="el" href="namespacejava_1_1lang_1_1invoke.html">invoke</a></li><li class="navelem"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">LambdaMetafactory</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">java.lang.invoke.LambdaMetafactory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa5f80289c7c01761cd75c17da73b1524"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#aa5f80289c7c01761cd75c17da73b1524">metafactory</a> (MethodHandles.Lookup caller, <a class="el" href="classjava_1_1lang_1_1_string.html">String</a> invokedName, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> invokedType, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> samMethodType, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a> implMethod, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> instantiatedMethodType)  throws LambdaConversionException </td></tr>
<tr class="separator:aa5f80289c7c01761cd75c17da73b1524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a1e28d2c96b9fb23964dc77cd169ed2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a4a1e28d2c96b9fb23964dc77cd169ed2">altMetafactory</a> (MethodHandles.Lookup caller, <a class="el" href="classjava_1_1lang_1_1_string.html">String</a> invokedName, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> invokedType, Object...args)  throws LambdaConversionException </td></tr>
<tr class="separator:a4a1e28d2c96b9fb23964dc77cd169ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ab4ab00e1d5fef35b9517759184ac283d"><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#ab4ab00e1d5fef35b9517759184ac283d">FLAG_SERIALIZABLE</a> = 1 &lt;&lt; 0</td></tr>
<tr class="separator:ab4ab00e1d5fef35b9517759184ac283d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b10af41c22022f5740fd1c24dc937a"><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a80b10af41c22022f5740fd1c24dc937a">FLAG_MARKERS</a> = 1 &lt;&lt; 1</td></tr>
<tr class="separator:a80b10af41c22022f5740fd1c24dc937a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1692ccbb703f03670cc8bb7418b903f8"><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a1692ccbb703f03670cc8bb7418b903f8">FLAG_BRIDGES</a> = 1 &lt;&lt; 2</td></tr>
<tr class="separator:a1692ccbb703f03670cc8bb7418b903f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Methods to facilitate the creation of simple "function objects" that implement one or more interfaces by delegation to a provided <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a>, possibly after type adaptation and partial evaluation of arguments. These methods are typically used as <em>bootstrap methods</em> for</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> call sites, to support the <em>lambda expression</em> and <em>method reference expression</em> features of the Java Programming Language.</p>
<p>Indirect access to the behavior specified by the provided</p><div class="fragment"><div class="line">MethodHandle </div></div><!-- fragment --><p> proceeds in order through three phases: </p><ul>
<li>
<p class="startli"><em>Linkage</em> occurs when the methods in this class are invoked. They take as arguments an interface to be implemented (typically a <em>functional interface</em>, one with a single abstract method), a name and signature of a method from that interface to be implemented, a method handle describing the desired implementation behavior for that method, and possibly other additional metadata, and produce a <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> whose target can be used to create suitable function objects. Linkage may involve dynamically loading a new class that implements the target interface. The</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> can be considered a "factory" for function objects and so these linkage methods are referred to as "metafactories".</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><em>Capture</em> occurs when the</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> 's target is invoked, typically through an</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> call site, producing a function object. This may occur many times for a single factory</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> . Capture may involve allocation of a new function object, or may return an existing function object. The behavior</p><div class="fragment"><div class="line">MethodHandle </div></div><!-- fragment --><p> may have additional parameters beyond those of the specified interface method; these are referred to as <em>captured parameters</em>, which must be provided as arguments to the </p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> target, and which may be early-bound to the behavior </p><div class="fragment"><div class="line">MethodHandle </div></div><!-- fragment --><p> . The number of captured parameters and their types are determined during linkage.</p>
<p class="endli"></p>
</li>
<li>
<em>Invocation</em> occurs when an implemented interface method is invoked on a function object. This may occur many times for a single function object. The method referenced by the behavior<div class="fragment"><div class="line">MethodHandle </div></div><!-- fragment --> is invoked with the captured arguments and any additional arguments provided on invocation, as if by <a class="el" href="">MethodHandle#invoke(Object...)</a>. </li>
</ul>
<p>It is sometimes useful to restrict the set of inputs or results permitted at invocation. For example, when the generic interface</p><div class="fragment"><div class="line">Predicate&lt;T&gt; </div></div><!-- fragment --><p> is parameterized as</p><div class="fragment"><div class="line">Predicate&lt;String&gt; </div></div><!-- fragment --><p> , the input must be a </p><div class="fragment"><div class="line">String </div></div><!-- fragment --><p> , even though the method to implement allows any</p><div class="fragment"><div class="line">Object </div></div><!-- fragment --><p> . At linkage time, an additional <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a> parameter describes the "instantiated" method type; on invocation, the arguments and eventual result are checked against this</p><div class="fragment"><div class="line">MethodType </div></div><!-- fragment --><p> .</p>
<p>This class provides two forms of linkage methods: a standard version (<a class="el" href="">metafactory(MethodHandles.Lookup, String, MethodType, MethodType, MethodHandle, MethodType)</a>) using an optimized protocol, and an alternate version <a class="el" href="">altMetafactory(MethodHandles.Lookup, String, MethodType, Object...)</a>). The alternate version is a generalization of the standard version, providing additional control over the behavior of the generated function objects via flags and additional arguments. The alternate version adds the ability to manage the following attributes of function objects:</p>
<ul>
<li>
<p class="startli"><em>Bridging.</em> It is sometimes useful to implement multiple variations of the method signature, involving argument or return type adaptation. This occurs when multiple distinct VM signatures for a method are logically considered to be the same method by the language. The flag</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a1692ccbb703f03670cc8bb7418b903f8">FLAG_BRIDGES</a> </div></div><!-- fragment --><p> indicates that a list of additional </p><div class="fragment"><div class="line">MethodType </div></div><!-- fragment --><p> s will be provided, each of which will be implemented by the resulting function object. These methods will share the same name and instantiated type.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><em>Multiple interfaces.</em> If needed, more than one interface can be implemented by the function object. (These additional interfaces are typically marker interfaces with no methods.) The flag</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a80b10af41c22022f5740fd1c24dc937a">FLAG_MARKERS</a> </div></div><!-- fragment --><p> indicates that a list of additional interfaces will be provided, each of which should be implemented by the resulting function object.</p>
<p class="endli"></p>
</li>
<li>
<em>Serializability.</em> The generated function objects do not generally support serialization. If desired,<div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#ab4ab00e1d5fef35b9517759184ac283d">FLAG_SERIALIZABLE</a> </div></div><!-- fragment --> can be used to indicate that the function objects should be serializable. Serializable function objects will use, as their serialized form, instances of the class<div class="fragment"><div class="line">SerializedLambda </div></div><!-- fragment --> , which requires additional assistance from the capturing class (the class described by the <a class="el" href="">MethodHandles.Lookup</a> parameter<div class="fragment"><div class="line">caller </div></div><!-- fragment --> ); see <a class="el" href="classjava_1_1lang_1_1invoke_1_1_serialized_lambda.html">SerializedLambda</a> for details. </li>
</ul>
<p>Assume the linkage arguments are as follows: </p><ul>
<li>
<div class="fragment"><div class="line">invokedType </div></div><!-- fragment --> (describing the<div class="fragment"><div class="line">CallSite </div></div><!-- fragment --> signature) has K parameters of types (D1..Dk) and return type Rd; </li>
<li>
<div class="fragment"><div class="line">samMethodType </div></div><!-- fragment --> (describing the implemented method type) has N parameters, of types (U1..Un) and return type Ru; </li>
<li>
<div class="fragment"><div class="line">implMethod </div></div><!-- fragment --> (the<div class="fragment"><div class="line">MethodHandle </div></div><!-- fragment --> providing the implementation has M parameters, of types (A1..Am) and return type Ra (if the method describes an instance method, the method type of this method handle already includes an extra first argument corresponding to the receiver); </li>
<li>
<div class="fragment"><div class="line">instantiatedMethodType </div></div><!-- fragment --> (allowing restrictions on invocation) has N parameters, of types (T1..Tn) and return type Rt. </li>
</ul>
<p>Then the following linkage invariants must hold: </p><ul>
<li>
Rd is an interface </li>
<li>
<div class="fragment"><div class="line">implMethod </div></div><!-- fragment --> is a <em>direct method handle</em> </li>
<li>
<div class="fragment"><div class="line">samMethodType </div></div><!-- fragment --> and<div class="fragment"><div class="line">instantiatedMethodType </div></div><!-- fragment --> have the same arity N, and for i=1..N, Ti and Ui are the same type, or Ti and Ui are both reference types and Ti is a subtype of Ui </li>
<li>
Either Rt and Ru are the same type, or both are reference types and Rt is a subtype of Ru </li>
<li>
K + N = M </li>
<li>
For i=1..K, Di = Ai </li>
<li>
For i=1..N, Ti is adaptable to Aj, where j=i+k </li>
<li>
The return type Rt is void, or the return type Ra is not void and is adaptable to Rt </li>
</ul>
<p>Further, at capture time, if</p><div class="fragment"><div class="line">implMethod </div></div><!-- fragment --><p> corresponds to an instance method, and there are any capture arguments (</p><div class="fragment"><div class="line">K &gt; 0 </div></div><!-- fragment --><p> ), then the first capture argument (corresponding to the receiver) must be non-null.</p>
<p>A type Q is considered adaptable to S as follows: </p><table  summary="adaptable types">
<tr>
<th>Q</th><th>S</th><th>Link-time checks</th><th>Invocation-time checks </th></tr>
<tr>
<td>Primitive</td><td>Primitive </td><td>Q can be converted to S via a primitive widening conversion </td><td>None  </td></tr>
<tr>
<td>Primitive</td><td>Reference </td><td>S is a supertype of the Wrapper(Q) </td><td>Cast from Wrapper(Q) to S  </td></tr>
<tr>
<td>Reference</td><td>Primitive </td><td>for parameter types: Q is a primitive wrapper and Primitive(Q) can be widened to S <br />
for return types: If Q is a primitive wrapper, check that Primitive(Q) can be widened to S </td><td>If Q is not a primitive wrapper, cast Q to the base Wrapper(S); for example <a class="el" href="classjava_1_1lang_1_1_number.html">Number</a> for numeric types  </td></tr>
<tr>
<td>Reference</td><td>Reference </td><td>for parameter types: S is a supertype of Q <br />
for return types: none </td><td>Cast from Q to S  </td></tr>
</table>
<p>These linkage methods are designed to support the evaluation of <em>lambda expressions</em> and <em>method references</em> in the Java Language. For every lambda expressions or method reference in the source code, there is a target type which is a functional interface. Evaluating a lambda expression produces an object of its target type. The recommended mechanism for evaluating lambda expressions is to desugar the lambda body to a method, invoke an invokedynamic call site whose static argument list describes the sole method of the functional interface and the desugared implementation method, and returns an object (the lambda object) that implements the target type. (For method references, the implementation method is simply the referenced method; no desugaring is needed.)</p>
<p>The argument list of the implementation method and the argument list of the interface method(s) may differ in several ways. The implementation methods may have additional arguments to accommodate arguments captured by the lambda expression; there may also be differences resulting from permitted adaptations of arguments, such as casting, boxing, unboxing, and primitive widening. (Varargs adaptations are not handled by the metafactories; these are expected to be handled by the caller.)</p>
<p>Invokedynamic call sites have two argument lists: a static argument list and a dynamic argument list. The static argument list is stored in the constant pool; the dynamic argument is pushed on the operand stack at capture time. The bootstrap method has access to the entire static argument list (which in this case, includes information describing the implementation method, the target interface, and the target interface method(s)), as well as a method signature describing the number and static types (but not the values) of the dynamic arguments and the static return type of the invokedynamic site.</p>
<p>The implementation method is described with a method handle. In theory, any method handle could be used. Currently supported are direct method handles representing invocation of virtual, interface, constructor and static methods. </p>

<p>Definition at line <a class="el" href="_lambda_metafactory_8java_source.html#l00215">215</a> of file <a class="el" href="_lambda_metafactory_8java_source.html">LambdaMetafactory.java</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4a1e28d2c96b9fb23964dc77cd169ed2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> java.lang.invoke.LambdaMetafactory.altMetafactory </td>
          <td>(</td>
          <td class="paramtype">MethodHandles.Lookup&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1_string.html">String</a>&#160;</td>
          <td class="paramname"><em>invokedName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a>&#160;</td>
          <td class="paramname"><em>invokedType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Object...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_conversion_exception.html">LambdaConversionException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Facilitates the creation of simple "function objects" that implement one or more interfaces by delegation to a provided <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a>, after appropriate type adaptation and partial evaluation of arguments. Typically used as a <em>bootstrap method</em> for</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> call sites, to support the <em>lambda expression</em> and <em>method reference expression</em> features of the Java Programming Language.</p>
<p>This is the general, more flexible metafactory; a streamlined version is provided by <a class="el" href="">String, MethodType, MethodType, MethodHandle, MethodType)</a>. A general description of the behavior of this method is provided <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">above</a>.</p>
<p>The argument list for this method includes three fixed parameters, corresponding to the parameters automatically stacked by the VM for the bootstrap method in an</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> invocation, and an</p><div class="fragment"><div class="line">Object[] </div></div><!-- fragment --><p> parameter that contains additional parameters. The declared argument list for this method is:</p>
<pre><div class="fragment"><div class="line">CallSite <a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a4a1e28d2c96b9fb23964dc77cd169ed2">altMetafactory</a>(MethodHandles.Lookup caller,</div><div class="line">                        String invokedName,</div><div class="line">                        MethodType invokedType,</div><div class="line">                        Object... args)</div></div><!-- fragment --> </pre><p>but it behaves as if the argument list is as follows:</p>
<pre><div class="fragment"><div class="line">CallSite <a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a4a1e28d2c96b9fb23964dc77cd169ed2">altMetafactory</a>(MethodHandles.Lookup caller,</div><div class="line">                        String invokedName,</div><div class="line">                        MethodType invokedType,</div><div class="line">                        MethodType samMethodType,</div><div class="line">                        MethodHandle implMethod,</div><div class="line">                        MethodType instantiatedMethodType,</div><div class="line">                        <span class="keywordtype">int</span> flags,</div><div class="line">                        <span class="keywordtype">int</span> markerInterfaceCount,  <span class="comment">// IF flags has MARKERS set</span></div><div class="line">                        Class... markerInterfaces, <span class="comment">// IF flags has MARKERS set</span></div><div class="line">                        <span class="keywordtype">int</span> bridgeCount,           <span class="comment">// IF flags has BRIDGES set</span></div><div class="line">                        MethodType... bridges      <span class="comment">// IF flags has BRIDGES set</span></div><div class="line">                        )</div></div><!-- fragment --> </pre><p>Arguments that appear in the argument list for <a class="el" href="">metafactory(MethodHandles.Lookup, String, MethodType, MethodType, MethodHandle, MethodType)</a> have the same specification as in that method. The additional arguments are interpreted as follows: </p><ul>
<li>
<div class="fragment"><div class="line">flags </div></div><!-- fragment --> indicates additional options; this is a bitwise OR of desired flags. Defined flags are <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a1692ccbb703f03670cc8bb7418b903f8">FLAG_BRIDGES</a>, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a80b10af41c22022f5740fd1c24dc937a">FLAG_MARKERS</a>, and <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#ab4ab00e1d5fef35b9517759184ac283d">FLAG_SERIALIZABLE</a>. </li>
<li>
<div class="fragment"><div class="line">markerInterfaceCount </div></div><!-- fragment --> is the number of additional interfaces the function object should implement, and is present if and only if the <div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a80b10af41c22022f5740fd1c24dc937a">FLAG_MARKERS</a> </div></div><!-- fragment --> flag is set. </li>
<li>
<div class="fragment"><div class="line">markerInterfaces </div></div><!-- fragment --> is a variable-length list of additional interfaces to implement, whose length equals<div class="fragment"><div class="line">markerInterfaceCount </div></div><!-- fragment --> , and is present if and only if the<div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a80b10af41c22022f5740fd1c24dc937a">FLAG_MARKERS</a> </div></div><!-- fragment --> flag is set. </li>
<li>
<div class="fragment"><div class="line">bridgeCount </div></div><!-- fragment --> is the number of additional method signatures the function object should implement, and is present if and only if the<div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a1692ccbb703f03670cc8bb7418b903f8">FLAG_BRIDGES</a> </div></div><!-- fragment --> flag is set. </li>
<li>
<div class="fragment"><div class="line">bridges </div></div><!-- fragment --> is a variable-length list of additional methods signatures to implement, whose length equals<div class="fragment"><div class="line">bridgeCount </div></div><!-- fragment --> , and is present if and only if the<div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html#a1692ccbb703f03670cc8bb7418b903f8">FLAG_BRIDGES</a> </div></div><!-- fragment --> flag is set. </li>
</ul>
<p>Each class named by</p><div class="fragment"><div class="line">markerInterfaces </div></div><!-- fragment --><p> is subject to the same restrictions as</p><div class="fragment"><div class="line">Rd </div></div><!-- fragment --><p> , the return type of</p><div class="fragment"><div class="line">invokedType </div></div><!-- fragment --><p> , as described <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">above</a>. Each</p><div class="fragment"><div class="line">MethodType </div></div><!-- fragment --><p> named by</p><div class="fragment"><div class="line">bridges </div></div><!-- fragment --><p> is subject to the same restrictions as </p><div class="fragment"><div class="line">samMethodType </div></div><!-- fragment --><p> , as described <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">above</a>.</p>
<p>When FLAG_SERIALIZABLE is set in</p><div class="fragment"><div class="line">flags </div></div><!-- fragment --><p> , the function objects will implement</p><div class="fragment"><div class="line">Serializable </div></div><!-- fragment --><p> , and will have a</p><div class="fragment"><div class="line">writeReplace </div></div><!-- fragment --><p> method that returns an appropriate <a class="el" href="classjava_1_1lang_1_1invoke_1_1_serialized_lambda.html">SerializedLambda</a>. The </p><div class="fragment"><div class="line">caller </div></div><!-- fragment --><p> class must have an appropriate</p><div class="fragment"><div class="line">$deserializeLambda$ </div></div><!-- fragment --><p> method, as described in <a class="el" href="classjava_1_1lang_1_1invoke_1_1_serialized_lambda.html">SerializedLambda</a>.</p>
<p>When the target of the</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> returned from this method is invoked, the resulting function objects are instances of a class with the following properties: </p><ul>
<li>
The class implements the interface named by the return type of<div class="fragment"><div class="line">invokedType </div></div><!-- fragment --> and any interfaces named by<div class="fragment"><div class="line">markerInterfaces </div></div><!-- fragment -->  </li>
<li>
The class declares methods with the name given by<div class="fragment"><div class="line">invokedName </div></div><!-- fragment --> , and the signature given by<div class="fragment"><div class="line">samMethodType </div></div><!-- fragment --> and additional signatures given by<div class="fragment"><div class="line">bridges </div></div><!-- fragment -->  </li>
<li>
The class may override methods from<div class="fragment"><div class="line">Object </div></div><!-- fragment --> , and may implement methods related to serialization. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">caller</td><td>Represents a lookup context with the accessibility privileges of the caller. When used with<div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --> , this is stacked automatically by the VM. </td></tr>
    <tr><td class="paramname">invokedName</td><td>The name of the method to implement. When used with <div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --> , this is provided by the <div class="fragment"><div class="line">NameAndType </div></div><!-- fragment --> of the<div class="fragment"><div class="line">InvokeDynamic </div></div><!-- fragment --> structure and is stacked automatically by the VM. </td></tr>
    <tr><td class="paramname">invokedType</td><td>The expected signature of the<div class="fragment"><div class="line">CallSite </div></div><!-- fragment --> . The parameter types represent the types of capture variables; the return type is the interface to implement. When used with<div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --> , this is provided by the<div class="fragment"><div class="line">NameAndType </div></div><!-- fragment --> of the<div class="fragment"><div class="line">InvokeDynamic </div></div><!-- fragment --> structure and is stacked automatically by the VM. In the event that the implementation method is an instance method and this signature has any parameters, the first parameter in the invocation signature must correspond to the receiver. </td></tr>
    <tr><td class="paramname">args</td><td>An<div class="fragment"><div class="line">Object[] </div></div><!-- fragment --> array containing the required arguments<div class="fragment"><div class="line">samMethodType </div></div><!-- fragment --> ,<div class="fragment"><div class="line">implMethod </div></div><!-- fragment --> , <div class="fragment"><div class="line">instantiatedMethodType </div></div><!-- fragment --> ,<div class="fragment"><div class="line">flags </div></div><!-- fragment --> , and any optional arguments, as described <a class="el" href="">altMetafactory(MethodHandles.Lookup, String, MethodType, Object...)</a> above} </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> whose target can be used to perform capture, generating instances of the interface named by<div class="fragment"><div class="line">invokedType </div></div><!-- fragment --> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_conversion_exception.html">LambdaConversionException</a></td><td>If any of the linkage invariants described <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">above</a> are violated </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_lambda_metafactory_8java_source.html#l00426">426</a> of file <a class="el" href="_lambda_metafactory_8java_source.html">LambdaMetafactory.java</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory_a4a1e28d2c96b9fb23964dc77cd169ed2_cgraph.png" border="0" usemap="#classjava_1_1lang_1_1invoke_1_1_lambda_metafactory_a4a1e28d2c96b9fb23964dc77cd169ed2_cgraph" alt=""/></div>
<map name="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory_a4a1e28d2c96b9fb23964dc77cd169ed2_cgraph" id="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory_a4a1e28d2c96b9fb23964dc77cd169ed2_cgraph">
<area shape="rect" id="node2" href="classjava_1_1lang_1_1_system.html#a52f273595f33fb58e56d47797414880c" title="java.lang.System.arraycopy" alt="" coords="336,5,519,32"/>
<area shape="rect" id="node3" href="classjava_1_1lang_1_1invoke_1_1_method_type.html#a428ecac25f63ce4cb41ef38945df6869" title="java.lang.invoke.MethodType.returnType" alt="" coords="301,56,553,83"/>
<area shape="rect" id="node4" href="classjava_1_1util_1_1_arrays.html#a529c2ea0da9e1636215502e962abb3a3" title="java.util.Arrays.copyOf" alt="" coords="351,107,503,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa5f80289c7c01761cd75c17da73b1524"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> java.lang.invoke.LambdaMetafactory.metafactory </td>
          <td>(</td>
          <td class="paramtype">MethodHandles.Lookup&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1_string.html">String</a>&#160;</td>
          <td class="paramname"><em>invokedName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a>&#160;</td>
          <td class="paramname"><em>invokedType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a>&#160;</td>
          <td class="paramname"><em>samMethodType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a>&#160;</td>
          <td class="paramname"><em>implMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_type.html">MethodType</a>&#160;</td>
          <td class="paramname"><em>instantiatedMethodType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_conversion_exception.html">LambdaConversionException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Facilitates the creation of simple "function objects" that implement one or more interfaces by delegation to a provided <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a>, after appropriate type adaptation and partial evaluation of arguments. Typically used as a <em>bootstrap method</em> for</p><div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --><p> call sites, to support the <em>lambda expression</em> and <em>method reference expression</em> features of the Java Programming Language.</p>
<p>This is the standard, streamlined metafactory; additional flexibility is provided by <a class="el" href="">altMetafactory(MethodHandles.Lookup, String, MethodType, Object...)</a>. A general description of the behavior of this method is provided <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">above</a>.</p>
<p>When the target of the</p><div class="fragment"><div class="line">CallSite </div></div><!-- fragment --><p> returned from this method is invoked, the resulting function objects are instances of a class which implements the interface named by the return type of</p><div class="fragment"><div class="line">invokedType </div></div><!-- fragment --><p> , declares a method with the name given by</p><div class="fragment"><div class="line">invokedName </div></div><!-- fragment --><p> and the signature given by</p><div class="fragment"><div class="line">samMethodType </div></div><!-- fragment --><p> . It may also override additional methods from</p><div class="fragment"><div class="line">Object </div></div><!-- fragment --><p> .</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">caller</td><td>Represents a lookup context with the accessibility privileges of the caller. When used with<div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --> , this is stacked automatically by the VM. </td></tr>
    <tr><td class="paramname">invokedName</td><td>The name of the method to implement. When used with <div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --> , this is provided by the <div class="fragment"><div class="line">NameAndType </div></div><!-- fragment --> of the<div class="fragment"><div class="line">InvokeDynamic </div></div><!-- fragment --> structure and is stacked automatically by the VM. </td></tr>
    <tr><td class="paramname">invokedType</td><td>The expected signature of the<div class="fragment"><div class="line">CallSite </div></div><!-- fragment --> . The parameter types represent the types of capture variables; the return type is the interface to implement. When used with<div class="fragment"><div class="line">invokedynamic </div></div><!-- fragment --> , this is provided by the<div class="fragment"><div class="line">NameAndType </div></div><!-- fragment --> of the<div class="fragment"><div class="line">InvokeDynamic </div></div><!-- fragment --> structure and is stacked automatically by the VM. In the event that the implementation method is an instance method and this signature has any parameters, the first parameter in the invocation signature must correspond to the receiver. </td></tr>
    <tr><td class="paramname">samMethodType</td><td>Signature and return type of method to be implemented by the function object. </td></tr>
    <tr><td class="paramname">implMethod</td><td>A direct method handle describing the implementation method which should be called (with suitable adaptation of argument types, return types, and with captured arguments prepended to the invocation arguments) at invocation time. </td></tr>
    <tr><td class="paramname">instantiatedMethodType</td><td>The signature and return type that should be enforced dynamically at invocation time. This may be the same as<div class="fragment"><div class="line">samMethodType </div></div><!-- fragment --> , or may be a specialization of it. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a <a class="el" href="classjava_1_1lang_1_1invoke_1_1_call_site.html">CallSite</a> whose target can be used to perform capture, generating instances of the interface named by<div class="fragment"><div class="line">invokedType </div></div><!-- fragment --> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_conversion_exception.html">LambdaConversionException</a></td><td>If any of the linkage invariants described <a class="el" href="classjava_1_1lang_1_1invoke_1_1_lambda_metafactory.html">above</a> are violated </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_lambda_metafactory_8java_source.html#l00291">291</a> of file <a class="el" href="_lambda_metafactory_8java_source.html">LambdaMetafactory.java</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a1692ccbb703f03670cc8bb7418b903f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int java.lang.invoke.LambdaMetafactory.FLAG_BRIDGES = 1 &lt;&lt; 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag for alternate metafactories indicating the lambda object requires additional bridge methods </p>

<p>Definition at line <a class="el" href="_lambda_metafactory_8java_source.html#l00232">232</a> of file <a class="el" href="_lambda_metafactory_8java_source.html">LambdaMetafactory.java</a>.</p>

</div>
</div>
<a class="anchor" id="a80b10af41c22022f5740fd1c24dc937a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int java.lang.invoke.LambdaMetafactory.FLAG_MARKERS = 1 &lt;&lt; 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag for alternate metafactories indicating the lambda object implements other marker interfaces besides Serializable </p>

<p>Definition at line <a class="el" href="_lambda_metafactory_8java_source.html#l00226">226</a> of file <a class="el" href="_lambda_metafactory_8java_source.html">LambdaMetafactory.java</a>.</p>

</div>
</div>
<a class="anchor" id="ab4ab00e1d5fef35b9517759184ac283d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int java.lang.invoke.LambdaMetafactory.FLAG_SERIALIZABLE = 1 &lt;&lt; 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flag for alternate metafactories indicating the lambda object must be serializable </p>

<p>Definition at line <a class="el" href="_lambda_metafactory_8java_source.html#l00219">219</a> of file <a class="el" href="_lambda_metafactory_8java_source.html">LambdaMetafactory.java</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/00_Code/openjdk8/java/lang/invoke/<a class="el" href="_lambda_metafactory_8java_source.html">LambdaMetafactory.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
