<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>openjdk8_analysis: E:/00_Code/openjdk8/java/awt/font/TextLayout.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openjdk8_analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e38cca866e3d74f67c36b6eb5e35f8b2.html">00_Code</a></li><li class="navelem"><a class="el" href="dir_6315598f6a82eea3cf0c8093b8d00ac5.html">openjdk8</a></li><li class="navelem"><a class="el" href="dir_9f6fe6093ab7267edd677af5d6e273f9.html">java</a></li><li class="navelem"><a class="el" href="dir_fdb964cd8820ebc4fc7ed88265611046.html">awt</a></li><li class="navelem"><a class="el" href="dir_5ceca6fd66eaf4f1f56a55612c4beb7a.html">font</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TextLayout.java</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_text_layout_8java.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * (C) Copyright Taligent, Inc. 1996 - 1997, All Rights Reserved</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * (C) Copyright IBM Corp. 1996-2003, All Rights Reserved</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * The original version of this source code and documentation is</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * copyrighted and owned by Taligent, Inc., a wholly-owned subsidiary</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * of IBM. These materials are provided under terms of a License</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * Agreement between Taligent and Sun. This technology is protected</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * by multiple US and International patents.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * This notice and attribution to Taligent may not be removed.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * Taligent is a registered trademark of Taligent, Inc.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">package </span>java.awt.font;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="classjava_1_1awt_1_1_color.html">Color</a>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="classjava_1_1awt_1_1_font.html">Font</a>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="classjava_1_1awt_1_1_graphics2_d.html">Graphics2D</a>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="classjava_1_1awt_1_1_rectangle.html">Rectangle</a>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="namespacejava_1_1awt_1_1font.html">font</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_numeric_shaper.html">NumericShaper</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="namespacejava_1_1awt_1_1font.html">font</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_line.html">TextLine</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_line_1_1_text_line_metrics.html">TextLineMetrics</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="namespacejava_1_1awt_1_1geom.html">geom</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_affine_transform.html">AffineTransform</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="namespacejava_1_1awt_1_1geom.html">geom</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="namespacejava_1_1awt_1_1geom.html">geom</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_noninvertible_transform_exception.html">NoninvertibleTransformException</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="namespacejava_1_1awt_1_1geom.html">geom</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_point2_d.html">Point2D</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1awt.html">awt</a>.<a class="code" href="namespacejava_1_1awt_1_1geom.html">geom</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1text.html">text</a>.<a class="code" href="classjava_1_1text_1_1_attributed_string.html">AttributedString</a>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1text.html">text</a>.<a class="code" href="interfacejava_1_1text_1_1_attributed_character_iterator.html">AttributedCharacterIterator</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1text.html">text</a>.<a class="code" href="interfacejava_1_1text_1_1_attributed_character_iterator.html">AttributedCharacterIterator</a>.<a class="code" href="classjava_1_1text_1_1_attributed_character_iterator_1_1_attribute.html">Attribute</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1text.html">text</a>.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html">CharacterIterator</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1util.html">util</a>.<a class="code" href="interfacejava_1_1util_1_1_map.html">Map</a>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1util.html">util</a>.<a class="code" href="classjava_1_1util_1_1_hash_map.html">HashMap</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1util.html">util</a>.<a class="code" href="classjava_1_1util_1_1_hashtable.html">Hashtable</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">import</span> sun.font.AttributeValues;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">import</span> sun.font.CoreMetrics;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">import</span> sun.font.Decoration;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">import</span> sun.font.FontLineMetrics;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">import</span> sun.font.FontResolver;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">import</span> sun.font.GraphicComponent;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">import</span> sun.font.LayoutPathImpl;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">import</span> sun.text.CodePointIterator;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html">  239</a></span>&#160;<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class </span><a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html">TextLayout</a> <span class="keyword">implements</span> Cloneable {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">int</span> characterCount;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">boolean</span> isVerticalLine = <span class="keyword">false</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">private</span> byte baseline;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">float</span>[] baselineOffsets;  <span class="comment">// why have these ?</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">private</span> TextLine textLine;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// cached values computed from GlyphSets and set info:</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// all are recomputed from scratch in buildCache()</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keyword">private</span> TextLine.TextLineMetrics lineMetrics = null;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">float</span> visibleAdvance;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">int</span> hashCodeCache;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">     * TextLayouts are supposedly immutable.  If you mutate a TextLayout under</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">     * the covers (like the justification code does) you&#39;ll need to set this</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">     * back to false.  Could be replaced with textLine != null &lt;--&gt; cacheIsValid.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">boolean</span> cacheIsValid = <span class="keyword">false</span>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// This value is obtained from an attribute, and constrained to the</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// interval [0,1].  If 0, the layout cannot be justified.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">float</span> justifyRatio;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// If a layout is produced by justification, then that layout</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// cannot be justified.  To enforce this constraint the</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// justifyRatio of the justified layout is set to this value.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">float</span> ALREADY_JUSTIFIED = -53.9f;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// dx and dy specify the distance between the TextLayout&#39;s origin</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// and the origin of the leftmost GlyphSet (TextLayoutComponent,</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// actually).  They were used for hanging punctuation support,</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// which is no longer implemented.  Currently they are both always 0,</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// and TextLayout is not guaranteed to work with non-zero dx, dy</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// values right now.  They were left in as an aide and reminder to</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// anyone who implements hanging punctuation or other similar stuff.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// They are static now so they don&#39;t take up space in TextLayout</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// instances.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">float</span> dx;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">float</span> dy;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     * Natural bounds is used internally.  It is built on demand in</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">     * getNaturalBounds.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> naturalBounds = null;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">     * boundsRect encloses all of the bits this TextLayout can draw.  It</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">     * is build on demand in getBounds.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> boundsRect = null;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">     * flag to supress/allow carets inside of ligatures when hit testing or</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">     * arrow-keying</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">boolean</span> caretsInLigaturesAreAllowed = <span class="keyword">false</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span>CaretPolicy {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;         <span class="keyword">public</span> CaretPolicy() {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;         }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> getStrongCaret(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit1,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                          <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit2,</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                          <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html">TextLayout</a> layout) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="comment">// default implementation just calls private method on layout</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">return</span> layout.getStrongHit(hit1, hit2);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9ddb5792c28b3c1b50d109a04c6de90f">  353</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> CaretPolicy <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9ddb5792c28b3c1b50d109a04c6de90f">DEFAULT_CARET_POLICY</a> = <span class="keyword">new</span> CaretPolicy();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa21d00a062938655d7d3512e114fe3ae">  372</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa21d00a062938655d7d3512e114fe3ae">TextLayout</a>(<a class="code" href="classjava_1_1lang_1_1_string.html">String</a> <span class="keywordtype">string</span>, <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> font, <a class="code" href="classjava_1_1awt_1_1font_1_1_font_render_context.html">FontRenderContext</a> frc) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">if</span> (font == null) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null font passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">string</span> == null) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null string passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.length() == 0) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Zero length string passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="interfacejava_1_1util_1_1_map.html">Map&lt;? extends Attribute, ?&gt;</a> attributes = null;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (font.hasLayoutAttributes()) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            attributes = font.<a class="code" href="classjava_1_1awt_1_1_font.html#abacf3273de09212942a6162904240b77">getAttributes</a>();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordtype">char</span>[] text = <span class="keywordtype">string</span>.toCharArray();</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span> (sameBaselineUpTo(font, text, 0, text.length) == text.length) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            fastInit(text, font, attributes, frc);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="classjava_1_1text_1_1_attributed_string.html">AttributedString</a> as = attributes == null</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                ? <span class="keyword">new</span> <a class="code" href="classjava_1_1text_1_1_attributed_string.html">AttributedString</a>(<span class="keywordtype">string</span>)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                : <span class="keyword">new</span> AttributedString(<span class="keywordtype">string</span>, attributes);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            as.<a class="code" href="classjava_1_1text_1_1_attributed_string.html#af5237317e62a49fe7d83b74f9b4ac692">addAttribute</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html">TextAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html#adb9108c1f8534008a05857685c751f6f">FONT</a>, font);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            standardInit(as.<a class="code" href="classjava_1_1text_1_1_attributed_string.html#a51305a940f056f7429f5f055b9827fbf">getIterator</a>(), text, frc);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aee619f055d82364c3f66380431992cd3">  420</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aee619f055d82364c3f66380431992cd3">TextLayout</a>(<a class="code" href="classjava_1_1lang_1_1_string.html">String</a> <span class="keywordtype">string</span>, <a class="code" href="interfacejava_1_1util_1_1_map.html">Map&lt;? extends Attribute,?&gt;</a> attributes,</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                      <a class="code" href="classjava_1_1awt_1_1font_1_1_font_render_context.html">FontRenderContext</a> frc)</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">string</span> == null) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null string passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (attributes == null) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null map passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.length() == 0) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Zero length string passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordtype">char</span>[] text = <span class="keywordtype">string</span>.toCharArray();</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> font = singleFont(text, 0, text.length, attributes);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">if</span> (font != null) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            fastInit(text, font, attributes, frc);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <a class="code" href="classjava_1_1text_1_1_attributed_string.html">AttributedString</a> as = <span class="keyword">new</span> <a class="code" href="classjava_1_1text_1_1_attributed_string.html">AttributedString</a>(<span class="keywordtype">string</span>, attributes);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            standardInit(as.<a class="code" href="classjava_1_1text_1_1_attributed_string.html#a51305a940f056f7429f5f055b9827fbf">getIterator</a>(), text, frc);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">     * Determines a font for the attributes, and if a single font can render</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">     * all the text on one baseline, return it, otherwise null.  If the</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">     * attributes specify a font, assume it can display all the text without</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">     * checking.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">     * If the AttributeSet contains an embedded graphic, return null.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> singleFont(<span class="keywordtype">char</span>[] text,</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                   <span class="keywordtype">int</span> start,</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                   <span class="keywordtype">int</span> limit,</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                   <a class="code" href="interfacejava_1_1util_1_1_map.html">Map&lt;? extends Attribute, ?&gt;</a> attributes) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">if</span> (attributes.<a class="code" href="interfacejava_1_1util_1_1_map.html#a95ef3b583f050b93703b324f12f5981e">get</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html">TextAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html#ab7f7fefef358e6253d51daf6fbd185db">CHAR_REPLACEMENT</a>) != null) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> font = null;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            font = (<a class="code" href="classjava_1_1awt_1_1_font.html">Font</a>)attributes.<a class="code" href="interfacejava_1_1util_1_1_map.html#a95ef3b583f050b93703b324f12f5981e">get</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html">TextAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html#adb9108c1f8534008a05857685c751f6f">FONT</a>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">catch</span> (ClassCastException e) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">if</span> (font == null) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (attributes.<a class="code" href="interfacejava_1_1util_1_1_map.html#a95ef3b583f050b93703b324f12f5981e">get</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html">TextAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html#ac498ac25519f5f36ba61973a73b476b3">FAMILY</a>) != null) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                font = <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a>.<a class="code" href="classjava_1_1awt_1_1_font.html#afc6ba99b63545891962e1cf2c53956b2">getFont</a>(attributes);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                <span class="keywordflow">if</span> (font.<a class="code" href="classjava_1_1awt_1_1_font.html#aeaca749bccbf531520308a585744e5ea">canDisplayUpTo</a>(text, start, limit) != -1) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                FontResolver resolver = FontResolver.getInstance();</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                CodePointIterator iter = CodePointIterator.create(text, start, limit);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                <span class="keywordtype">int</span> fontIndex = resolver.nextFontRunIndex(iter);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <span class="keywordflow">if</span> (iter.charIndex() == limit) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                    font = resolver.<a class="code" href="classjava_1_1awt_1_1_font.html#afc6ba99b63545891962e1cf2c53956b2">getFont</a>(fontIndex, attributes);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (sameBaselineUpTo(font, text, start, limit) != limit) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">return</span> font;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3cc596fa77ea04758ddb8bfa2a377159">  504</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3cc596fa77ea04758ddb8bfa2a377159">TextLayout</a>(<a class="code" href="interfacejava_1_1text_1_1_attributed_character_iterator.html">AttributedCharacterIterator</a> text, <a class="code" href="classjava_1_1awt_1_1font_1_1_font_render_context.html">FontRenderContext</a> frc) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> (text == null) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null iterator passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordtype">int</span> start = text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#aebfed7edbfce2219c4446aaab47a580a">getBeginIndex</a>();</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordtype">int</span> limit = text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#a152227aeab58b996acbc68e903ade696">getEndIndex</a>();</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> (start == limit) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Zero length iterator passed to TextLayout constructor.&quot;</span>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordtype">int</span> len = limit - start;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#a0bd210026ea1673b6ae682af1f0ac866">first</a>();</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordtype">char</span>[] chars = <span class="keyword">new</span> <span class="keywordtype">char</span>[len];</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordtype">int</span> n = 0;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">char</span> c = text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#a0bd210026ea1673b6ae682af1f0ac866">first</a>();</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;             c != <a class="code" href="interfacejava_1_1text_1_1_character_iterator.html">CharacterIterator</a>.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#a5c8566b35e43a9ee2804ad84afaa0549">DONE</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;             c = text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#a81eb10d90805a5a8c8dd4e01708a2688">next</a>())</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            chars[n++] = c;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#a0bd210026ea1673b6ae682af1f0ac866">first</a>();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">if</span> (text.<a class="code" href="interfacejava_1_1text_1_1_attributed_character_iterator.html#adddef349281b6d62701d37831026d4ce">getRunLimit</a>() == limit) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <a class="code" href="interfacejava_1_1util_1_1_map.html">Map&lt;? extends Attribute, ?&gt;</a> attributes = text.<a class="code" href="interfacejava_1_1text_1_1_attributed_character_iterator.html#af35957f68885b3dcb7bb341fa6f317d1">getAttributes</a>();</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> font = singleFont(chars, 0, len, attributes);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">if</span> (font != null) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                fastInit(chars, font, attributes, frc);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        standardInit(text, chars, frc);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa21d00a062938655d7d3512e114fe3ae">TextLayout</a>(TextLine textLine,</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;               byte baseline,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;               <span class="keywordtype">float</span>[] baselineOffsets,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;               <span class="keywordtype">float</span> justifyRatio) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        this.characterCount = textLine.characterCount();</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        this.baseline = baseline;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        this.baselineOffsets = baselineOffsets;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        this.textLine = textLine;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        this.justifyRatio = justifyRatio;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> paragraphInit(byte aBaseline, CoreMetrics lm,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                               <a class="code" href="interfacejava_1_1util_1_1_map.html">Map&lt;? extends Attribute, ?&gt;</a> paragraphAttrs,</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                               <span class="keywordtype">char</span>[] text) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        baseline = aBaseline;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment">// normalize to current baseline</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        baselineOffsets = TextLine.getNormalizedOffsets(lm.baselineOffsets, baseline);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        justifyRatio = AttributeValues.getJustification(paragraphAttrs);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_numeric_shaper.html">NumericShaper</a> shaper = AttributeValues.getNumericShaping(paragraphAttrs);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">if</span> (shaper != null) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            shaper.<a class="code" href="classjava_1_1awt_1_1font_1_1_numeric_shaper.html#a447782789d0396a0dda57ebd264ac3ca">shape</a>(text, 0, text.length);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">     * the fast init generates a single glyph set.  This requires:</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">     * all one style</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">     * all renderable by one font (ie no embedded graphics)</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">     * all on one baseline</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> fastInit(<span class="keywordtype">char</span>[] chars, <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> font,</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                          <a class="code" href="interfacejava_1_1util_1_1_map.html">Map&lt;? extends Attribute, ?&gt;</a> attrs,</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                          <a class="code" href="classjava_1_1awt_1_1font_1_1_font_render_context.html">FontRenderContext</a> frc) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">// Object vf = attrs.get(TextAttribute.ORIENTATION);</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="comment">// isVerticalLine = TextAttribute.ORIENTATION_VERTICAL.equals(vf);</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        isVerticalLine = <span class="keyword">false</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_line_metrics.html">LineMetrics</a> lm = font.<a class="code" href="classjava_1_1awt_1_1_font.html#a44a0afc5bcd0b4734d3b8d6816bc43e0">getLineMetrics</a>(chars, 0, chars.length, frc);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        CoreMetrics cm = CoreMetrics.get(lm);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        byte glyphBaseline = (byte) cm.baselineIndex;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        if (attrs == null) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            baseline = glyphBaseline;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            baselineOffsets = cm.baselineOffsets;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            justifyRatio = 1.0f;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            paragraphInit(glyphBaseline, cm, attrs, chars);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        characterCount = chars.length;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        textLine = TextLine.fastCreateTextLine(frc, chars, font, cm, attrs);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">     * the standard init generates multiple glyph sets based on style,</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">     * renderable, and baseline runs.</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">     * @param chars the text in the iterator, extracted into a char array</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> standardInit(<a class="code" href="interfacejava_1_1text_1_1_attributed_character_iterator.html">AttributedCharacterIterator</a> text, <span class="keywordtype">char</span>[] chars, <a class="code" href="classjava_1_1awt_1_1font_1_1_font_render_context.html">FontRenderContext</a> frc) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        characterCount = chars.length;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="comment">// set paragraph attributes</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="comment">// If there&#39;s an embedded graphic at the start of the</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="comment">// paragraph, look for the first non-graphic character</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="comment">// and use it and its font to initialize the paragraph.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="comment">// If not, use the first graphic to initialize.</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <a class="code" href="interfacejava_1_1util_1_1_map.html">Map&lt;? extends Attribute, ?&gt;</a> paragraphAttrs = text.<a class="code" href="interfacejava_1_1text_1_1_attributed_character_iterator.html#af35957f68885b3dcb7bb341fa6f317d1">getAttributes</a>();</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="keywordtype">boolean</span> haveFont = TextLine.advanceToFirstFont(text);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">if</span> (haveFont) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> defaultFont = TextLine.getFontAtCurrentPos(text);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <span class="keywordtype">int</span> charsStart = text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#ae7e4083eb65e0f470ccdf402107739c1">getIndex</a>() - text.<a class="code" href="interfacejava_1_1text_1_1_character_iterator.html#aebfed7edbfce2219c4446aaab47a580a">getBeginIndex</a>();</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <a class="code" href="classjava_1_1awt_1_1font_1_1_line_metrics.html">LineMetrics</a> lm = defaultFont.<a class="code" href="classjava_1_1awt_1_1_font.html#a44a0afc5bcd0b4734d3b8d6816bc43e0">getLineMetrics</a>(chars, charsStart, charsStart+1, frc);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                CoreMetrics cm = CoreMetrics.get(lm);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                paragraphInit((byte)cm.baselineIndex, cm, paragraphAttrs, chars);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <span class="comment">// hmmm what to do here?  Just try to supply reasonable</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="comment">// values I guess.</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a> graphic = (<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a>)</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                                paragraphAttrs.<a class="code" href="interfacejava_1_1util_1_1_map.html#a95ef3b583f050b93703b324f12f5981e">get</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html">TextAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_attribute.html#ab7f7fefef358e6253d51daf6fbd185db">CHAR_REPLACEMENT</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                byte defaultBaseline = getBaselineFromGraphic(graphic);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                CoreMetrics cm = GraphicComponent.createCoreMetrics(graphic);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                paragraphInit(defaultBaseline, cm, paragraphAttrs, chars);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        textLine = TextLine.standardCreateTextLine(frc, text, chars, baselineOffsets);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">     * A utility to rebuild the ascent/descent/leading/advance cache.</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">     * You&#39;ll need to call this if you clone and mutate (like justification,</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">     * editing methods do)</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> ensureCache() {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">if</span> (!cacheIsValid) {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            buildCache();</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> buildCache() {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        lineMetrics = textLine.getMetrics();</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="comment">// compute visibleAdvance</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">if</span> (textLine.isDirectionLTR()) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordtype">int</span> lastNonSpace = characterCount-1;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="keywordflow">while</span> (lastNonSpace != -1) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <span class="keywordtype">int</span> logIndex = textLine.visualToLogical(lastNonSpace);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="keywordflow">if</span> (!textLine.isCharSpace(logIndex)) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                    --lastNonSpace;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="keywordflow">if</span> (lastNonSpace == characterCount-1) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                visibleAdvance = lineMetrics.advance;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastNonSpace == -1) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                visibleAdvance = 0;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                <span class="keywordtype">int</span> logIndex = textLine.visualToLogical(lastNonSpace);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                visibleAdvance = textLine.getCharLinePosition(logIndex)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                        + textLine.getCharAdvance(logIndex);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordtype">int</span> leftmostNonSpace = 0;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="keywordflow">while</span> (leftmostNonSpace != characterCount) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keywordtype">int</span> logIndex = textLine.visualToLogical(leftmostNonSpace);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                <span class="keywordflow">if</span> (!textLine.isCharSpace(logIndex)) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    ++leftmostNonSpace;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="keywordflow">if</span> (leftmostNonSpace == characterCount) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                visibleAdvance = 0;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (leftmostNonSpace == 0) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                visibleAdvance = lineMetrics.advance;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <span class="keywordtype">int</span> logIndex = textLine.visualToLogical(leftmostNonSpace);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                <span class="keywordtype">float</span> pos = textLine.getCharLinePosition(logIndex);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                visibleAdvance = lineMetrics.advance - pos;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="comment">// naturalBounds, boundsRect will be generated on demand</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        naturalBounds = null;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        boundsRect = null;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="comment">// hashCode will be regenerated on demand</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        hashCodeCache = 0;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        cacheIsValid = <span class="keyword">true</span>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> getNaturalBounds() {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        ensureCache();</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">if</span> (naturalBounds == null) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            naturalBounds = textLine.getItalicBounds();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">return</span> naturalBounds;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a06727d2d0ac42515f4a67253d977dff0">  748</a></span>&#160;    <span class="keyword">protected</span> Object <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a06727d2d0ac42515f4a67253d977dff0">clone</a>() {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">         * !!! I think this is safe.  Once created, nothing mutates the</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">         * glyphvectors or arrays.  But we need to make sure.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">         * {jbr} actually, that&#39;s not quite true.  The justification code</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">         * mutates after cloning.  It doesn&#39;t actually change the glyphvectors</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">         * (that&#39;s impossible) but it replaces them with justified sets.  This</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">         * is a problem for GlyphIterator creation, since new GlyphIterators</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">         * are created by cloning a prototype.  If the prototype has outdated</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">         * glyphvectors, so will the new ones.  A partial solution is to set the</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">         * prototypical GlyphIterator to null when the glyphvectors change.  If</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">         * you forget this one time, you&#39;re hosed.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="keywordflow">return</span> super.clone();</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">catch</span> (CloneNotSupportedException e) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> InternalError(e);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">     * Utility to throw an expection if an invalid TextHitInfo is passed</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">     * as a parameter.  Avoids code duplication.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> checkTextHit(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">if</span> (hit == null) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;TextHitInfo is null.&quot;</span>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">if</span> (hit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6c4dd997197ed8143fe6ca2425834a62">getInsertionIndex</a>() &lt; 0 ||</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            hit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6c4dd997197ed8143fe6ca2425834a62">getInsertionIndex</a>() &gt; characterCount) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;TextHitInfo is out of range&quot;</span>);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#abd6d63dc61f3960db631ea2da38d888b">  799</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html">TextLayout</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#abd6d63dc61f3960db631ea2da38d888b">getJustifiedLayout</a>(<span class="keywordtype">float</span> justificationWidth) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">if</span> (justificationWidth &lt;= 0) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;justificationWidth &lt;= 0 passed to TextLayout.getJustifiedLayout()&quot;</span>);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">if</span> (justifyRatio == ALREADY_JUSTIFIED) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&quot;Can&#39;t justify again.&quot;</span>);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        ensureCache(); <span class="comment">// make sure textLine is not null</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="comment">// default justification range to exclude trailing logical whitespace</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordtype">int</span> limit = characterCount;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">while</span> (limit &gt; 0 &amp;&amp; textLine.isCharWhitespace(limit-1)) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            --limit;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        TextLine newLine = textLine.getJustifiedLine(justificationWidth, justifyRatio, 0, limit);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">if</span> (newLine != null) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa21d00a062938655d7d3512e114fe3ae">TextLayout</a>(newLine, baseline, baselineOffsets, ALREADY_JUSTIFIED);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">this</span>;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7533fa56f5fa7167640cb790637f09fc">  846</a></span>&#160;    <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7533fa56f5fa7167640cb790637f09fc">handleJustify</a>(<span class="keywordtype">float</span> justificationWidth) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="comment">// never called</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9d88e0471f062215e120158f2c9655a6">  861</a></span>&#160;    <span class="keyword">public</span> byte <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9d88e0471f062215e120158f2c9655a6">getBaseline</a>() {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="keywordflow">return</span> baseline;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a5ab216c086cb3cf23b511888b0dc7176">  880</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span>[] <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a5ab216c086cb3cf23b511888b0dc7176">getBaselineOffsets</a>() {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordtype">float</span>[] offsets = <span class="keyword">new</span> <span class="keywordtype">float</span>[baselineOffsets.length];</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        System.arraycopy(baselineOffsets, 0, offsets, 0, offsets.length);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">return</span> offsets;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a23ff5e94d0f44ab0aad87a87355af7d0">  893</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a23ff5e94d0f44ab0aad87a87355af7d0">getAdvance</a>() {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        ensureCache();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">return</span> lineMetrics.advance;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa61022aebcaa03e600af0764bc6ebeaa">  905</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa61022aebcaa03e600af0764bc6ebeaa">getVisibleAdvance</a>() {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        ensureCache();</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">return</span> visibleAdvance;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a23eed8c23b6b6bcf31ea962a72d0c5c6">  921</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a23eed8c23b6b6bcf31ea962a72d0c5c6">getAscent</a>() {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        ensureCache();</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">return</span> lineMetrics.ascent;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac87b670efe0ec54aee0c4d827b56cb84">  936</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac87b670efe0ec54aee0c4d827b56cb84">getDescent</a>() {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        ensureCache();</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">return</span> lineMetrics.descent;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    }</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac3578c95ab18da395f7d08279778b2b0">  962</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac3578c95ab18da395f7d08279778b2b0">getLeading</a>() {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        ensureCache();</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">return</span> lineMetrics.leading;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    }</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad5643097cd961dd936b8c3da2727aff8">  977</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad5643097cd961dd936b8c3da2727aff8">getBounds</a>() {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        ensureCache();</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">if</span> (boundsRect == null) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> vb = textLine.getVisualBounds();</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="keywordflow">if</span> (dx != 0 || dy != 0) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                vb.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html#afffd42d7b18c8efb6353d7de441f0c33">setRect</a>(vb.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>() - dx,</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                           vb.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>() - dy,</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                           vb.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">getWidth</a>(),</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                           vb.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">getHeight</a>());</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            boundsRect = vb;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds = <span class="keyword">new</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d_1_1_float.html">Float</a>();</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html#afffd42d7b18c8efb6353d7de441f0c33">setRect</a>(boundsRect);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">return</span> bounds;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa99e1e6fd1645a0bbe971f176049d999"> 1013</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1_rectangle.html">Rectangle</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa99e1e6fd1645a0bbe971f176049d999">getPixelBounds</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_font_render_context.html">FontRenderContext</a> frc, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">return</span> textLine.getPixelBounds(frc, x, y);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9e4e2ab362d5c392cbf81fda7ecaf4c3"> 1033</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9e4e2ab362d5c392cbf81fda7ecaf4c3">isLeftToRight</a>() {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">return</span> textLine.isDirectionLTR();</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a767f702f4ab2a34e3920fc70459cfd40"> 1042</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a767f702f4ab2a34e3920fc70459cfd40">isVertical</a>() {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">return</span> isVerticalLine;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad4e6db501aa193aa8cd10433fa62f3f2"> 1051</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad4e6db501aa193aa8cd10433fa62f3f2">getCharacterCount</a>() {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">return</span> characterCount;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">     * carets and hit testing</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">     * Positions on a text line are represented by instances of TextHitInfo.</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">     * Any TextHitInfo with characterOffset between 0 and characterCount-1,</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">     * inclusive, represents a valid position on the line.  Additionally,</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">     * [-1, trailing] and [characterCount, leading] are valid positions, and</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">     * represent positions at the logical start and end of the line,</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">     * respectively.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">     * The characterOffsets in TextHitInfo&#39;s used and returned by TextLayout</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">     * are relative to the beginning of the text layout, not necessarily to</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">     * the beginning of the text storage the client is using.</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">     * Every valid TextHitInfo has either one or two carets associated with it.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">     * A caret is a visual location in the TextLayout indicating where text at</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">     * the TextHitInfo will be displayed on screen.  If a TextHitInfo</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">     * represents a location on a directional boundary, then there are two</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">     * possible visible positions for newly inserted text.  Consider the</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">     * following example, in which capital letters indicate right-to-left text,</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">     * and the overall line direction is left-to-right:</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">     * Text Storage: [ a, b, C, D, E, f ]</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">     * Display:        a b E D C f</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">     * The text hit info (1, t) represents the trailing side of &#39;b&#39;.  If &#39;q&#39;,</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">     * a left-to-right character is inserted into the text storage at this</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">     * location, it will be displayed between the &#39;b&#39; and the &#39;E&#39;:</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment">     * Text Storage: [ a, b, q, C, D, E, f ]</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">     * Display:        a b q E D C f</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">     * However, if a &#39;W&#39;, which is right-to-left, is inserted into the storage</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">     * after &#39;b&#39;, the storage and display will be:</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment">     * Text Storage: [ a, b, W, C, D, E, f ]</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">     * Display:        a b E D C W f</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">     * So, for the original text storage, two carets should be displayed for</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">     * location (1, t): one visually between &#39;b&#39; and &#39;E&#39; and one visually</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">     * between &#39;C&#39; and &#39;f&#39;.</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">     * When two carets are displayed for a TextHitInfo, one caret is the</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">     * &#39;strong&#39; caret and the other is the &#39;weak&#39; caret.  The strong caret</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">     * indicates where an inserted character will be displayed when that</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">     * character&#39;s direction is the same as the direction of the TextLayout.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">     * The weak caret shows where an character inserted character will be</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">     * displayed when the character&#39;s direction is opposite that of the</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">     * TextLayout.</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">     * Clients should not be overly concerned with the details of correct</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">     * caret display. TextLayout.getCaretShapes(TextHitInfo) will return an</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">     * array of two paths representing where carets should be displayed.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">     * The first path in the array is the strong caret; the second element,</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">     * if non-null, is the weak caret.  If the second element is null,</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">     * then there is no weak caret for the given TextHitInfo.</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">     * Since text can be visually reordered, logically consecutive</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">     * TextHitInfo&#39;s may not be visually consecutive.  One implication of this</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">     * is that a client cannot tell from inspecting a TextHitInfo whether the</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">     * hit represents the first (or last) caret in the layout.  Clients</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">     * can call getVisualOtherHit();  if the visual companion is</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">     * (-1, TRAILING) or (characterCount, LEADING), then the hit is at the</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">     * first (last) caret position in the layout.</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">float</span>[] getCaretInfo(<span class="keywordtype">int</span> caret,</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                                 <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds,</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                                 <span class="keywordtype">float</span>[] info) {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordtype">float</span> top1X, top2X;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <span class="keywordtype">float</span> bottom1X, bottom2X;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">if</span> (caret == 0 || caret == characterCount) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <span class="keywordtype">float</span> pos;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <span class="keywordtype">int</span> logIndex;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="keywordflow">if</span> (caret == characterCount) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                logIndex = textLine.visualToLogical(characterCount-1);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                pos = textLine.getCharLinePosition(logIndex)</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                                        + textLine.getCharAdvance(logIndex);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                logIndex = textLine.visualToLogical(caret);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                pos = textLine.getCharLinePosition(logIndex);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            <span class="keywordtype">float</span> angle = textLine.getCharAngle(logIndex);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <span class="keywordtype">float</span> shift = textLine.getCharShift(logIndex);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            pos += angle * shift;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            top1X = top2X = pos + angle*textLine.getCharAscent(logIndex);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            bottom1X = bottom2X = pos - angle*textLine.getCharDescent(logIndex);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            {</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <span class="keywordtype">int</span> logIndex = textLine.visualToLogical(caret-1);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                <span class="keywordtype">float</span> angle1 = textLine.getCharAngle(logIndex);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                <span class="keywordtype">float</span> pos1 = textLine.getCharLinePosition(logIndex)</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                                    + textLine.getCharAdvance(logIndex);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                <span class="keywordflow">if</span> (angle1 != 0) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                    pos1 += angle1 * textLine.getCharShift(logIndex);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                    top1X = pos1 + angle1*textLine.getCharAscent(logIndex);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                    bottom1X = pos1 - angle1*textLine.getCharDescent(logIndex);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                    top1X = bottom1X = pos1;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            {</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="keywordtype">int</span> logIndex = textLine.visualToLogical(caret);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                <span class="keywordtype">float</span> angle2 = textLine.getCharAngle(logIndex);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="keywordtype">float</span> pos2 = textLine.getCharLinePosition(logIndex);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="keywordflow">if</span> (angle2 != 0) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    pos2 += angle2*textLine.getCharShift(logIndex);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    top2X = pos2 + angle2*textLine.getCharAscent(logIndex);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                    bottom2X = pos2 - angle2*textLine.getCharDescent(logIndex);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                }</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                    top2X = bottom2X = pos2;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        }</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <span class="keywordtype">float</span> topX = (top1X + top2X) / 2;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="keywordtype">float</span> bottomX = (bottom1X + bottom2X) / 2;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordflow">if</span> (info == null) {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            info = <span class="keyword">new</span> <span class="keywordtype">float</span>[2];</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">if</span> (isVerticalLine) {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            info[1] = (float) ((topX - bottomX) / bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">getWidth</a>());</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            info[0] = (float) (topX + (info[1]*bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>()));</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            info[1] = (float) ((topX - bottomX) / bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">getHeight</a>());</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            info[0] = (float) (bottomX + (info[1]*bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a335123f4e295681bc62a2b7d30036979">getMaxY</a>()));</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        }</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordflow">return</span> info;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a907c4a6913f527701d946572405d0010"> 1218</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span>[] <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a907c4a6913f527701d946572405d0010">getCaretInfo</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        ensureCache();</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        checkTextHit(hit);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="keywordflow">return</span> getCaretInfoTestInternal(hit, bounds);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// this version provides extra info in the float array</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="comment">// the first two values are as above</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="comment">// the next four values are the endpoints of the caret, as computed</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// using the hit character&#39;s offset (baseline + ssoffset) and</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// natural ascent and descent.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// these  values are trimmed to the bounds where required to fit,</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="comment">// but otherwise independent of it.</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">float</span>[] getCaretInfoTestInternal(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        ensureCache();</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        checkTextHit(hit);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordtype">float</span>[] info = <span class="keyword">new</span> <span class="keywordtype">float</span>[6];</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="comment">// get old data first</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        getCaretInfo(hitToCaret(hit), bounds, info);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="comment">// then add our new data</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="keywordtype">double</span> iangle, ixbase, p1x, p1y, p2x, p2y;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordtype">int</span> charix = hit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a0faa5201829f79c4fea19b65635b2d7d">getCharIndex</a>();</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="keywordtype">boolean</span> lead = hit.isLeadingEdge();</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordtype">boolean</span> ltr = textLine.isDirectionLTR();</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordtype">boolean</span> horiz = !<a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a767f702f4ab2a34e3920fc70459cfd40">isVertical</a>();</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">if</span> (charix == -1 || charix == characterCount) {</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="comment">// !!! note: want non-shifted, baseline ascent and descent here!</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <span class="comment">// TextLine should return appropriate line metrics object for these values</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            TextLineMetrics m = textLine.getMetrics();</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="keywordtype">boolean</span> low = ltr == (charix == -1);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            iangle = 0;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <span class="keywordflow">if</span> (horiz) {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                p1x = p2x = low ? 0 : m.advance;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                p1y = -m.ascent;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                p2y = m.descent;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                p1y = p2y = low ? 0 : m.advance;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                p1x = m.descent;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                p2x = m.ascent;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            }</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            CoreMetrics thiscm = textLine.getCoreMetricsAt(charix);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            iangle = thiscm.italicAngle;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            ixbase = textLine.getCharLinePosition(charix, lead);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <span class="keywordflow">if</span> (thiscm.baselineIndex &lt; 0) {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                <span class="comment">// this is a graphic, no italics, use entire line height for caret</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                TextLineMetrics m = textLine.getMetrics();</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <span class="keywordflow">if</span> (horiz) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                    p1x = p2x = ixbase;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                    <span class="keywordflow">if</span> (thiscm.baselineIndex == <a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#a7f5374d9e2e382a926d12a1c8bc10e11">TOP_ALIGNMENT</a>) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                        p1y = -m.ascent;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                        p2y = p1y + thiscm.height;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                        p2y = m.descent;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                        p1y = p2y - thiscm.height;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                    p1y = p2y = ixbase;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                    p1x = m.descent;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                    p2x = m.ascent;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                    <span class="comment">// !!! top/bottom adjustment not implemented for vertical</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                <span class="keywordtype">float</span> bo = baselineOffsets[thiscm.baselineIndex];</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                <span class="keywordflow">if</span> (horiz) {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                    ixbase += iangle * thiscm.ssOffset;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                    p1x = ixbase + iangle * thiscm.ascent;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    p2x = ixbase - iangle * thiscm.descent;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                    p1y = bo - thiscm.ascent;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                    p2y = bo + thiscm.descent;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    ixbase -= iangle * thiscm.ssOffset;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                    p1y = ixbase + iangle * thiscm.ascent;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                    p2y = ixbase - iangle * thiscm.descent;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                    p1x = bo + thiscm.ascent;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                    p2x = bo + thiscm.descent;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        info[2] = (float)p1x;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        info[3] = (float)p1y;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        info[4] = (float)p2x;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        info[5] = (float)p2y;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="keywordflow">return</span> info;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a1f6e7a5e381b2163e72bb7bab00cb753"> 1320</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span>[] <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a1f6e7a5e381b2163e72bb7bab00cb753">getCaretInfo</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keywordflow">return</span> getCaretInfo(hit, getNaturalBounds());</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">int</span> hitToCaret(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordtype">int</span> hitIndex = hit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a0faa5201829f79c4fea19b65635b2d7d">getCharIndex</a>();</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">if</span> (hitIndex &lt; 0) {</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            <span class="keywordflow">return</span> textLine.isDirectionLTR() ? 0 : characterCount;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hitIndex &gt;= characterCount) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">return</span> textLine.isDirectionLTR() ? characterCount : 0;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="keywordtype">int</span> visIndex = textLine.logicalToVisual(hitIndex);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="keywordflow">if</span> (hit.isLeadingEdge() != textLine.isCharLTR(hitIndex)) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            ++visIndex;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">return</span> visIndex;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> caretToHit(<span class="keywordtype">int</span> caret) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keywordflow">if</span> (caret == 0 || caret == characterCount) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            <span class="keywordflow">if</span> ((caret == characterCount) == textLine.isDirectionLTR()) {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(characterCount);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(-1);</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        }</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            <span class="keywordtype">int</span> charIndex = textLine.visualToLogical(caret);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            <span class="keywordtype">boolean</span> leading = textLine.isCharLTR(charIndex);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <span class="keywordflow">return</span> leading? <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(charIndex)</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                            : <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(charIndex);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">boolean</span> caretIsValid(<span class="keywordtype">int</span> caret) {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">if</span> (caret == characterCount || caret == 0) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        }</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="keywordtype">int</span> offset = textLine.visualToLogical(caret);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keywordflow">if</span> (!textLine.isCharLTR(offset)) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            offset = textLine.visualToLogical(caret-1);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            <span class="keywordflow">if</span> (textLine.isCharLTR(offset)) {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="comment">// At this point, the leading edge of the character</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="comment">// at offset is at the given caret.</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">return</span> textLine.caretAtOffsetIsValid(offset);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad3863200c564fcc28f7c0952b1f66a49"> 1411</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad3863200c564fcc28f7c0952b1f66a49">getNextRightHit</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit) {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        ensureCache();</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        checkTextHit(hit);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <span class="keywordtype">int</span> caret = hitToCaret(hit);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="keywordflow">if</span> (caret == characterCount) {</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        }</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="keywordflow">do</span> {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            ++caret;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        } <span class="keywordflow">while</span> (!caretIsValid(caret));</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <span class="keywordflow">return</span> caretToHit(caret);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab98f2ab1ff73e684387e30acfe41d6e3"> 1442</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab98f2ab1ff73e684387e30acfe41d6e3">getNextRightHit</a>(<span class="keywordtype">int</span> offset, CaretPolicy policy) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="keywordflow">if</span> (offset &lt; 0 || offset &gt; characterCount) {</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Offset out of bounds in TextLayout.getNextRightHit()&quot;</span>);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">if</span> (policy == null) {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null CaretPolicy passed to TextLayout.getNextRightHit()&quot;</span>);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit1 = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a9d6c4c64c1d9063a29eee4f1e1b9ff32">afterOffset</a>(offset);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit2 = hit1.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6c3367b347ece08408e77451a9366c50">getOtherHit</a>();</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> nextHit = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad3863200c564fcc28f7c0952b1f66a49">getNextRightHit</a>(policy.getStrongCaret(hit1, hit2, <span class="keyword">this</span>));</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">if</span> (nextHit != null) {</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> otherHit = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3021a86a262d51c65830261b0b65ab4e">getVisualOtherHit</a>(nextHit);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            <span class="keywordflow">return</span> policy.getStrongCaret(otherHit, nextHit, <span class="keyword">this</span>);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    }</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a14140c8c9be92b0d37a5922de15cb63d"> 1479</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a14140c8c9be92b0d37a5922de15cb63d">getNextRightHit</a>(<span class="keywordtype">int</span> offset) {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad3863200c564fcc28f7c0952b1f66a49">getNextRightHit</a>(offset, DEFAULT_CARET_POLICY);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    }</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6f4462652af05462eda3929001cdf93f"> 1493</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6f4462652af05462eda3929001cdf93f">getNextLeftHit</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit) {</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        ensureCache();</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        checkTextHit(hit);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordtype">int</span> caret = hitToCaret(hit);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        <span class="keywordflow">if</span> (caret == 0) {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="keywordflow">do</span> {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            --caret;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        } <span class="keywordflow">while</span>(!caretIsValid(caret));</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordflow">return</span> caretToHit(caret);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a51830d8649694615145584a6db7ec9ef"> 1524</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a51830d8649694615145584a6db7ec9ef">getNextLeftHit</a>(<span class="keywordtype">int</span> offset, CaretPolicy policy) {</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="keywordflow">if</span> (policy == null) {</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null CaretPolicy passed to TextLayout.getNextLeftHit()&quot;</span>);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        }</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="keywordflow">if</span> (offset &lt; 0 || offset &gt; characterCount) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Offset out of bounds in TextLayout.getNextLeftHit()&quot;</span>);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit1 = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a9d6c4c64c1d9063a29eee4f1e1b9ff32">afterOffset</a>(offset);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit2 = hit1.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6c3367b347ece08408e77451a9366c50">getOtherHit</a>();</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> nextHit = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6f4462652af05462eda3929001cdf93f">getNextLeftHit</a>(policy.getStrongCaret(hit1, hit2, <span class="keyword">this</span>));</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        <span class="keywordflow">if</span> (nextHit != null) {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> otherHit = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3021a86a262d51c65830261b0b65ab4e">getVisualOtherHit</a>(nextHit);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            <span class="keywordflow">return</span> policy.getStrongCaret(otherHit, nextHit, <span class="keyword">this</span>);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    }</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div><div class="line"><a name="l01561"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a967f6e57688dc37fac1bc748abb70052"> 1561</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a967f6e57688dc37fac1bc748abb70052">getNextLeftHit</a>(<span class="keywordtype">int</span> offset) {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6f4462652af05462eda3929001cdf93f">getNextLeftHit</a>(offset, DEFAULT_CARET_POLICY);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3021a86a262d51c65830261b0b65ab4e"> 1572</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3021a86a262d51c65830261b0b65ab4e">getVisualOtherHit</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit) {</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        ensureCache();</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        checkTextHit(hit);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordtype">int</span> hitCharIndex = hit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a0faa5201829f79c4fea19b65635b2d7d">getCharIndex</a>();</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keywordtype">int</span> charIndex;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keywordtype">boolean</span> leading;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keywordflow">if</span> (hitCharIndex == -1 || hitCharIndex == characterCount) {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            <span class="keywordtype">int</span> visIndex;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            <span class="keywordflow">if</span> (textLine.isDirectionLTR() == (hitCharIndex == -1)) {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                visIndex = 0;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                visIndex = characterCount-1;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            }</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            charIndex = textLine.visualToLogical(visIndex);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            <span class="keywordflow">if</span> (textLine.isDirectionLTR() == (hitCharIndex == -1)) {</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                <span class="comment">// at left end</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                leading = textLine.isCharLTR(charIndex);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;            }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <span class="comment">// at right end</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                leading = !textLine.isCharLTR(charIndex);</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            }</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        }</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <span class="keywordtype">int</span> visIndex = textLine.logicalToVisual(hitCharIndex);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            <span class="keywordtype">boolean</span> movedToRight;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            <span class="keywordflow">if</span> (textLine.isCharLTR(hitCharIndex) == hit.isLeadingEdge()) {</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                --visIndex;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                movedToRight = <span class="keyword">false</span>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                ++visIndex;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                movedToRight = <span class="keyword">true</span>;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            <span class="keywordflow">if</span> (visIndex &gt; -1 &amp;&amp; visIndex &lt; characterCount) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                charIndex = textLine.visualToLogical(visIndex);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                leading = movedToRight == textLine.isCharLTR(charIndex);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            }</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                charIndex =</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                    (movedToRight == textLine.isDirectionLTR())? characterCount : -1;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                leading = charIndex == characterCount;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="keywordflow">return</span> leading? <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(charIndex) :</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                                <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(charIndex);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">double</span>[] getCaretPath(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="keywordtype">float</span>[] info = getCaretInfo(hit, bounds);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">double</span>[] { info[2], info[3], info[4], info[5] };</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">double</span>[] getCaretPath(<span class="keywordtype">int</span> caret, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds,</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                                  <span class="keywordtype">boolean</span> clipToBounds) {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordtype">float</span>[] info = getCaretInfo(caret, bounds, null);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="keywordtype">double</span> pos = info[0];</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <span class="keywordtype">double</span> slope = info[1];</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="keywordtype">double</span> x0, y0, x1, y1;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        <span class="keywordtype">double</span> x2 = -3141.59, y2 = -2.7; <span class="comment">// values are there to make compiler happy</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="keywordtype">double</span> left = bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>();</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keywordtype">double</span> right = left + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">getWidth</a>();</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordtype">double</span> top = bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>();</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        <span class="keywordtype">double</span> bottom = top + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">getHeight</a>();</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <span class="keywordtype">boolean</span> threePoints = <span class="keyword">false</span>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        <span class="keywordflow">if</span> (isVerticalLine) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            <span class="keywordflow">if</span> (slope &gt;= 0) {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                x0 = left;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                x1 = right;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            }</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                x1 = left;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                x0 = right;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            }</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            y0 = pos + x0 * slope;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            y1 = pos + x1 * slope;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            <span class="comment">// y0 &lt;= y1, always</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            <span class="keywordflow">if</span> (clipToBounds) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                <span class="keywordflow">if</span> (y0 &lt; top) {</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                    <span class="keywordflow">if</span> (slope &lt;= 0 || y1 &lt;= top) {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                        y0 = y1 = top;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                    }</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                        threePoints = <span class="keyword">true</span>;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                        y0 = top;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                        y2 = top;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                        x2 = x1 + (top-y1)/slope;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                        <span class="keywordflow">if</span> (y1 &gt; bottom) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                            y1 = bottom;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                        }</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                    }</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                }</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y1 &gt; bottom) {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                    <span class="keywordflow">if</span> (slope &gt;= 0 || y0 &gt;= bottom) {</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                        y0 = y1 = bottom;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                    }</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                        threePoints = <span class="keyword">true</span>;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                        y1 = bottom;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                        y2 = bottom;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                        x2 = x0 + (bottom-x1)/slope;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                    }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            }</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        }</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            <span class="keywordflow">if</span> (slope &gt;= 0) {</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                y0 = bottom;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                y1 = top;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            }</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                y1 = bottom;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                y0 = top;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            }</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;            x0 = pos - y0 * slope;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            x1 = pos - y1 * slope;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <span class="comment">// x0 &lt;= x1, always</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            <span class="keywordflow">if</span> (clipToBounds) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                <span class="keywordflow">if</span> (x0 &lt; left) {</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                    <span class="keywordflow">if</span> (slope &lt;= 0 || x1 &lt;= left) {</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                        x0 = x1 = left;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                    }</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                        threePoints = <span class="keyword">true</span>;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                        x0 = left;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                        x2 = left;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                        y2 = y1 - (left-x1)/slope;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                        <span class="keywordflow">if</span> (x1 &gt; right) {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                            x1 = right;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                        }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                    }</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x1 &gt; right) {</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                    <span class="keywordflow">if</span> (slope &gt;= 0 || x0 &gt;= right) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                        x0 = x1 = right;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                    }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                        threePoints = <span class="keyword">true</span>;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                        x1 = right;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                        x2 = right;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                        y2 = y0 - (right-x0)/slope;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                    }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <span class="keywordflow">return</span> threePoints?</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                    <span class="keyword">new</span> <span class="keywordtype">double</span>[] { x0, y0, x2, y2, x1, y1 } :</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                    <span class="keyword">new</span> <span class="keywordtype">double</span>[] { x0, y0, x1, y1 };</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    }</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> pathToShape(<span class="keywordtype">double</span>[] path, <span class="keywordtype">boolean</span> close, LayoutPathImpl lp) {</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> result = <span class="keyword">new</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>(<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ae1ae864a7dc9042d6d3631e078033786">WIND_EVEN_ODD</a>, path.length);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        result.moveTo((<span class="keywordtype">float</span>)path[0], (<span class="keywordtype">float</span>)path[1]);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt; path.length; i += 2) {</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            result.lineTo((<span class="keywordtype">float</span>)path[i], (<span class="keywordtype">float</span>)path[i+1]);</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        }</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">if</span> (close) {</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a8ac649f70e2561f6667045e0cef98043">closePath</a>();</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <span class="keywordflow">if</span> (lp != null) {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            result = (<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>)lp.mapShape(result);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    }</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aff0d8046deb37a4aee0e14933dd37b51"> 1786</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aff0d8046deb37a4aee0e14933dd37b51">getCaretShape</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        ensureCache();</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        checkTextHit(hit);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">if</span> (bounds == null) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null Rectangle2D passed to TextLayout.getCaret()&quot;</span>);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">return</span> pathToShape(getCaretPath(hit, bounds), <span class="keyword">false</span>, textLine.getLayoutPath());</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7f831c9c165b48fa14d863f57a182b0c"> 1804</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7f831c9c165b48fa14d863f57a182b0c">getCaretShape</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit) {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aff0d8046deb37a4aee0e14933dd37b51">getCaretShape</a>(hit, getNaturalBounds());</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    }</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keyword">private</span> <span class="keyword">final</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> getStrongHit(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit1, <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit2) {</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="comment">// right now we&#39;re using the following rule for strong hits:</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <span class="comment">// A hit on a character with a lower level</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <span class="comment">// is stronger than one on a character with a higher level.</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <span class="comment">// If this rule ties, the hit on the leading edge of a character wins.</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="comment">// If THIS rule ties, hit1 wins.  Both rules shouldn&#39;t tie, unless the</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <span class="comment">// infos aren&#39;t counterparts of some sort.</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        byte hit1Level = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#adef757c0101fd7a688c1abe741bae78b">getCharacterLevel</a>(hit1.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a0faa5201829f79c4fea19b65635b2d7d">getCharIndex</a>());</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        byte hit2Level = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#adef757c0101fd7a688c1abe741bae78b">getCharacterLevel</a>(hit2.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a0faa5201829f79c4fea19b65635b2d7d">getCharIndex</a>());</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="keywordflow">if</span> (hit1Level == hit2Level) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <span class="keywordflow">if</span> (hit2.isLeadingEdge() &amp;&amp; !hit1.isLeadingEdge()) {</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                <span class="keywordflow">return</span> hit2;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            }</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                <span class="keywordflow">return</span> hit1;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            }</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        }</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <span class="keywordflow">return</span> (hit1Level &lt; hit2Level)? hit1 : hit2;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        }</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    }</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#adef757c0101fd7a688c1abe741bae78b"> 1846</a></span>&#160;    <span class="keyword">public</span> byte <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#adef757c0101fd7a688c1abe741bae78b">getCharacterLevel</a>(<span class="keywordtype">int</span> index) {</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="comment">// hmm, allow indices at endpoints?  For now, yes.</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="keywordflow">if</span> (index &lt; -1 || index &gt; characterCount) {</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Index is out of range in getCharacterLevel.&quot;</span>);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        }</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        ensureCache();</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="keywordflow">if</span> (index == -1 || index == characterCount) {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;             <span class="keywordflow">return</span> (byte) (textLine.isDirectionLTR()? 0 : 1);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">return</span> textLine.getCharLevel(index);</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    }</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01872"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12bdee0cdf1090c629c8c9632988d2ab"> 1872</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a>[] <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12bdee0cdf1090c629c8c9632988d2ab">getCaretShapes</a>(<span class="keywordtype">int</span> offset, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds, CaretPolicy policy) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        ensureCache();</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">if</span> (offset &lt; 0 || offset &gt; characterCount) {</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Offset out of bounds in TextLayout.getCaretShapes()&quot;</span>);</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        }</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        <span class="keywordflow">if</span> (bounds == null) {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null Rectangle2D passed to TextLayout.getCaretShapes()&quot;</span>);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="keywordflow">if</span> (policy == null) {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null CaretPolicy passed to TextLayout.getCaretShapes()&quot;</span>);</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a>[] result = <span class="keyword">new</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a>[2];</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit = <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a9d6c4c64c1d9063a29eee4f1e1b9ff32">afterOffset</a>(offset);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        <span class="keywordtype">int</span> hitCaret = hitToCaret(hit);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        LayoutPathImpl lp = textLine.getLayoutPath();</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> hitShape = pathToShape(getCaretPath(hit, bounds), <span class="keyword">false</span>, lp);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> otherHit = hit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6c3367b347ece08408e77451a9366c50">getOtherHit</a>();</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <span class="keywordtype">int</span> otherCaret = hitToCaret(otherHit);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        <span class="keywordflow">if</span> (hitCaret == otherCaret) {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            result[0] = hitShape;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        }</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        <span class="keywordflow">else</span> { <span class="comment">// more than one caret</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> otherShape = pathToShape(getCaretPath(otherHit, bounds), <span class="keyword">false</span>, lp);</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> strongHit = policy.getStrongCaret(hit, otherHit, <span class="keyword">this</span>);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            <span class="keywordtype">boolean</span> hitIsStrong = strongHit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6784d89f013474107b0dc5a65a21dcec">equals</a>(hit);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            <span class="keywordflow">if</span> (hitIsStrong) {<span class="comment">// then other is weak</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                result[0] = hitShape;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                result[1] = otherShape;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                result[0] = otherShape;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                result[1] = hitShape;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01932"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a993781feaeaf72dfde79db3e8ac1e764"> 1932</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a>[] <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a993781feaeaf72dfde79db3e8ac1e764">getCaretShapes</a>(<span class="keywordtype">int</span> offset, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="comment">// {sfb} parameter checking is done in overloaded version</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12bdee0cdf1090c629c8c9632988d2ab">getCaretShapes</a>(offset, bounds, DEFAULT_CARET_POLICY);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    }</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ace06aee1dfb42d932d4895478f3ca9c1"> 1947</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a>[] <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ace06aee1dfb42d932d4895478f3ca9c1">getCaretShapes</a>(<span class="keywordtype">int</span> offset) {</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        <span class="comment">// {sfb} parameter checking is done in overloaded version</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12bdee0cdf1090c629c8c9632988d2ab">getCaretShapes</a>(offset, getNaturalBounds(), DEFAULT_CARET_POLICY);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    }</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="comment">// A utility to return a path enclosing the given path</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="comment">// Path0 must be left or top of path1</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="comment">// {jbr} no assumptions about size of path0, path1 anymore.</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> boundingShape(<span class="keywordtype">double</span>[] path0, <span class="keywordtype">double</span>[] path1) {</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <span class="comment">// Really, we want the path to be a convex hull around all of the</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        <span class="comment">// points in path0 and path1.  But we can get by with less than</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        <span class="comment">// that.  We do need to prevent the two segments which</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="comment">// join path0 to path1 from crossing each other.  So, if we</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="comment">// traverse path0 from top to bottom, we&#39;ll traverse path1 from</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="comment">// bottom to top (and vice versa).</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> result = pathToShape(path0, <span class="keyword">false</span>, null);</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <span class="keywordtype">boolean</span> sameDirection;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <span class="keywordflow">if</span> (isVerticalLine) {</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            sameDirection = (path0[1] &gt; path0[path0.length-1]) ==</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                            (path1[1] &gt; path1[path1.length-1]);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;            sameDirection = (path0[0] &gt; path0[path0.length-2]) ==</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                            (path1[0] &gt; path1[path1.length-2]);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        }</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        <span class="keywordtype">int</span> start;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="keywordtype">int</span> limit;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="keywordtype">int</span> increment;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <span class="keywordflow">if</span> (sameDirection) {</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            start = path1.length-2;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;            limit = -2;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            increment = -2;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        }</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            start = 0;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            limit = path1.length;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;            increment = 2;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        }</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = start; i != limit; i += increment) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            result.lineTo((<span class="keywordtype">float</span>)path1[i], (<span class="keywordtype">float</span>)path1[i+1]);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a8ac649f70e2561f6667045e0cef98043">closePath</a>();</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    }</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="comment">// A utility to convert a pair of carets into a bounding path</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="comment">// {jbr} Shape is never outside of bounds.</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> caretBoundingShape(<span class="keywordtype">int</span> caret0,</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                                           <span class="keywordtype">int</span> caret1,</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                                           <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <span class="keywordflow">if</span> (caret0 &gt; caret1) {</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordtype">int</span> temp = caret0;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            caret0 = caret1;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            caret1 = temp;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        }</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        <span class="keywordflow">return</span> boundingShape(getCaretPath(caret0, bounds, <span class="keyword">true</span>),</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                             getCaretPath(caret1, bounds, <span class="keyword">true</span>));</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment">     * A utility to return the path bounding the area to the left (top) of the</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment">     * layout.</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment">     * Shape is never outside of bounds.</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> leftShape(<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        <span class="keywordtype">double</span>[] path0;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        <span class="keywordflow">if</span> (isVerticalLine) {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            path0 = <span class="keyword">new</span> <span class="keywordtype">double</span>[] { bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>(), bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>(),</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                                       bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">getWidth</a>(),</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                                       bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>() };</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;            path0 = <span class="keyword">new</span> <span class="keywordtype">double</span>[] { bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>(),</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                                       bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">getHeight</a>(),</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                                       bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>(), bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>() };</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        }</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordtype">double</span>[] path1 = getCaretPath(0, bounds, <span class="keyword">true</span>);</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        <span class="keywordflow">return</span> boundingShape(path0, path1);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="comment">     * A utility to return the path bounding the area to the right (bottom) of</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment">     * the layout.</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keyword">private</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> rightShape(<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <span class="keywordtype">double</span>[] path1;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <span class="keywordflow">if</span> (isVerticalLine) {</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            path1 = <span class="keyword">new</span> <span class="keywordtype">double</span>[] {</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>(),</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">getHeight</a>(),</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">getWidth</a>(),</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">getHeight</a>()</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;            };</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;            path1 = <span class="keyword">new</span> <span class="keywordtype">double</span>[] {</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">getWidth</a>(),</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">getHeight</a>(),</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">getX</a>() + bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">getWidth</a>(),</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">getY</a>()</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            };</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <span class="keywordtype">double</span>[] path0 = getCaretPath(characterCount, bounds, <span class="keyword">true</span>);</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="keywordflow">return</span> boundingShape(path0, path1);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    }</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02076"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a986b6ce828e5f4740a62a3a3a50a860a"> 2076</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">int</span>[] <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a986b6ce828e5f4740a62a3a3a50a860a">getLogicalRangesForVisualSelection</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> firstEndpoint,</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                                                    <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> secondEndpoint) {</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        ensureCache();</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        checkTextHit(firstEndpoint);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        checkTextHit(secondEndpoint);</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="comment">// !!! probably want to optimize for all LTR text</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="keywordtype">boolean</span>[] included = <span class="keyword">new</span> <span class="keywordtype">boolean</span>[characterCount];</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="keywordtype">int</span> startIndex = hitToCaret(firstEndpoint);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <span class="keywordtype">int</span> limitIndex = hitToCaret(secondEndpoint);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        <span class="keywordflow">if</span> (startIndex &gt; limitIndex) {</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="keywordtype">int</span> t = startIndex;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            startIndex = limitIndex;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;            limitIndex = t;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        }</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment">         * now we have the visual indexes of the glyphs at the start and limit</span></div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">         * of the selection range walk through runs marking characters that</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment">         * were included in the visual range there is probably a more efficient</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">         * way to do this, but this ought to work, so hey</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordflow">if</span> (startIndex &lt; limitIndex) {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            <span class="keywordtype">int</span> visIndex = startIndex;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            <span class="keywordflow">while</span> (visIndex &lt; limitIndex) {</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                included[textLine.visualToLogical(visIndex)] = <span class="keyword">true</span>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                ++visIndex;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            }</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        }</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="comment">         * count how many runs we have, ought to be one or two, but perhaps</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment">         * things are especially weird</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        <span class="keywordtype">boolean</span> inrun = <span class="keyword">false</span>;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; characterCount; i++) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            <span class="keywordflow">if</span> (included[i] != inrun) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                inrun = !inrun;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                <span class="keywordflow">if</span> (inrun) {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                    count++;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            }</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <span class="keywordtype">int</span>[] ranges = <span class="keyword">new</span> <span class="keywordtype">int</span>[count * 2];</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        count = 0;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        inrun = <span class="keyword">false</span>;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; characterCount; i++) {</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            <span class="keywordflow">if</span> (included[i] != inrun) {</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                ranges[count++] = i;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                inrun = !inrun;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            }</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        }</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        <span class="keywordflow">if</span> (inrun) {</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            ranges[count++] = characterCount;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        }</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        <span class="keywordflow">return</span> ranges;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02178"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab80e1eaa169aaf8da6fe2cfa7870e122"> 2178</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab80e1eaa169aaf8da6fe2cfa7870e122">getVisualHighlightShape</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> firstEndpoint,</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                                        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> secondEndpoint,</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                                        <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds)</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    {</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        ensureCache();</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        checkTextHit(firstEndpoint);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        checkTextHit(secondEndpoint);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <span class="keywordflow">if</span>(bounds == null) {</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null Rectangle2D passed to TextLayout.getVisualHighlightShape()&quot;</span>);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> result = <span class="keyword">new</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>(<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ae1ae864a7dc9042d6d3631e078033786">WIND_EVEN_ODD</a>);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        <span class="keywordtype">int</span> firstCaret = hitToCaret(firstEndpoint);</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        <span class="keywordtype">int</span> secondCaret = hitToCaret(secondEndpoint);</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">append</a>(caretBoundingShape(firstCaret, secondCaret, bounds),</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                      <span class="keyword">false</span>);</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        <span class="keywordflow">if</span> (firstCaret == 0 || secondCaret == 0) {</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> ls = leftShape(bounds);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;            <span class="keywordflow">if</span> (!ls.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ad1c4c24fe3c834c69a2f9b6a5a6f472a">getBounds</a>().<a class="code" href="classjava_1_1awt_1_1_rectangle.html#a4c705be42c79a5d6fbf006091caf573e">isEmpty</a>())</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">append</a>(ls, <span class="keyword">false</span>);</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        <span class="keywordflow">if</span> (firstCaret == characterCount || secondCaret == characterCount) {</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> rs = rightShape(bounds);</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            <span class="keywordflow">if</span> (!rs.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ad1c4c24fe3c834c69a2f9b6a5a6f472a">getBounds</a>().<a class="code" href="classjava_1_1awt_1_1_rectangle.html#a4c705be42c79a5d6fbf006091caf573e">isEmpty</a>()) {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">append</a>(rs, <span class="keyword">false</span>);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;            }</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        }</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        LayoutPathImpl lp = textLine.getLayoutPath();</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        <span class="keywordflow">if</span> (lp != null) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            result = (<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>)lp.mapShape(result); <span class="comment">// dlf cast safe?</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        <span class="keywordflow">return</span>  result;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    }</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02230"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa46a201cb9b082c6040c3348e4975996"> 2230</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa46a201cb9b082c6040c3348e4975996">getVisualHighlightShape</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> firstEndpoint,</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                                             <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> secondEndpoint) {</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab80e1eaa169aaf8da6fe2cfa7870e122">getVisualHighlightShape</a>(firstEndpoint, secondEndpoint, getNaturalBounds());</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    }</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7f13c52c4faca92d804027906633da8b"> 2274</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7f13c52c4faca92d804027906633da8b">getLogicalHighlightShape</a>(<span class="keywordtype">int</span> firstEndpoint,</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                                         <span class="keywordtype">int</span> secondEndpoint,</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                                         <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        <span class="keywordflow">if</span> (bounds == null) {</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null Rectangle2D passed to TextLayout.getLogicalHighlightShape()&quot;</span>);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        }</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        ensureCache();</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        <span class="keywordflow">if</span> (firstEndpoint &gt; secondEndpoint) {</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;            <span class="keywordtype">int</span> t = firstEndpoint;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            firstEndpoint = secondEndpoint;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            secondEndpoint = t;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        }</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <span class="keywordflow">if</span>(firstEndpoint &lt; 0 || secondEndpoint &gt; characterCount) {</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Range is invalid in TextLayout.getLogicalHighlightShape()&quot;</span>);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        }</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> result = <span class="keyword">new</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>(<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ae1ae864a7dc9042d6d3631e078033786">WIND_EVEN_ODD</a>);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <span class="keywordtype">int</span>[] carets = <span class="keyword">new</span> <span class="keywordtype">int</span>[10]; <span class="comment">// would this ever not handle all cases?</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="keywordflow">if</span> (firstEndpoint &lt; secondEndpoint) {</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;            <span class="keywordtype">int</span> logIndex = firstEndpoint;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            <span class="keywordflow">do</span> {</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                carets[count++] = hitToCaret(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(logIndex));</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                <span class="keywordtype">boolean</span> ltr = textLine.isCharLTR(logIndex);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                <span class="keywordflow">do</span> {</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                    logIndex++;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                } <span class="keywordflow">while</span> (logIndex &lt; secondEndpoint &amp;&amp; textLine.isCharLTR(logIndex) == ltr);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                <span class="keywordtype">int</span> hitCh = logIndex;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                carets[count++] = hitToCaret(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(hitCh - 1));</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                <span class="keywordflow">if</span> (count == carets.length) {</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                    <span class="keywordtype">int</span>[] temp = <span class="keyword">new</span> <span class="keywordtype">int</span>[carets.length + 10];</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                    System.arraycopy(carets, 0, temp, 0, count);</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                    carets = temp;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            } <span class="keywordflow">while</span> (logIndex &lt; secondEndpoint);</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        }</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            count = 2;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            carets[0] = carets[1] = hitToCaret(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(firstEndpoint));</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        }</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        <span class="comment">// now create paths for pairs of carets</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i += 2) {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">append</a>(caretBoundingShape(carets[i], carets[i+1], bounds),</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                          <span class="keyword">false</span>);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        }</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <span class="keywordflow">if</span> (firstEndpoint != secondEndpoint) {</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            <span class="keywordflow">if</span> ((textLine.isDirectionLTR() &amp;&amp; firstEndpoint == 0) || (!textLine.isDirectionLTR() &amp;&amp;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                                                                      secondEndpoint == characterCount)) {</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> ls = leftShape(bounds);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                <span class="keywordflow">if</span> (!ls.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ad1c4c24fe3c834c69a2f9b6a5a6f472a">getBounds</a>().<a class="code" href="classjava_1_1awt_1_1_rectangle.html#a4c705be42c79a5d6fbf006091caf573e">isEmpty</a>()) {</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                    result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">append</a>(ls, <span class="keyword">false</span>);</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                }</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            }</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            <span class="keywordflow">if</span> ((textLine.isDirectionLTR() &amp;&amp; secondEndpoint == characterCount) ||</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                (!textLine.isDirectionLTR() &amp;&amp; firstEndpoint == 0)) {</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> rs = rightShape(bounds);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                <span class="keywordflow">if</span> (!rs.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ad1c4c24fe3c834c69a2f9b6a5a6f472a">getBounds</a>().<a class="code" href="classjava_1_1awt_1_1_rectangle.html#a4c705be42c79a5d6fbf006091caf573e">isEmpty</a>()) {</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                    result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">append</a>(rs, <span class="keyword">false</span>);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                }</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            }</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        }</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        LayoutPathImpl lp = textLine.getLayoutPath();</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        <span class="keywordflow">if</span> (lp != null) {</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            result = (<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>)lp.mapShape(result); <span class="comment">// dlf cast safe?</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        }</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    }</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#acca89281d76f2a313e7e8746c6456fac"> 2370</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#acca89281d76f2a313e7e8746c6456fac">getLogicalHighlightShape</a>(<span class="keywordtype">int</span> firstEndpoint, <span class="keywordtype">int</span> secondEndpoint) {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7f13c52c4faca92d804027906633da8b">getLogicalHighlightShape</a>(firstEndpoint, secondEndpoint, getNaturalBounds());</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    }</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div><div class="line"><a name="l02386"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a113e668ec7ee38817348e5130488cf9d"> 2386</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a113e668ec7ee38817348e5130488cf9d">getBlackBoxBounds</a>(<span class="keywordtype">int</span> firstEndpoint, <span class="keywordtype">int</span> secondEndpoint) {</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        ensureCache();</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        <span class="keywordflow">if</span> (firstEndpoint &gt; secondEndpoint) {</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;            <span class="keywordtype">int</span> t = firstEndpoint;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            firstEndpoint = secondEndpoint;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            secondEndpoint = t;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        }</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        <span class="keywordflow">if</span> (firstEndpoint &lt; 0 || secondEndpoint &gt; characterCount) {</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Invalid range passed to TextLayout.getBlackBoxBounds()&quot;</span>);</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        }</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">         * return an area that consists of the bounding boxes of all the</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">         * characters from firstEndpoint to limit</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a> result = <span class="keyword">new</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>(<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ae77a7619db955a56a3a9f8c69e0e99b0">WIND_NON_ZERO</a>);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <span class="keywordflow">if</span> (firstEndpoint &lt; characterCount) {</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> logIndex = firstEndpoint;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                        logIndex &lt; secondEndpoint;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                        logIndex++) {</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> r = textLine.getCharBounds(logIndex);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                <span class="keywordflow">if</span> (!r.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a698b49860207b5876f999f8d4e4540d9">isEmpty</a>()) {</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                    result.<a class="code" href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">append</a>(r, <span class="keyword">false</span>);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                }</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            }</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        }</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        <span class="keywordflow">if</span> (dx != 0 || dy != 0) {</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;            <a class="code" href="classjava_1_1awt_1_1geom_1_1_affine_transform.html">AffineTransform</a> tx = <a class="code" href="classjava_1_1awt_1_1geom_1_1_affine_transform.html">AffineTransform</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_affine_transform.html#a45dddceee1b08ad033e4536bf9a2cefc">getTranslateInstance</a>(dx, dy);</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;            result = (<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>)tx.<a class="code" href="classjava_1_1awt_1_1geom_1_1_affine_transform.html#a3b617cc61be9bf8e8c226d0c9500e9f8">createTransformedShape</a>(result);</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        }</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        LayoutPathImpl lp = textLine.getLayoutPath();</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <span class="keywordflow">if</span> (lp != null) {</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;            result = (<a class="code" href="classjava_1_1awt_1_1geom_1_1_general_path.html">GeneralPath</a>)lp.mapShape(result);</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        }</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="comment">//return new Highlight(result, false);</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    }</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">float</span> caretToPointDistance(<span class="keywordtype">float</span>[] caretInfo, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y) {</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="comment">// distanceOffBaseline is negative if you&#39;re &#39;above&#39; baseline</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keywordtype">float</span> lineDistance = isVerticalLine? y : x;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="keywordtype">float</span> distanceOffBaseline = isVerticalLine? -x : y;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <span class="keywordflow">return</span> lineDistance - caretInfo[0] +</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            (distanceOffBaseline*caretInfo[1]);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    }</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;</div><div class="line"><a name="l02465"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab5f7f7ff44144b756c7402fca878dece"> 2465</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab5f7f7ff44144b756c7402fca878dece">hitTestChar</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">Rectangle2D</a> bounds) {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <span class="comment">// check boundary conditions</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        LayoutPathImpl lp = textLine.getLayoutPath();</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        <span class="keywordtype">boolean</span> prev = <span class="keyword">false</span>;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        <span class="keywordflow">if</span> (lp != null) {</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;            <a class="code" href="classjava_1_1awt_1_1geom_1_1_point2_d.html">Point2D</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_point2_d_1_1_float.html">Float</a> pt = <span class="keyword">new</span> <a class="code" href="classjava_1_1awt_1_1geom_1_1_point2_d.html">Point2D</a>.<a class="code" href="classjava_1_1awt_1_1geom_1_1_point2_d_1_1_float.html">Float</a>(x, y);</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;            prev = lp.pointToPath(pt, pt);</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;            x = pt.x;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            y = pt.y;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        }</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a767f702f4ab2a34e3920fc70459cfd40">isVertical</a>()) {</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            <span class="keywordflow">if</span> (y &lt; bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a76352e506286ac680b1b6355a5a0dc7b">getMinY</a>()) {</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(0);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &gt;= bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a335123f4e295681bc62a2b7d30036979">getMaxY</a>()) {</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(characterCount-1);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            }</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;            <span class="keywordflow">if</span> (x &lt; bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aa28830c5e9a2bc35b8c2b674cf3f2ccb">getMinX</a>()) {</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9e4e2ab362d5c392cbf81fda7ecaf4c3">isLeftToRight</a>() ? <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(0) : <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(characterCount-1);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt;= bounds.<a class="code" href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a7b45178a0b085e449b9a90e1dfe75f28">getMaxX</a>()) {</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9e4e2ab362d5c392cbf81fda7ecaf4c3">isLeftToRight</a>() ? <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(characterCount-1) : <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(0);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;            }</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        }</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        <span class="comment">// revised hit test</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <span class="comment">// the original seems too complex and fails miserably with italic offsets</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        <span class="comment">// the natural tendency is to move towards the character you want to hit</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        <span class="comment">// so we&#39;ll just measure distance to the center of each character&#39;s visual</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <span class="comment">// bounds, pick the closest one, then see which side of the character&#39;s</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="comment">// center line (italic) the point is on.</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        <span class="comment">// this tends to make it easier to hit narrow characters, which can be a</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <span class="comment">// bit odd if you&#39;re visually over an adjacent wide character. this makes</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        <span class="comment">// a difference with bidi, so perhaps i need to revisit this yet again.</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="keywordtype">double</span> distance = Double.MAX_VALUE;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        <span class="keywordtype">int</span> index = 0;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <span class="keywordtype">int</span> trail = -1;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        CoreMetrics lcm = null;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        <span class="keywordtype">float</span> icx = 0, icy = 0, ia = 0, cy = 0, dya = 0, ydsq = 0;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; characterCount; ++i) {</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;            <span class="keywordflow">if</span> (!textLine.caretAtOffsetIsValid(i)) {</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            }</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;            <span class="keywordflow">if</span> (trail == -1) {</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                trail = i;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            }</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            CoreMetrics cm = textLine.getCoreMetricsAt(i);</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            <span class="keywordflow">if</span> (cm != lcm) {</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                lcm = cm;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                <span class="comment">// just work around baseline mess for now</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                <span class="keywordflow">if</span> (cm.baselineIndex == <a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#a7f5374d9e2e382a926d12a1c8bc10e11">TOP_ALIGNMENT</a>) {</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                    cy = -(textLine.getMetrics().ascent - cm.ascent) + cm.ssOffset;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cm.baselineIndex == <a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#ae145693bf5a305a4e2148625f3e9966f">BOTTOM_ALIGNMENT</a>) {</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                    cy = textLine.getMetrics().descent - cm.descent + cm.ssOffset;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                    cy = cm.effectiveBaselineOffset(baselineOffsets) + cm.ssOffset;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                }</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                <span class="keywordtype">float</span> dy = (cm.descent - cm.ascent) / 2 - cy;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                dya = dy * cm.italicAngle;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                cy += dy;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                ydsq = (cy - y)*(cy - y);</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;            }</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;            <span class="keywordtype">float</span> cx = textLine.getCharXPosition(i);</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;            <span class="keywordtype">float</span> ca = textLine.getCharAdvance(i);</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;            <span class="keywordtype">float</span> dx = ca / 2;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;            cx += dx - dya;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            <span class="comment">// proximity in x (along baseline) is two times as important as proximity in y</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            <span class="keywordtype">double</span> nd = Math.sqrt(4*(cx - x)*(cx - x) + ydsq);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;            <span class="keywordflow">if</span> (nd &lt; distance) {</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                distance = nd;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                index = i;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                trail = -1;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                icx = cx; icy = cy; ia = cm.italicAngle;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            }</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;        }</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        <span class="keywordtype">boolean</span> left = x &lt; icx - (y - icy) * ia;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <span class="keywordtype">boolean</span> leading = textLine.isCharLTR(index) == left;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keywordflow">if</span> (trail == -1) {</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            trail = characterCount;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        }</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> result = leading ? <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">leading</a>(index) :</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">trailing</a>(trail-1);</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    }</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02566"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#acf6806c75879bf7545451ef727a75999"> 2566</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#acf6806c75879bf7545451ef727a75999">hitTestChar</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y) {</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab5f7f7ff44144b756c7402fca878dece">hitTestChar</a>(x, y, getNaturalBounds());</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    }</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;</div><div class="line"><a name="l02575"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6551d93d29155baf45f006eeb66bebab"> 2575</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6551d93d29155baf45f006eeb66bebab">hashCode</a>() {</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        <span class="keywordflow">if</span> (hashCodeCache == 0) {</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            ensureCache();</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            hashCodeCache = textLine.hashCode();</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;        }</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        <span class="keywordflow">return</span> hashCodeCache;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    }</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;</div><div class="line"><a name="l02592"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9832a0fc4a2ae966e0cb408dfe36d2e3"> 2592</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9832a0fc4a2ae966e0cb408dfe36d2e3">equals</a>(Object obj) {</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        <span class="keywordflow">return</span> (obj instanceof <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html">TextLayout</a>) &amp;&amp; <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9832a0fc4a2ae966e0cb408dfe36d2e3">equals</a>((TextLayout)obj);</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    }</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02605"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7c9611ec3cc21779be62cd2163425ea5"> 2605</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7c9611ec3cc21779be62cd2163425ea5">equals</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html">TextLayout</a> rhs) {</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        <span class="keywordflow">if</span> (rhs == null) {</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        }</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        <span class="keywordflow">if</span> (rhs == <span class="keyword">this</span>) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        }</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        ensureCache();</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <span class="keywordflow">return</span> textLine.equals(rhs.textLine);</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    }</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;</div><div class="line"><a name="l02623"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a096283d79d889ddaa38570ade29acff8"> 2623</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1lang_1_1_string.html">String</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a096283d79d889ddaa38570ade29acff8">toString</a>() {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        ensureCache();</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        <span class="keywordflow">return</span> textLine.toString();</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;     }</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02641"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac2cd8ae8bd1adfc7355c1302d630c72b"> 2641</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac2cd8ae8bd1adfc7355c1302d630c72b">draw</a>(<a class="code" href="classjava_1_1awt_1_1_graphics2_d.html">Graphics2D</a> g2, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y) {</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        <span class="keywordflow">if</span> (g2 == null) {</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Null Graphics2D passed to TextLayout.draw()&quot;</span>);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        }</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        textLine.draw(g2, x - dx, y - dy);</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    }</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    TextLine getTextLineForTesting() {</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <span class="keywordflow">return</span> textLine;</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    }</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">int</span> sameBaselineUpTo(<a class="code" href="classjava_1_1awt_1_1_font.html">Font</a> font, <span class="keywordtype">char</span>[] text,</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                                        <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> limit) {</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;        <span class="comment">// current implementation doesn&#39;t support multiple baselines</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        <span class="keywordflow">return</span> limit;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment">        byte bl = font.getBaselineFor(text[start++]);</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment">        while (start &lt; limit &amp;&amp; font.getBaselineFor(text[start]) == bl) {</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment">            ++start;</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="comment">        }</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment">        return start;</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="comment">        */</span></div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    }</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keyword">static</span> byte getBaselineFromGraphic(<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a> graphic) {</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        byte alignment = (byte) graphic.<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#abdb44e46bf99ce2eb8803c3b31c3cbb2">getAlignment</a>();</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <span class="keywordflow">if</span> (alignment == <a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#ae145693bf5a305a4e2148625f3e9966f">BOTTOM_ALIGNMENT</a> ||</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                alignment == <a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#a7f5374d9e2e382a926d12a1c8bc10e11">TOP_ALIGNMENT</a>) {</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;            <span class="keywordflow">return</span> (byte)<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">GraphicAttribute</a>.<a class="code" href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#a323d26d2455dd5ff10c5961c95aa7876">ROMAN_BASELINE</a>;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;        }</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            <span class="keywordflow">return</span> alignment;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        }</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    }</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;</div><div class="line"><a name="l02699"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a2627c9b0eccdf300ec0c9f90a2c234ef"> 2699</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a2627c9b0eccdf300ec0c9f90a2c234ef">getOutline</a>(<a class="code" href="classjava_1_1awt_1_1geom_1_1_affine_transform.html">AffineTransform</a> tx) {</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        ensureCache();</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;        <a class="code" href="interfacejava_1_1awt_1_1_shape.html">Shape</a> result = textLine.getOutline(tx);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        LayoutPathImpl lp = textLine.getLayoutPath();</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        <span class="keywordflow">if</span> (lp != null) {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;            result = lp.mapShape(result);</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        }</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    }</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div><div class="line"><a name="l02715"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12f21788a279ab1e13fd31922f8dce9d"> 2715</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_layout_path.html">LayoutPath</a> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12f21788a279ab1e13fd31922f8dce9d">getLayoutPath</a>() {</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;        <span class="keywordflow">return</span> textLine.getLayoutPath();</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    }</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;</div><div class="line"><a name="l02734"></a><span class="lineno"><a class="line" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a444a75c01d91380f92ad47232d493aa8"> 2734</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classjava_1_1awt_1_1font_1_1_text_layout.html#a444a75c01d91380f92ad47232d493aa8">hitToPoint</a>(<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">TextHitInfo</a> hit, <a class="code" href="classjava_1_1awt_1_1geom_1_1_point2_d.html">Point2D</a> point) {</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        <span class="keywordflow">if</span> (hit == null || point == null) {</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> NullPointerException((hit == null ? <span class="stringliteral">&quot;hit&quot;</span> : <span class="stringliteral">&quot;point&quot;</span>) +</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                                           <span class="stringliteral">&quot; can&#39;t be null&quot;</span>);</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        }</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        ensureCache();</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;        checkTextHit(hit);</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keywordtype">float</span> adv = 0;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        <span class="keywordtype">float</span> off = 0;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        <span class="keywordtype">int</span> ix = hit.<a class="code" href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a0faa5201829f79c4fea19b65635b2d7d">getCharIndex</a>();</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        <span class="keywordtype">boolean</span> leading = hit.isLeadingEdge();</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        <span class="keywordtype">boolean</span> ltr;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        <span class="keywordflow">if</span> (ix == -1 || ix == textLine.characterCount()) {</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;            ltr = textLine.isDirectionLTR();</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;            adv = (ltr == (ix == -1)) ? 0 : lineMetrics.advance;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            ltr = textLine.isCharLTR(ix);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;            adv = textLine.getCharLinePosition(ix, leading);</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;            off = textLine.getCharYPosition(ix);</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;        }</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        point.<a class="code" href="classjava_1_1awt_1_1geom_1_1_point2_d.html#a19dfdc5809419ee0359fe23b2620c15c">setLocation</a>(adv, off);</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <a class="code" href="classjava_1_1awt_1_1font_1_1_layout_path.html">LayoutPath</a> lp = textLine.getLayoutPath();</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <span class="keywordflow">if</span> (lp != null) {</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            lp.<a class="code" href="classjava_1_1awt_1_1font_1_1_layout_path.html#a562dfcbdc4b48f1fa3b13eb0fbb3b785">pathToPoint</a>(point, ltr != leading, point);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;        }</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    }</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;}</div><div class="ttc" id="classjava_1_1text_1_1_attributed_character_iterator_1_1_attribute_html"><div class="ttname"><a href="classjava_1_1text_1_1_attributed_character_iterator_1_1_attribute.html">java.text.AttributedCharacterIterator.Attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="_attributed_character_iterator_8java_source.html#l00089">AttributedCharacterIterator.java:89</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_line_1_1_text_line_metrics_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_line_1_1_text_line_metrics.html">java.awt.font.TextLine.TextLineMetrics</a></div><div class="ttdef"><b>Definition:</b> <a href="_text_line_8java_source.html#l00069">TextLine.java:69</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_aff0d8046deb37a4aee0e14933dd37b51"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#aff0d8046deb37a4aee0e14933dd37b51">java.awt.font.TextLayout.getCaretShape</a></div><div class="ttdeci">Shape getCaretShape(TextHitInfo hit, Rectangle2D bounds)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01786">TextLayout.java:1786</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_aa21d00a062938655d7d3512e114fe3ae"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa21d00a062938655d7d3512e114fe3ae">java.awt.font.TextLayout.TextLayout</a></div><div class="ttdeci">TextLayout(String string, Font font, FontRenderContext frc)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00372">TextLayout.java:372</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_a78f49640d818424f8ec52e08e223a9d7"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a78f49640d818424f8ec52e08e223a9d7">java.awt.geom.RectangularShape.getWidth</a></div><div class="ttdeci">abstract double getWidth()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a12bdee0cdf1090c629c8c9632988d2ab"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12bdee0cdf1090c629c8c9632988d2ab">java.awt.font.TextLayout.getCaretShapes</a></div><div class="ttdeci">Shape[] getCaretShapes(int offset, Rectangle2D bounds, CaretPolicy policy)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01872">TextLayout.java:1872</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a7f13c52c4faca92d804027906633da8b"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7f13c52c4faca92d804027906633da8b">java.awt.font.TextLayout.getLogicalHighlightShape</a></div><div class="ttdeci">Shape getLogicalHighlightShape(int firstEndpoint, int secondEndpoint, Rectangle2D bounds)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02274">TextLayout.java:2274</a></div></div>
<div class="ttc" id="interfacejava_1_1util_1_1_map_html_a95ef3b583f050b93703b324f12f5981e"><div class="ttname"><a href="interfacejava_1_1util_1_1_map.html#a95ef3b583f050b93703b324f12f5981e">java.util.Map.get</a></div><div class="ttdeci">V get(Object key)</div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_attributed_character_iterator_html_adddef349281b6d62701d37831026d4ce"><div class="ttname"><a href="interfacejava_1_1text_1_1_attributed_character_iterator.html#adddef349281b6d62701d37831026d4ce">java.text.AttributedCharacterIterator.getRunLimit</a></div><div class="ttdeci">int getRunLimit()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a444a75c01d91380f92ad47232d493aa8"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a444a75c01d91380f92ad47232d493aa8">java.awt.font.TextLayout.hitToPoint</a></div><div class="ttdeci">void hitToPoint(TextHitInfo hit, Point2D point)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02734">TextLayout.java:2734</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_aa46a201cb9b082c6040c3348e4975996"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa46a201cb9b082c6040c3348e4975996">java.awt.font.TextLayout.getVisualHighlightShape</a></div><div class="ttdeci">Shape getVisualHighlightShape(TextHitInfo firstEndpoint, TextHitInfo secondEndpoint)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02230">TextLayout.java:2230</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_aa61022aebcaa03e600af0764bc6ebeaa"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa61022aebcaa03e600af0764bc6ebeaa">java.awt.font.TextLayout.getVisibleAdvance</a></div><div class="ttdeci">float getVisibleAdvance()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00905">TextLayout.java:905</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ac2cd8ae8bd1adfc7355c1302d630c72b"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac2cd8ae8bd1adfc7355c1302d630c72b">java.awt.font.TextLayout.draw</a></div><div class="ttdeci">void draw(Graphics2D g2, float x, float y)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02641">TextLayout.java:2641</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_aa99e1e6fd1645a0bbe971f176049d999"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#aa99e1e6fd1645a0bbe971f176049d999">java.awt.font.TextLayout.getPixelBounds</a></div><div class="ttdeci">Rectangle getPixelBounds(FontRenderContext frc, float x, float y)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01013">TextLayout.java:1013</a></div></div>
<div class="ttc" id="classjava_1_1text_1_1_attributed_string_html"><div class="ttname"><a href="classjava_1_1text_1_1_attributed_string.html">java.text.AttributedString</a></div><div class="ttdef"><b>Definition:</b> <a href="_attributed_string_8java_source.html#l00050">AttributedString.java:50</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1_font_html_a44a0afc5bcd0b4734d3b8d6816bc43e0"><div class="ttname"><a href="classjava_1_1awt_1_1_font.html#a44a0afc5bcd0b4734d3b8d6816bc43e0">java.awt.Font.getLineMetrics</a></div><div class="ttdeci">LineMetrics getLineMetrics(String str, FontRenderContext frc)</div><div class="ttdef"><b>Definition:</b> <a href="_font_8java_source.html#l02245">Font.java:2245</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_aee619f055d82364c3f66380431992cd3"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#aee619f055d82364c3f66380431992cd3">java.awt.font.TextLayout.TextLayout</a></div><div class="ttdeci">TextLayout(String string, Map&lt;?extends Attribute,?&gt; attributes, FontRenderContext frc)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00420">TextLayout.java:420</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_a7b45178a0b085e449b9a90e1dfe75f28"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a7b45178a0b085e449b9a90e1dfe75f28">java.awt.geom.RectangularShape.getMaxX</a></div><div class="ttdeci">double getMaxX()</div><div class="ttdef"><b>Definition:</b> <a href="_rectangular_shape_8java_source.html#l00125">RectangularShape.java:125</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_noninvertible_transform_exception_html"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_noninvertible_transform_exception.html">java.awt.geom.NoninvertibleTransformException</a></div><div class="ttdef"><b>Definition:</b> <a href="_noninvertible_transform_exception_8java_source.html#l00035">NoninvertibleTransformException.java:35</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_path2_d_html_ae77a7619db955a56a3a9f8c69e0e99b0"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ae77a7619db955a56a3a9f8c69e0e99b0">java.awt.geom.Path2D.WIND_NON_ZERO</a></div><div class="ttdeci">static final int WIND_NON_ZERO</div><div class="ttdef"><b>Definition:</b> <a href="_path2_d_8java_source.html#l00087">Path2D.java:87</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_attribute_html_ab7f7fefef358e6253d51daf6fbd185db"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_attribute.html#ab7f7fefef358e6253d51daf6fbd185db">java.awt.font.TextAttribute.CHAR_REPLACEMENT</a></div><div class="ttdeci">static final TextAttribute CHAR_REPLACEMENT</div><div class="ttdef"><b>Definition:</b> <a href="_text_attribute_8java_source.html#l00700">TextAttribute.java:700</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_character_iterator_html"><div class="ttname"><a href="interfacejava_1_1text_1_1_character_iterator.html">java.text.CharacterIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="_character_iterator_8java_source.html#l00105">CharacterIterator.java:105</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_path2_d_html_ad1c4c24fe3c834c69a2f9b6a5a6f472a"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ad1c4c24fe3c834c69a2f9b6a5a6f472a">java.awt.geom.Path2D.getBounds</a></div><div class="ttdeci">final Rectangle getBounds()</div><div class="ttdef"><b>Definition:</b> <a href="_path2_d_8java_source.html#l02057">Path2D.java:2057</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_graphic_attribute_html_a7f5374d9e2e382a926d12a1c8bc10e11"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#a7f5374d9e2e382a926d12a1c8bc10e11">java.awt.font.GraphicAttribute.TOP_ALIGNMENT</a></div><div class="ttdeci">static final int TOP_ALIGNMENT</div><div class="ttdef"><b>Definition:</b> <a href="_graphic_attribute_8java_source.html#l00071">GraphicAttribute.java:71</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_character_iterator_html_a0bd210026ea1673b6ae682af1f0ac866"><div class="ttname"><a href="interfacejava_1_1text_1_1_character_iterator.html#a0bd210026ea1673b6ae682af1f0ac866">java.text.CharacterIterator.first</a></div><div class="ttdeci">char first()</div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_character_iterator_html_ae7e4083eb65e0f470ccdf402107739c1"><div class="ttname"><a href="interfacejava_1_1text_1_1_character_iterator.html#ae7e4083eb65e0f470ccdf402107739c1">java.text.CharacterIterator.getIndex</a></div><div class="ttdeci">int getIndex()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_font_render_context_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_font_render_context.html">java.awt.font.FontRenderContext</a></div><div class="ttdef"><b>Definition:</b> <a href="_font_render_context_8java_source.html#l00066">FontRenderContext.java:66</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a23eed8c23b6b6bcf31ea962a72d0c5c6"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a23eed8c23b6b6bcf31ea962a72d0c5c6">java.awt.font.TextLayout.getAscent</a></div><div class="ttdeci">float getAscent()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00921">TextLayout.java:921</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a967f6e57688dc37fac1bc748abb70052"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a967f6e57688dc37fac1bc748abb70052">java.awt.font.TextLayout.getNextLeftHit</a></div><div class="ttdeci">TextHitInfo getNextLeftHit(int offset)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01561">TextLayout.java:1561</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html_a77cad379bfda02d0f8de54e9b6513d0a"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a77cad379bfda02d0f8de54e9b6513d0a">java.awt.font.TextHitInfo.trailing</a></div><div class="ttdeci">static TextHitInfo trailing(int charIndex)</div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00194">TextHitInfo.java:194</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a767f702f4ab2a34e3920fc70459cfd40"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a767f702f4ab2a34e3920fc70459cfd40">java.awt.font.TextLayout.isVertical</a></div><div class="ttdeci">boolean isVertical()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01042">TextLayout.java:1042</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a113e668ec7ee38817348e5130488cf9d"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a113e668ec7ee38817348e5130488cf9d">java.awt.font.TextLayout.getBlackBoxBounds</a></div><div class="ttdeci">Shape getBlackBoxBounds(int firstEndpoint, int secondEndpoint)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02386">TextLayout.java:2386</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1_rectangle_html_a4c705be42c79a5d6fbf006091caf573e"><div class="ttname"><a href="classjava_1_1awt_1_1_rectangle.html#a4c705be42c79a5d6fbf006091caf573e">java.awt.Rectangle.isEmpty</a></div><div class="ttdeci">boolean isEmpty()</div><div class="ttdef"><b>Definition:</b> <a href="_rectangle_8java_source.html#l01122">Rectangle.java:1122</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_path2_d_html_a8ac649f70e2561f6667045e0cef98043"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a8ac649f70e2561f6667045e0cef98043">java.awt.geom.Path2D.closePath</a></div><div class="ttdeci">final synchronized void closePath()</div><div class="ttdef"><b>Definition:</b> <a href="_path2_d_8java_source.html#l01874">Path2D.java:1874</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a14140c8c9be92b0d37a5922de15cb63d"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a14140c8c9be92b0d37a5922de15cb63d">java.awt.font.TextLayout.getNextRightHit</a></div><div class="ttdeci">TextHitInfo getNextRightHit(int offset)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01479">TextLayout.java:1479</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a23ff5e94d0f44ab0aad87a87355af7d0"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a23ff5e94d0f44ab0aad87a87355af7d0">java.awt.font.TextLayout.getAdvance</a></div><div class="ttdeci">float getAdvance()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00893">TextLayout.java:893</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html">java.awt.font.TextHitInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00088">TextHitInfo.java:88</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_attribute_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_attribute.html">java.awt.font.TextAttribute</a></div><div class="ttdef"><b>Definition:</b> <a href="_text_attribute_8java_source.html#l00255">TextAttribute.java:255</a></div></div>
<div class="ttc" id="classjava_1_1util_1_1_hashtable_html"><div class="ttname"><a href="classjava_1_1util_1_1_hashtable.html">java.util.Hashtable</a></div><div class="ttdef"><b>Definition:</b> <a href="_hashtable_8java_source.html#l00130">Hashtable.java:130</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_affine_transform_html_a3b617cc61be9bf8e8c226d0c9500e9f8"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_affine_transform.html#a3b617cc61be9bf8e8c226d0c9500e9f8">java.awt.geom.AffineTransform.createTransformedShape</a></div><div class="ttdeci">Shape createTransformedShape(Shape pSrc)</div><div class="ttdef"><b>Definition:</b> <a href="_affine_transform_8java_source.html#l03825">AffineTransform.java:3825</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_graphic_attribute_html_a323d26d2455dd5ff10c5961c95aa7876"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#a323d26d2455dd5ff10c5961c95aa7876">java.awt.font.GraphicAttribute.ROMAN_BASELINE</a></div><div class="ttdeci">static final int ROMAN_BASELINE</div><div class="ttdef"><b>Definition:</b> <a href="_graphic_attribute_8java_source.html#l00081">GraphicAttribute.java:81</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_layout_path_html_a562dfcbdc4b48f1fa3b13eb0fbb3b785"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_layout_path.html#a562dfcbdc4b48f1fa3b13eb0fbb3b785">java.awt.font.LayoutPath.pathToPoint</a></div><div class="ttdeci">abstract void pathToPoint(Point2D location, boolean preceding, Point2D point)</div></div>
<div class="ttc" id="namespacejava_1_1text_html"><div class="ttname"><a href="namespacejava_1_1text.html">java.text</a></div><div class="ttdef"><b>Definition:</b> <a href="text_2_annotation_8java_source.html#l00026">Annotation.java:26</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html_a3af9fbb8e803e3b44953fb59bb1d78e4"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a3af9fbb8e803e3b44953fb59bb1d78e4">java.awt.font.TextHitInfo.leading</a></div><div class="ttdeci">static TextHitInfo leading(int charIndex)</div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00183">TextHitInfo.java:183</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a9ddb5792c28b3c1b50d109a04c6de90f"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9ddb5792c28b3c1b50d109a04c6de90f">java.awt.font.TextLayout.DEFAULT_CARET_POLICY</a></div><div class="ttdeci">static final CaretPolicy DEFAULT_CARET_POLICY</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00353">TextLayout.java:353</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a06727d2d0ac42515f4a67253d977dff0"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a06727d2d0ac42515f4a67253d977dff0">java.awt.font.TextLayout.clone</a></div><div class="ttdeci">Object clone()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00748">TextLayout.java:748</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ad5643097cd961dd936b8c3da2727aff8"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad5643097cd961dd936b8c3da2727aff8">java.awt.font.TextLayout.getBounds</a></div><div class="ttdeci">Rectangle2D getBounds()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00977">TextLayout.java:977</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1_rectangle_html"><div class="ttname"><a href="classjava_1_1awt_1_1_rectangle.html">java.awt.Rectangle</a></div><div class="ttdef"><b>Definition:</b> <a href="_rectangle_8java_source.html#l00119">Rectangle.java:119</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a986b6ce828e5f4740a62a3a3a50a860a"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a986b6ce828e5f4740a62a3a3a50a860a">java.awt.font.TextLayout.getLogicalRangesForVisualSelection</a></div><div class="ttdeci">int[] getLogicalRangesForVisualSelection(TextHitInfo firstEndpoint, TextHitInfo secondEndpoint)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02076">TextLayout.java:2076</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ad3863200c564fcc28f7c0952b1f66a49"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad3863200c564fcc28f7c0952b1f66a49">java.awt.font.TextLayout.getNextRightHit</a></div><div class="ttdeci">TextHitInfo getNextRightHit(TextHitInfo hit)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01411">TextLayout.java:1411</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html_a0faa5201829f79c4fea19b65635b2d7d"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a0faa5201829f79c4fea19b65635b2d7d">java.awt.font.TextHitInfo.getCharIndex</a></div><div class="ttdeci">int getCharIndex()</div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00107">TextHitInfo.java:107</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a1f6e7a5e381b2163e72bb7bab00cb753"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a1f6e7a5e381b2163e72bb7bab00cb753">java.awt.font.TextLayout.getCaretInfo</a></div><div class="ttdeci">float[] getCaretInfo(TextHitInfo hit)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01320">TextLayout.java:1320</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1_graphics2_d_html"><div class="ttname"><a href="classjava_1_1awt_1_1_graphics2_d.html">java.awt.Graphics2D</a></div><div class="ttdef"><b>Definition:</b> <a href="_graphics2_d_8java_source.html#l00407">Graphics2D.java:407</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a7f831c9c165b48fa14d863f57a182b0c"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7f831c9c165b48fa14d863f57a182b0c">java.awt.font.TextLayout.getCaretShape</a></div><div class="ttdeci">Shape getCaretShape(TextHitInfo hit)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01804">TextLayout.java:1804</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_layout_path_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_layout_path.html">java.awt.font.LayoutPath</a></div><div class="ttdef"><b>Definition:</b> <a href="_layout_path_8java_source.html#l00043">LayoutPath.java:43</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a993781feaeaf72dfde79db3e8ac1e764"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a993781feaeaf72dfde79db3e8ac1e764">java.awt.font.TextLayout.getCaretShapes</a></div><div class="ttdeci">Shape[] getCaretShapes(int offset, Rectangle2D bounds)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01932">TextLayout.java:1932</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_attributed_character_iterator_html"><div class="ttname"><a href="interfacejava_1_1text_1_1_attributed_character_iterator.html">java.text.AttributedCharacterIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="_attributed_character_iterator_8java_source.html#l00079">AttributedCharacterIterator.java:79</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html_a9d6c4c64c1d9063a29eee4f1e1b9ff32"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a9d6c4c64c1d9063a29eee4f1e1b9ff32">java.awt.font.TextHitInfo.afterOffset</a></div><div class="ttdeci">static TextHitInfo afterOffset(int offset)</div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00216">TextHitInfo.java:216</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a51830d8649694615145584a6db7ec9ef"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a51830d8649694615145584a6db7ec9ef">java.awt.font.TextLayout.getNextLeftHit</a></div><div class="ttdeci">TextHitInfo getNextLeftHit(int offset, CaretPolicy policy)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01524">TextLayout.java:1524</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a3021a86a262d51c65830261b0b65ab4e"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3021a86a262d51c65830261b0b65ab4e">java.awt.font.TextLayout.getVisualOtherHit</a></div><div class="ttdeci">TextHitInfo getVisualOtherHit(TextHitInfo hit)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01572">TextLayout.java:1572</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a9e4e2ab362d5c392cbf81fda7ecaf4c3"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9e4e2ab362d5c392cbf81fda7ecaf4c3">java.awt.font.TextLayout.isLeftToRight</a></div><div class="ttdeci">boolean isLeftToRight()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01033">TextLayout.java:1033</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_acca89281d76f2a313e7e8746c6456fac"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#acca89281d76f2a313e7e8746c6456fac">java.awt.font.TextLayout.getLogicalHighlightShape</a></div><div class="ttdeci">Shape getLogicalHighlightShape(int firstEndpoint, int secondEndpoint)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02370">TextLayout.java:2370</a></div></div>
<div class="ttc" id="namespacejava_1_1awt_1_1font_html"><div class="ttname"><a href="namespacejava_1_1awt_1_1font.html">java.awt.font</a></div><div class="ttdef"><b>Definition:</b> <a href="_char_array_iterator_8java_source.html#l00026">CharArrayIterator.java:26</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_general_path_html"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_general_path.html">java.awt.geom.GeneralPath</a></div><div class="ttdef"><b>Definition:</b> <a href="_general_path_8java_source.html#l00051">GeneralPath.java:51</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_attribute_html_ac498ac25519f5f36ba61973a73b476b3"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_attribute.html#ac498ac25519f5f36ba61973a73b476b3">java.awt.font.TextAttribute.FAMILY</a></div><div class="ttdeci">static final TextAttribute FAMILY</div><div class="ttdef"><b>Definition:</b> <a href="_text_attribute_8java_source.html#l00327">TextAttribute.java:327</a></div></div>
<div class="ttc" id="interfacejava_1_1util_1_1_map_html"><div class="ttname"><a href="interfacejava_1_1util_1_1_map.html">java.util.Map</a></div><div class="ttdef"><b>Definition:</b> <a href="util_2_map_8java_source.html#l00129">Map.java:129</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_adef757c0101fd7a688c1abe741bae78b"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#adef757c0101fd7a688c1abe741bae78b">java.awt.font.TextLayout.getCharacterLevel</a></div><div class="ttdeci">byte getCharacterLevel(int index)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01846">TextLayout.java:1846</a></div></div>
<div class="ttc" id="interfacejava_1_1awt_1_1_shape_html"><div class="ttname"><a href="interfacejava_1_1awt_1_1_shape.html">java.awt.Shape</a></div><div class="ttdef"><b>Definition:</b> <a href="_shape_8java_source.html#l00078">Shape.java:78</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_line_metrics_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_line_metrics.html">java.awt.font.LineMetrics</a></div><div class="ttdef"><b>Definition:</b> <a href="_line_metrics_8java_source.html#l00044">LineMetrics.java:44</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_line_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_line.html">java.awt.font.TextLine</a></div><div class="ttdef"><b>Definition:</b> <a href="_text_line_8java_source.html#l00067">TextLine.java:67</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_path2_d_html_a82bb8009013dcf14a68bc0672a5cfd1e"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_path2_d.html#a82bb8009013dcf14a68bc0672a5cfd1e">java.awt.geom.Path2D.append</a></div><div class="ttdeci">final void append(Shape s, boolean connect)</div><div class="ttdef"><b>Definition:</b> <a href="_path2_d_8java_source.html#l01903">Path2D.java:1903</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_attribute_html_adb9108c1f8534008a05857685c751f6f"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_attribute.html#adb9108c1f8534008a05857685c751f6f">java.awt.font.TextAttribute.FONT</a></div><div class="ttdeci">static final TextAttribute FONT</div><div class="ttdef"><b>Definition:</b> <a href="_text_attribute_8java_source.html#l00676">TextAttribute.java:676</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_graphic_attribute_html_abdb44e46bf99ce2eb8803c3b31c3cbb2"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#abdb44e46bf99ce2eb8803c3b31c3cbb2">java.awt.font.GraphicAttribute.getAlignment</a></div><div class="ttdeci">final int getAlignment()</div><div class="ttdef"><b>Definition:</b> <a href="_graphic_attribute_8java_source.html#l00192">GraphicAttribute.java:192</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a6f4462652af05462eda3929001cdf93f"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6f4462652af05462eda3929001cdf93f">java.awt.font.TextLayout.getNextLeftHit</a></div><div class="ttdeci">TextHitInfo getNextLeftHit(TextHitInfo hit)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01493">TextLayout.java:1493</a></div></div>
<div class="ttc" id="namespacejava_1_1util_html"><div class="ttname"><a href="namespacejava_1_1util.html">java.util</a></div><div class="ttdef"><b>Definition:</b> <a href="_abstract_collection_8java_source.html#l00026">AbstractCollection.java:26</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html_a6c3367b347ece08408e77451a9366c50"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6c3367b347ece08408e77451a9366c50">java.awt.font.TextHitInfo.getOtherHit</a></div><div class="ttdeci">TextHitInfo getOtherHit()</div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00226">TextHitInfo.java:226</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ac3578c95ab18da395f7d08279778b2b0"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac3578c95ab18da395f7d08279778b2b0">java.awt.font.TextLayout.getLeading</a></div><div class="ttdeci">float getLeading()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00962">TextLayout.java:962</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ab5f7f7ff44144b756c7402fca878dece"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab5f7f7ff44144b756c7402fca878dece">java.awt.font.TextLayout.hitTestChar</a></div><div class="ttdeci">TextHitInfo hitTestChar(float x, float y, Rectangle2D bounds)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02465">TextLayout.java:2465</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a907c4a6913f527701d946572405d0010"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a907c4a6913f527701d946572405d0010">java.awt.font.TextLayout.getCaretInfo</a></div><div class="ttdeci">float[] getCaretInfo(TextHitInfo hit, Rectangle2D bounds)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01218">TextLayout.java:1218</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_a3d0fc12c78e4d148efad50658585c9e7"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a3d0fc12c78e4d148efad50658585c9e7">java.awt.geom.RectangularShape.getX</a></div><div class="ttdeci">abstract double getX()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_point2_d_html_a19dfdc5809419ee0359fe23b2620c15c"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_point2_d.html#a19dfdc5809419ee0359fe23b2620c15c">java.awt.geom.Point2D.setLocation</a></div><div class="ttdeci">abstract void setLocation(double x, double y)</div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a3cc596fa77ea04758ddb8bfa2a377159"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a3cc596fa77ea04758ddb8bfa2a377159">java.awt.font.TextLayout.TextLayout</a></div><div class="ttdeci">TextLayout(AttributedCharacterIterator text, FontRenderContext frc)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00504">TextLayout.java:504</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_aaa5888bead43b1882dde2a13b1211ae6"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aaa5888bead43b1882dde2a13b1211ae6">java.awt.geom.RectangularShape.getY</a></div><div class="ttdeci">abstract double getY()</div></div>
<div class="ttc" id="classjava_1_1text_1_1_attributed_string_html_a51305a940f056f7429f5f055b9827fbf"><div class="ttname"><a href="classjava_1_1text_1_1_attributed_string.html#a51305a940f056f7429f5f055b9827fbf">java.text.AttributedString.getIterator</a></div><div class="ttdeci">AttributedCharacterIterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="_attributed_string_8java_source.html#l00559">AttributedString.java:559</a></div></div>
<div class="ttc" id="namespacejava_1_1awt_1_1geom_html"><div class="ttname"><a href="namespacejava_1_1awt_1_1geom.html">java.awt.geom</a></div><div class="ttdef"><b>Definition:</b> <a href="_affine_transform_8java_source.html#l00026">AffineTransform.java:26</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_character_iterator_html_aebfed7edbfce2219c4446aaab47a580a"><div class="ttname"><a href="interfacejava_1_1text_1_1_character_iterator.html#aebfed7edbfce2219c4446aaab47a580a">java.text.CharacterIterator.getBeginIndex</a></div><div class="ttdeci">int getBeginIndex()</div></div>
<div class="ttc" id="classjava_1_1util_1_1_hash_map_html"><div class="ttname"><a href="classjava_1_1util_1_1_hash_map.html">java.util.HashMap</a></div><div class="ttdef"><b>Definition:</b> <a href="_hash_map_8java_source.html#l00137">HashMap.java:137</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ab80e1eaa169aaf8da6fe2cfa7870e122"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab80e1eaa169aaf8da6fe2cfa7870e122">java.awt.font.TextLayout.getVisualHighlightShape</a></div><div class="ttdeci">Shape getVisualHighlightShape(TextHitInfo firstEndpoint, TextHitInfo secondEndpoint, Rectangle2D bounds)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02178">TextLayout.java:2178</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_acf6806c75879bf7545451ef727a75999"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#acf6806c75879bf7545451ef727a75999">java.awt.font.TextLayout.hitTestChar</a></div><div class="ttdeci">TextHitInfo hitTestChar(float x, float y)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02566">TextLayout.java:2566</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_point2_d_html"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_point2_d.html">java.awt.geom.Point2D</a></div><div class="ttdef"><b>Definition:</b> <a href="_point2_d_8java_source.html#l00042">Point2D.java:42</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_character_iterator_html_a5c8566b35e43a9ee2804ad84afaa0549"><div class="ttname"><a href="interfacejava_1_1text_1_1_character_iterator.html#a5c8566b35e43a9ee2804ad84afaa0549">java.text.CharacterIterator.DONE</a></div><div class="ttdeci">static final char DONE</div><div class="ttdef"><b>Definition:</b> <a href="_character_iterator_8java_source.html#l00113">CharacterIterator.java:113</a></div></div>
<div class="ttc" id="namespacejava_html"><div class="ttname"><a href="namespacejava.html">java</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_point2_d_1_1_float_html"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_point2_d_1_1_float.html">java.awt.geom.Point2D.Float</a></div><div class="ttdef"><b>Definition:</b> <a href="_point2_d_8java_source.html#l00049">Point2D.java:49</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_character_iterator_html_a81eb10d90805a5a8c8dd4e01708a2688"><div class="ttname"><a href="interfacejava_1_1text_1_1_character_iterator.html#a81eb10d90805a5a8c8dd4e01708a2688">java.text.CharacterIterator.next</a></div><div class="ttdeci">char next()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a7c9611ec3cc21779be62cd2163425ea5"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7c9611ec3cc21779be62cd2163425ea5">java.awt.font.TextLayout.equals</a></div><div class="ttdeci">boolean equals(TextLayout rhs)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02605">TextLayout.java:2605</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_a76352e506286ac680b1b6355a5a0dc7b"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a76352e506286ac680b1b6355a5a0dc7b">java.awt.geom.RectangularShape.getMinY</a></div><div class="ttdeci">double getMinY()</div><div class="ttdef"><b>Definition:</b> <a href="_rectangular_shape_8java_source.html#l00113">RectangularShape.java:113</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html">java.awt.font.TextLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00239">TextLayout.java:239</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_aa28830c5e9a2bc35b8c2b674cf3f2ccb"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#aa28830c5e9a2bc35b8c2b674cf3f2ccb">java.awt.geom.RectangularShape.getMinX</a></div><div class="ttdeci">double getMinX()</div><div class="ttdef"><b>Definition:</b> <a href="_rectangular_shape_8java_source.html#l00101">RectangularShape.java:101</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_path2_d_html_ae1ae864a7dc9042d6d3631e078033786"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_path2_d.html#ae1ae864a7dc9042d6d3631e078033786">java.awt.geom.Path2D.WIND_EVEN_ODD</a></div><div class="ttdeci">static final int WIND_EVEN_ODD</div><div class="ttdef"><b>Definition:</b> <a href="_path2_d_8java_source.html#l00078">Path2D.java:78</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a7533fa56f5fa7167640cb790637f09fc"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a7533fa56f5fa7167640cb790637f09fc">java.awt.font.TextLayout.handleJustify</a></div><div class="ttdeci">void handleJustify(float justificationWidth)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00846">TextLayout.java:846</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a096283d79d889ddaa38570ade29acff8"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a096283d79d889ddaa38570ade29acff8">java.awt.font.TextLayout.toString</a></div><div class="ttdeci">String toString()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02623">TextLayout.java:2623</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_affine_transform_html"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_affine_transform.html">java.awt.geom.AffineTransform</a></div><div class="ttdef"><b>Definition:</b> <a href="_affine_transform_8java_source.html#l00114">AffineTransform.java:114</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_a335123f4e295681bc62a2b7d30036979"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a335123f4e295681bc62a2b7d30036979">java.awt.geom.RectangularShape.getMaxY</a></div><div class="ttdeci">double getMaxY()</div><div class="ttdef"><b>Definition:</b> <a href="_rectangular_shape_8java_source.html#l00137">RectangularShape.java:137</a></div></div>
<div class="ttc" id="classjava_1_1lang_1_1_string_html"><div class="ttname"><a href="classjava_1_1lang_1_1_string.html">java.lang.String</a></div><div class="ttdef"><b>Definition:</b> <a href="_string_8java_source.html#l00111">String.java:111</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a6551d93d29155baf45f006eeb66bebab"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a6551d93d29155baf45f006eeb66bebab">java.awt.font.TextLayout.hashCode</a></div><div class="ttdeci">int hashCode()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02575">TextLayout.java:2575</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_afb3158683ed7f216c64a2569efb3fee3"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#afb3158683ed7f216c64a2569efb3fee3">java.awt.geom.RectangularShape.getHeight</a></div><div class="ttdeci">abstract double getHeight()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1_font_html_aeaca749bccbf531520308a585744e5ea"><div class="ttname"><a href="classjava_1_1awt_1_1_font.html#aeaca749bccbf531520308a585744e5ea">java.awt.Font.canDisplayUpTo</a></div><div class="ttdeci">int canDisplayUpTo(String str)</div><div class="ttdef"><b>Definition:</b> <a href="_font_8java_source.html#l02021">Font.java:2021</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ace06aee1dfb42d932d4895478f3ca9c1"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ace06aee1dfb42d932d4895478f3ca9c1">java.awt.font.TextLayout.getCaretShapes</a></div><div class="ttdeci">Shape[] getCaretShapes(int offset)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01947">TextLayout.java:1947</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_abd6d63dc61f3960db631ea2da38d888b"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#abd6d63dc61f3960db631ea2da38d888b">java.awt.font.TextLayout.getJustifiedLayout</a></div><div class="ttdeci">TextLayout getJustifiedLayout(float justificationWidth)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00799">TextLayout.java:799</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a2627c9b0eccdf300ec0c9f90a2c234ef"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a2627c9b0eccdf300ec0c9f90a2c234ef">java.awt.font.TextLayout.getOutline</a></div><div class="ttdeci">Shape getOutline(AffineTransform tx)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02699">TextLayout.java:2699</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ab98f2ab1ff73e684387e30acfe41d6e3"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ab98f2ab1ff73e684387e30acfe41d6e3">java.awt.font.TextLayout.getNextRightHit</a></div><div class="ttdeci">TextHitInfo getNextRightHit(int offset, CaretPolicy policy)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01442">TextLayout.java:1442</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_numeric_shaper_html_a447782789d0396a0dda57ebd264ac3ca"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_numeric_shaper.html#a447782789d0396a0dda57ebd264ac3ca">java.awt.font.NumericShaper.shape</a></div><div class="ttdeci">void shape(char[] text, int start, int count)</div><div class="ttdef"><b>Definition:</b> <a href="_numeric_shaper_8java_source.html#l01100">NumericShaper.java:1100</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ad4e6db501aa193aa8cd10433fa62f3f2"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ad4e6db501aa193aa8cd10433fa62f3f2">java.awt.font.TextLayout.getCharacterCount</a></div><div class="ttdeci">int getCharacterCount()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l01051">TextLayout.java:1051</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_graphic_attribute_html_ae145693bf5a305a4e2148625f3e9966f"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html#ae145693bf5a305a4e2148625f3e9966f">java.awt.font.GraphicAttribute.BOTTOM_ALIGNMENT</a></div><div class="ttdeci">static final int BOTTOM_ALIGNMENT</div><div class="ttdef"><b>Definition:</b> <a href="_graphic_attribute_8java_source.html#l00076">GraphicAttribute.java:76</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangle2_d_1_1_float_html"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangle2_d_1_1_float.html">java.awt.geom.Rectangle2D.Float</a></div><div class="ttdef"><b>Definition:</b> <a href="_rectangle2_d_8java_source.html#l00077">Rectangle2D.java:77</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_ac87b670efe0ec54aee0c4d827b56cb84"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#ac87b670efe0ec54aee0c4d827b56cb84">java.awt.font.TextLayout.getDescent</a></div><div class="ttdeci">float getDescent()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00936">TextLayout.java:936</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a9d88e0471f062215e120158f2c9655a6"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9d88e0471f062215e120158f2c9655a6">java.awt.font.TextLayout.getBaseline</a></div><div class="ttdeci">byte getBaseline()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00861">TextLayout.java:861</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangle2_d_html_afffd42d7b18c8efb6353d7de441f0c33"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html#afffd42d7b18c8efb6353d7de441f0c33">java.awt.geom.Rectangle2D.setRect</a></div><div class="ttdeci">abstract void setRect(double x, double y, double w, double h)</div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangle2_d_html"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangle2_d.html">java.awt.geom.Rectangle2D</a></div><div class="ttdef"><b>Definition:</b> <a href="_rectangle2_d_8java_source.html#l00043">Rectangle2D.java:43</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_attributed_character_iterator_html_af35957f68885b3dcb7bb341fa6f317d1"><div class="ttname"><a href="interfacejava_1_1text_1_1_attributed_character_iterator.html#af35957f68885b3dcb7bb341fa6f317d1">java.text.AttributedCharacterIterator.getAttributes</a></div><div class="ttdeci">Map&lt; Attribute, Object &gt; getAttributes()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1_color_html"><div class="ttname"><a href="classjava_1_1awt_1_1_color.html">java.awt.Color</a></div><div class="ttdef"><b>Definition:</b> <a href="_color_8java_source.html#l00060">Color.java:60</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html_a6784d89f013474107b0dc5a65a21dcec"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6784d89f013474107b0dc5a65a21dcec">java.awt.font.TextHitInfo.equals</a></div><div class="ttdeci">boolean equals(Object obj)</div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00147">TextHitInfo.java:147</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1_font_html_abacf3273de09212942a6162904240b77"><div class="ttname"><a href="classjava_1_1awt_1_1_font.html#abacf3273de09212942a6162904240b77">java.awt.Font.getAttributes</a></div><div class="ttdeci">Map&lt; TextAttribute,?&gt; getAttributes()</div><div class="ttdef"><b>Definition:</b> <a href="_font_8java_source.html#l01814">Font.java:1814</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1_font_html"><div class="ttname"><a href="classjava_1_1awt_1_1_font.html">java.awt.Font</a></div><div class="ttdef"><b>Definition:</b> <a href="_font_8java_source.html#l00224">Font.java:224</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_hit_info_html_a6c4dd997197ed8143fe6ca2425834a62"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_hit_info.html#a6c4dd997197ed8143fe6ca2425834a62">java.awt.font.TextHitInfo.getInsertionIndex</a></div><div class="ttdeci">int getInsertionIndex()</div><div class="ttdef"><b>Definition:</b> <a href="_text_hit_info_8java_source.html#l00127">TextHitInfo.java:127</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_numeric_shaper_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_numeric_shaper.html">java.awt.font.NumericShaper</a></div><div class="ttdef"><b>Definition:</b> <a href="_numeric_shaper_8java_source.html#l00136">NumericShaper.java:136</a></div></div>
<div class="ttc" id="namespacejava_1_1awt_html"><div class="ttname"><a href="namespacejava_1_1awt.html">java.awt</a></div><div class="ttdef"><b>Definition:</b> <a href="_active_event_8java_source.html#l00026">ActiveEvent.java:26</a></div></div>
<div class="ttc" id="classjava_1_1text_1_1_attributed_string_html_af5237317e62a49fe7d83b74f9b4ac692"><div class="ttname"><a href="classjava_1_1text_1_1_attributed_string.html#af5237317e62a49fe7d83b74f9b4ac692">java.text.AttributedString.addAttribute</a></div><div class="ttdeci">void addAttribute(Attribute attribute, Object value)</div><div class="ttdef"><b>Definition:</b> <a href="_attributed_string_8java_source.html#l00317">AttributedString.java:317</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1_font_html_afc6ba99b63545891962e1cf2c53956b2"><div class="ttname"><a href="classjava_1_1awt_1_1_font.html#afc6ba99b63545891962e1cf2c53956b2">java.awt.Font.getFont</a></div><div class="ttdeci">static Font getFont(Map&lt;?extends Attribute,?&gt; attributes)</div><div class="ttdef"><b>Definition:</b> <a href="_font_8java_source.html#l00784">Font.java:784</a></div></div>
<div class="ttc" id="interfacejava_1_1text_1_1_character_iterator_html_a152227aeab58b996acbc68e903ade696"><div class="ttname"><a href="interfacejava_1_1text_1_1_character_iterator.html#a152227aeab58b996acbc68e903ade696">java.text.CharacterIterator.getEndIndex</a></div><div class="ttdeci">int getEndIndex()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a12f21788a279ab1e13fd31922f8dce9d"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a12f21788a279ab1e13fd31922f8dce9d">java.awt.font.TextLayout.getLayoutPath</a></div><div class="ttdeci">LayoutPath getLayoutPath()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02715">TextLayout.java:2715</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_affine_transform_html_a45dddceee1b08ad033e4536bf9a2cefc"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_affine_transform.html#a45dddceee1b08ad033e4536bf9a2cefc">java.awt.geom.AffineTransform.getTranslateInstance</a></div><div class="ttdeci">static AffineTransform getTranslateInstance(double tx, double ty)</div><div class="ttdef"><b>Definition:</b> <a href="_affine_transform_8java_source.html#l00615">AffineTransform.java:615</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1geom_1_1_rectangular_shape_html_a698b49860207b5876f999f8d4e4540d9"><div class="ttname"><a href="classjava_1_1awt_1_1geom_1_1_rectangular_shape.html#a698b49860207b5876f999f8d4e4540d9">java.awt.geom.RectangularShape.isEmpty</a></div><div class="ttdeci">abstract boolean isEmpty()</div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a5ab216c086cb3cf23b511888b0dc7176"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a5ab216c086cb3cf23b511888b0dc7176">java.awt.font.TextLayout.getBaselineOffsets</a></div><div class="ttdeci">float[] getBaselineOffsets()</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l00880">TextLayout.java:880</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_text_layout_html_a9832a0fc4a2ae966e0cb408dfe36d2e3"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_text_layout.html#a9832a0fc4a2ae966e0cb408dfe36d2e3">java.awt.font.TextLayout.equals</a></div><div class="ttdeci">boolean equals(Object obj)</div><div class="ttdef"><b>Definition:</b> <a href="_text_layout_8java_source.html#l02592">TextLayout.java:2592</a></div></div>
<div class="ttc" id="classjava_1_1awt_1_1font_1_1_graphic_attribute_html"><div class="ttname"><a href="classjava_1_1awt_1_1font_1_1_graphic_attribute.html">java.awt.font.GraphicAttribute</a></div><div class="ttdef"><b>Definition:</b> <a href="_graphic_attribute_8java_source.html#l00064">GraphicAttribute.java:64</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
