<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>openjdk8_analysis: java.lang.invoke.SwitchPoint Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openjdk8_analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejava.html">java</a></li><li class="navelem"><a class="el" href="namespacejava_1_1lang.html">lang</a></li><li class="navelem"><a class="el" href="namespacejava_1_1lang_1_1invoke.html">invoke</a></li><li class="navelem"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html">SwitchPoint</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classjava_1_1lang_1_1invoke_1_1_switch_point-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">java.lang.invoke.SwitchPoint Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for java.lang.invoke.SwitchPoint:</div>
<div class="dyncontent">
<div class="center"><img src="classjava_1_1lang_1_1invoke_1_1_switch_point__coll__graph.png" border="0" usemap="#java_8lang_8invoke_8_switch_point_coll__map" alt="Collaboration graph"/></div>
<map name="java_8lang_8invoke_8_switch_point_coll__map" id="java_8lang_8invoke_8_switch_point_coll__map">
<area shape="rect" id="node2" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html" title="java.lang.invoke.MethodHandle" alt="" coords="825,81,1024,108"/>
<area shape="rect" id="node4" href="classjava_1_1lang_1_1_object.html" title="java.lang.Object" alt="" coords="1205,347,1319,373"/>
<area shape="rect" id="node6" href="interfacejava_1_1lang_1_1reflect_1_1_member.html" title="java.lang.reflect.Member" alt="" coords="456,332,619,359"/>
<area shape="rect" id="node7" href="interfacejava_1_1lang_1_1_cloneable.html" title="java.lang.Cloneable" alt="" coords="471,383,604,409"/>
<area shape="rect" id="node8" href="classjava_1_1lang_1_1_string.html" title="java.lang.String" alt="" coords="482,447,593,473"/>
<area shape="rect" id="node9" href="interfacejava_1_1io_1_1_serializable.html" title="java.io.Serializable" alt="" coords="46,347,175,373"/>
<area shape="rect" id="node15" href="classjava_1_1lang_1_1invoke_1_1_method_type.html" title="java.lang.invoke.MethodType" alt="" coords="444,281,631,308"/>
<area shape="rect" id="node10" href="interfacejava_1_1lang_1_1_comparable.html" title="java.lang.Comparable\l\&lt; String \&gt;" alt="" coords="38,398,183,439"/>
<area shape="rect" id="node11" href="interfacejava_1_1lang_1_1_char_sequence.html" title="java.lang.CharSequence" alt="" coords="30,464,191,491"/>
<area shape="rect" id="node12" href="interfacejava_1_1util_1_1_comparator.html" title="java.util.Comparator\l\&lt; java.lang.String \&gt;" alt="" coords="43,515,179,557"/>
<area shape="rect" id="node17" href="classjava_1_1lang_1_1_class.html" title="java.lang.Class\&lt;?\&gt;" alt="" coords="45,216,177,243"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9409ec66f8b8b2029d546c5a37ab77e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a> ()</td></tr>
<tr class="separator:a9409ec66f8b8b2029d546c5a37ab77e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d017841e04766ecbf277f9374d9e8d"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#ac9d017841e04766ecbf277f9374d9e8d">hasBeenInvalidated</a> ()</td></tr>
<tr class="separator:ac9d017841e04766ecbf277f9374d9e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa293979c594b1730ef12b5c732c9fa7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#aaa293979c594b1730ef12b5c732c9fa7">guardWithTest</a> (<a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a> target, <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a> fallback)</td></tr>
<tr class="separator:aaa293979c594b1730ef12b5c732c9fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a9e688bed3122c0dbbfe5e81691de2eb8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9e688bed3122c0dbbfe5e81691de2eb8">invalidateAll</a> (<a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html">SwitchPoint</a>[] switchPoints)</td></tr>
<tr class="separator:a9e688bed3122c0dbbfe5e81691de2eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a> </div></div><!-- fragment --><p> is an object which can publish state transitions to other threads. A switch point is initially in the <em>valid</em> state, but may at any time be changed to the <em>invalid</em> state. Invalidation cannot be reversed. A switch point can combine a <em>guarded pair</em> of method handles into a <em>guarded delegator</em>. The guarded delegator is a method handle which delegates to one of the old method handles. The state of the switch point determines which of the two gets the delegation. </p>
<p>A single switch point may be used to control any number of method handles. (Indirectly, therefore, it can control any number of call sites.) This is done by using the single switch point as a factory for combining any number of guarded method handle pairs into guarded delegators. </p>
<p>When a guarded delegator is created from a guarded pair, the pair is wrapped in a new method handle</p><div class="fragment"><div class="line">M </div></div><!-- fragment --><p> , which is permanently associated with the switch point that created it. Each pair consists of a target</p><div class="fragment"><div class="line">T </div></div><!-- fragment --><p> and a fallback</p><div class="fragment"><div class="line">F </div></div><!-- fragment --><p> . While the switch point is valid, invocations to</p><div class="fragment"><div class="line">M </div></div><!-- fragment --><p> are delegated to</p><div class="fragment"><div class="line">T </div></div><!-- fragment --><p> . After it is invalidated, invocations are delegated to</p><div class="fragment"><div class="line">F </div></div><!-- fragment --><p> . </p>
<p>Invalidation is global and immediate, as if the switch point contained a volatile boolean variable consulted on every call to</p><div class="fragment"><div class="line">M </div></div><!-- fragment --><p> . The invalidation is also permanent, which means the switch point can change state only once. The switch point will always delegate to</p><div class="fragment"><div class="line">F </div></div><!-- fragment --><p> after being invalidated. At that point</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#aaa293979c594b1730ef12b5c732c9fa7">guardWithTest</a> </div></div><!-- fragment --><p> may ignore</p><div class="fragment"><div class="line">T </div></div><!-- fragment --><p> and return</p><div class="fragment"><div class="line">F </div></div><!-- fragment --><p> . </p>
<p>Here is an example of a switch point in action: </p><pre><div class="fragment"><div class="line">MethodHandle MH_strcat = MethodHandles.lookup()</div><div class="line">    .findVirtual(String.class, <span class="stringliteral">&quot;concat&quot;</span>, MethodType.methodType(String.class, String.class));</div><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a> spt = <span class="keyword">new</span> <a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a>();</div><div class="line">assert(!spt.hasBeenInvalidated());</div><div class="line"><span class="comment">// the following steps may be repeated to re-use the same switch point:</span></div><div class="line">MethodHandle worker1 = MH_strcat;</div><div class="line">MethodHandle worker2 = MethodHandles.permuteArguments(MH_strcat, MH_strcat.type(), 1, 0);</div><div class="line">MethodHandle worker = spt.guardWithTest(worker1, worker2);</div><div class="line">assertEquals(<span class="stringliteral">&quot;method&quot;</span>, (String) worker.invokeExact(<span class="stringliteral">&quot;met&quot;</span>, <span class="stringliteral">&quot;hod&quot;</span>));</div><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a>.invalidateAll(<span class="keyword">new</span> <a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a>[]{ spt });</div><div class="line">assert(spt.hasBeenInvalidated());</div><div class="line">assertEquals(<span class="stringliteral">&quot;hodmet&quot;</span>, (String) worker.invokeExact(<span class="stringliteral">&quot;met&quot;</span>, <span class="stringliteral">&quot;hod&quot;</span>));</div></div><!-- fragment --> </pre> <p><em>Discussion:</em> Switch points are useful without subclassing. They may also be subclassed. This may be useful in order to associate application-specific invalidation logic with the switch point. Notice that there is no permanent association between a switch point and the method handles it produces and consumes. The garbage collector may collect method handles produced or consumed by a switch point independently of the lifetime of the switch point itself. </p>
<p><em>Implementation Note:</em> A switch point behaves as if implemented on top of <a class="el" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html">MutableCallSite</a>, approximately as follows: </p><pre><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a> {</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> MethodHandle</div><div class="line">        K_true  = MethodHandles.constant(<span class="keywordtype">boolean</span>.<span class="keyword">class</span>, <span class="keyword">true</span>),</div><div class="line">        K_false = MethodHandles.constant(<span class="keywordtype">boolean</span>.<span class="keyword">class</span>, <span class="keyword">false</span>);</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MutableCallSite mcs;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MethodHandle mcsInvoker;</div><div class="line">    <span class="keyword">public</span> <a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a>() {</div><div class="line">        this.mcs = <span class="keyword">new</span> MutableCallSite(K_true);</div><div class="line">        this.mcsInvoker = mcs.dynamicInvoker();</div><div class="line">    }</div><div class="line">    <span class="keyword">public</span> MethodHandle <a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#aaa293979c594b1730ef12b5c732c9fa7">guardWithTest</a>(</div><div class="line">            MethodHandle target, MethodHandle fallback) {</div><div class="line">        <span class="comment">// Note:  mcsInvoker is of type ()boolean.</span></div><div class="line">        <span class="comment">// Target and fallback may take any arguments, but must have the same type.</span></div><div class="line">        <span class="keywordflow">return</span> MethodHandles.guardWithTest(this.mcsInvoker, target, fallback);</div><div class="line">    }</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9e688bed3122c0dbbfe5e81691de2eb8">invalidateAll</a>(<a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a>[] spts) {</div><div class="line">        List&lt;MutableCallSite&gt; mcss = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keywordflow">for</span> (<a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a> spt : spts)  mcss.add(spt.mcs);</div><div class="line">        <span class="keywordflow">for</span> (MutableCallSite mcs : mcss)  mcs.setTarget(K_false);</div><div class="line">        MutableCallSite.syncAll(mcss.toArray(<span class="keyword">new</span> MutableCallSite[0]));</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </pre> <dl class="section author"><dt>Author</dt><dd>Remi Forax, JSR 292 EG </dd></dl>

<p>Definition at line <a class="el" href="_switch_point_8java_source.html#l00112">112</a> of file <a class="el" href="_switch_point_8java_source.html">SwitchPoint.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9409ec66f8b8b2029d546c5a37ab77e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">java.lang.invoke.SwitchPoint.SwitchPoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new switch point. </p>

<p>Definition at line <a class="el" href="_switch_point_8java_source.html#l00123">123</a> of file <a class="el" href="_switch_point_8java_source.html">SwitchPoint.java</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classjava_1_1lang_1_1invoke_1_1_switch_point_a9409ec66f8b8b2029d546c5a37ab77e7_cgraph.png" border="0" usemap="#classjava_1_1lang_1_1invoke_1_1_switch_point_a9409ec66f8b8b2029d546c5a37ab77e7_cgraph" alt=""/></div>
<map name="classjava_1_1lang_1_1invoke_1_1_switch_point_a9409ec66f8b8b2029d546c5a37ab77e7_cgraph" id="classjava_1_1lang_1_1invoke_1_1_switch_point_a9409ec66f8b8b2029d546c5a37ab77e7_cgraph">
<area shape="rect" id="node2" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html#a447eedb899a588432264f9d8b2aba791" title="java.lang.invoke.Mutable\lCallSite.dynamicInvoker" alt="" coords="243,5,405,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aaa293979c594b1730ef12b5c732c9fa7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a> java.lang.invoke.SwitchPoint.guardWithTest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a>&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handle.html">MethodHandle</a>&#160;</td>
          <td class="paramname"><em>fallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a method handle which always delegates either to the target or the fallback. The method handle will delegate to the target exactly as long as the switch point is valid. After that, it will permanently delegate to the fallback. </p>
<p>The target and fallback must be of exactly the same method type, and the resulting combined method handle will also be of this type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>the method handle selected by the switch point as long as it is valid </td></tr>
    <tr><td class="paramname">fallback</td><td>the method handle selected by the switch point after it is invalidated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a combined method handle which always calls either the target or fallback </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjava_1_1lang_1_1_null_pointer_exception.html">NullPointerException</a></td><td>if either argument is null </td></tr>
    <tr><td class="paramname"><a class="el" href="classjava_1_1lang_1_1_illegal_argument_exception.html">IllegalArgumentException</a></td><td>if the two method types do not match </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handles.html#a031b5dd8f1dde348c1dec101d85e584d">MethodHandles::guardWithTest</a> </dd></dl>

<p>Definition at line <a class="el" href="_switch_point_8java_source.html#l00170">170</a> of file <a class="el" href="_switch_point_8java_source.html">SwitchPoint.java</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classjava_1_1lang_1_1invoke_1_1_switch_point_aaa293979c594b1730ef12b5c732c9fa7_cgraph.png" border="0" usemap="#classjava_1_1lang_1_1invoke_1_1_switch_point_aaa293979c594b1730ef12b5c732c9fa7_cgraph" alt=""/></div>
<map name="classjava_1_1lang_1_1invoke_1_1_switch_point_aaa293979c594b1730ef12b5c732c9fa7_cgraph" id="classjava_1_1lang_1_1invoke_1_1_switch_point_aaa293979c594b1730ef12b5c732c9fa7_cgraph">
<area shape="rect" id="node2" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html#a230cbbd86c5d49b82022da30be5ae21b" title="java.lang.invoke.Mutable\lCallSite.getTarget" alt="" coords="315,85,477,126"/>
<area shape="rect" id="node3" href="classjava_1_1lang_1_1invoke_1_1_method_handles.html#a031b5dd8f1dde348c1dec101d85e584d" title="java.lang.invoke.MethodHandles.guard\lWithTest" alt="" coords="275,150,517,191"/>
<area shape="rect" id="node4" href="classjava_1_1lang_1_1invoke_1_1_method_type.html#a7c15f352e4ed5c8903e134488cdf5997" title="java.lang.invoke.MethodType.equals" alt="" coords="586,5,815,32"/>
<area shape="rect" id="node6" href="classjava_1_1lang_1_1invoke_1_1_method_type.html#a428ecac25f63ce4cb41ef38945df6869" title="java.lang.invoke.MethodType.returnType" alt="" coords="575,56,827,83"/>
<area shape="rect" id="node7" href="classjava_1_1lang_1_1invoke_1_1_method_type.html#a5d316e9a2011ba88713d6e742da551fe" title="java.lang.invoke.MethodType.parameterList" alt="" coords="565,608,836,635"/>
<area shape="rect" id="node13" href="interfacejava_1_1util_1_1_list.html#a13936454d3f14ffe63862626cc7254c0" title="java.util.List.equals" alt="" coords="1225,157,1357,184"/>
<area shape="rect" id="node21" href="interfacejava_1_1util_1_1_list.html#aaf7089a5c43b55c0b163e1c7a601597b" title="java.util.List.size" alt="" coords="1488,132,1607,159"/>
<area shape="rect" id="node33" href="interfacejava_1_1util_1_1_list.html#ad9d3ae8664c49e870cddf0ce6de0dfd7" title="java.util.List.subList" alt="" coords="1223,1080,1359,1107"/>
<area shape="rect" id="node41" href="classjava_1_1lang_1_1invoke_1_1_method_handles.html#a08cf28c69f75e585094c6ac8179b3b2b" title="java.lang.invoke.MethodHandles.drop\lArguments" alt="" coords="583,1279,818,1321"/>
<area shape="rect" id="node5" href="classjava_1_1util_1_1_arrays.html#a52397f5fd30ff9b486a8a103d996efc3" title="java.util.Arrays.equals" alt="" coords="934,5,1083,32"/>
<area shape="rect" id="node8" href="classjava_1_1util_1_1_collections.html#ab2c54576deb1afd5ab962ec8f772d786" title="java.util.Collections.unmodifiableList" alt="" coords="893,608,1124,635"/>
<area shape="rect" id="node34" href="classjava_1_1util_1_1_arrays.html#a9136318d6e833ddd37d71718ed86a1a4" title="java.util.Arrays.asList" alt="" coords="935,1257,1082,1284"/>
<area shape="rect" id="node9" href="classjava_1_1util_1_1_collections.html#a58a9736d70b387a3a5378b4d575b75e9" title="java.util.Collections.list" alt="" coords="1214,1029,1369,1056"/>
<area shape="rect" id="node14" href="interfacejava_1_1util_1_1_list.html#a67e2822701b0b800048a4ef81166837d" title="java.util.List.hashCode" alt="" coords="1215,877,1367,904"/>
<area shape="rect" id="node15" href="interfacejava_1_1util_1_1_list.html#a5f70029b846d1fd548e8d1dfe9f13f24" title="java.util.List.get" alt="" coords="1491,644,1603,671"/>
<area shape="rect" id="node16" href="interfacejava_1_1util_1_1_list.html#a9b33dcecc4895a15b4acf406cd4e070e" title="java.util.List.indexOf" alt="" coords="1222,928,1361,955"/>
<area shape="rect" id="node17" href="interfacejava_1_1util_1_1_list.html#adc786bd132e8bf47f25c185d3926d097" title="java.util.List.lastIndexOf" alt="" coords="1212,979,1371,1005"/>
<area shape="rect" id="node18" href="classjava_1_1util_1_1_collections.html#a96946ac61720bb9e9ba87ce912a63de6" title="java.util.Collections.addAll" alt="" coords="1205,208,1378,235"/>
<area shape="rect" id="node20" href="classjava_1_1util_1_1_collections.html#a7342e63baff99b14c1e95486364f23e0" title="java.util.Collections.replaceAll" alt="" coords="1194,309,1389,336"/>
<area shape="rect" id="node23" href="interfacejava_1_1util_1_1_list.html#ac91e042b251443e70f7d53ed0ce490c7" title="java.util.List.listIterator" alt="" coords="1472,259,1623,285"/>
<area shape="rect" id="node24" href="interfacejava_1_1util_1_1_list_iterator.html#aa42e5a9a6b3ba8af2a7c662d4fe7c7aa" title="java.util.ListIterator.next" alt="" coords="1468,411,1627,437"/>
<area shape="rect" id="node26" href="classjava_1_1util_1_1_collections.html#afbdf4cd16dbcdee5d35d4bf33bfdcd32" title="java.util.Collections.sort" alt="" coords="1212,411,1371,437"/>
<area shape="rect" id="node27" href="interfacejava_1_1util_1_1_list_iterator.html#a7011d158b9cbc0b06bb02546f7ace4a9" title="java.util.ListIterator.hasNext" alt="" coords="1200,461,1383,488"/>
<area shape="rect" id="node28" href="interfacejava_1_1util_1_1_list_iterator.html#a3ef0f2d14b00bb8808a50d89bfc7b84f" title="java.util.ListIterator.has\lPrevious" alt="" coords="1214,513,1369,554"/>
<area shape="rect" id="node29" href="interfacejava_1_1util_1_1_list_iterator.html#a30cce37da5b0c4daf96c71dbc89909da" title="java.util.ListIterator.previous" alt="" coords="1201,579,1382,605"/>
<area shape="rect" id="node30" href="interfacejava_1_1util_1_1_list_iterator.html#ab38b66f9b91183f6a752d4d89c8bcfe8" title="java.util.ListIterator.next\lIndex" alt="" coords="1212,630,1371,671"/>
<area shape="rect" id="node31" href="interfacejava_1_1util_1_1_list_iterator.html#a0be40bec92f6310d3918ba8ec2978449" title="java.util.ListIterator.previous\lIndex" alt="" coords="1201,695,1382,737"/>
<area shape="rect" id="node32" href="interfacejava_1_1util_1_1_iterator.html#a7cca3db8f04ac3bc438b4ca7383bb6fc" title="java.util.Iterator.forEach\lRemaining" alt="" coords="1213,761,1370,802"/>
<area shape="rect" id="node10" href="interfacejava_1_1util_1_1_enumeration.html#a9e1c567174fe26174575337729844a5e" title="java.util.Enumeration.has\lMoreElements" alt="" coords="1464,1087,1631,1129"/>
<area shape="rect" id="node11" href="classjava_1_1util_1_1_array_list.html#abd6c83f9b52fc889760c0ac0eeeb3514" title="java.util.ArrayList.add" alt="" coords="1474,971,1621,997"/>
<area shape="rect" id="node12" href="interfacejava_1_1util_1_1_enumeration.html#acc3ef89b01c3f37da9246ce1b0e7b7ae" title="java.util.Enumeration.next\lElement" alt="" coords="1462,1022,1633,1063"/>
<area shape="rect" id="node19" href="interfacejava_1_1util_1_1_collection.html#af2beb3da6c958460f41d16b5315004b6" title="java.util.Collection.add" alt="" coords="1472,208,1623,235"/>
<area shape="rect" id="node22" href="interfacejava_1_1util_1_1_list.html#a58fd9ae60f2b0a53fea524b69a97ce83" title="java.util.List.set" alt="" coords="1491,309,1603,336"/>
<area shape="rect" id="node25" href="interfacejava_1_1util_1_1_list_iterator.html#aa94b5e2f056af988f1cce05cb8aab995" title="java.util.ListIterator.set" alt="" coords="1471,360,1623,387"/>
<area shape="rect" id="node35" href="classjava_1_1util_1_1_objects.html#a6b43262fcf49f4c1c7f4b07f4df020f8" title="java.util.Objects.require\lNonNull" alt="" coords="1693,1275,1851,1317"/>
<area shape="rect" id="node36" href="classjava_1_1util_1_1_arrays.html#a529c2ea0da9e1636215502e962abb3a3" title="java.util.Arrays.copyOf" alt="" coords="1215,1283,1367,1309"/>
<area shape="rect" id="node37" href="classjava_1_1util_1_1_arrays.html#a70a18d412ed36c0b60fda282798ef22e" title="java.util.Arrays.spliterator" alt="" coords="1207,1384,1375,1411"/>
<area shape="rect" id="node38" href="classjava_1_1util_1_1_spliterators.html#a551f8ee1706f98e800902ab580200b7e" title="java.util.Spliterators.spliterator" alt="" coords="1449,1333,1645,1360"/>
<area shape="rect" id="node39" href="interfacejava_1_1util_1_1function_1_1_consumer.html#a7a43b96adbff93ff90652a2816a078a6" title="java.util.function.Consumer.accept" alt="" coords="1181,1131,1401,1157"/>
<area shape="rect" id="node40" href="classjava_1_1util_1_1_arrays.html#ae123430dd440126aa99d6bc7a294afe4" title="java.util.Arrays.sort" alt="" coords="1225,1181,1358,1208"/>
<area shape="rect" id="node42" href="classjava_1_1lang_1_1invoke_1_1_method_type.html#a4a1c2b7ee97997192cb948415525f20b" title="java.lang.invoke.MethodType.insert\lParameterTypes" alt="" coords="897,1381,1120,1422"/>
<area shape="rect" id="node45" href="classjava_1_1lang_1_1invoke_1_1_method_type.html#a4e4a2194102ad41edce4aa73073e8e7a" title="java.lang.invoke.MethodType.parameter\lCount" alt="" coords="884,1446,1133,1487"/>
<area shape="rect" id="node43" href="classjava_1_1util_1_1_arrays.html#aad9708f4b2caddfa3f404970300972c5" title="java.util.Arrays.copyOfRange" alt="" coords="1197,1485,1386,1512"/>
<area shape="rect" id="node44" href="classjava_1_1lang_1_1_system.html#a52f273595f33fb58e56d47797414880c" title="java.lang.System.arraycopy" alt="" coords="1200,1435,1383,1461"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac9d017841e04766ecbf277f9374d9e8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean java.lang.invoke.SwitchPoint.hasBeenInvalidated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines if this switch point has been invalidated yet.</p>
<p><em>Discussion:</em> Because of the one-way nature of invalidation, once a switch point begins to return true for</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#ac9d017841e04766ecbf277f9374d9e8d">hasBeenInvalidated</a> </div></div><!-- fragment --><p> , it will always do so in the future. On the other hand, a valid switch point visible to other threads may be invalidated at any moment, due to a request by another thread. </p>
<p>Since invalidation is a global and immediate operation, the execution of this query, on a valid switchpoint, must be internally sequenced with any other threads that could cause invalidation. This query may therefore be expensive. The recommended way to build a boolean-valued method handle which queries the invalidation state of a switch point</p><div class="fragment"><div class="line">s </div></div><!-- fragment --><p> is to call</p><div class="fragment"><div class="line">s.guardWithTest </div></div><!-- fragment --><p> on <a class="el" href="classjava_1_1lang_1_1invoke_1_1_method_handles.html#a58dc9f6b18b02e367b5723f57b227bdb">constant</a> true and false method handles.</p>
<dl class="section return"><dt>Returns</dt><dd>true if this switch point has been invalidated </dd></dl>

<p>Definition at line <a class="el" href="_switch_point_8java_source.html#l00151">151</a> of file <a class="el" href="_switch_point_8java_source.html">SwitchPoint.java</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classjava_1_1lang_1_1invoke_1_1_switch_point_ac9d017841e04766ecbf277f9374d9e8d_cgraph.png" border="0" usemap="#classjava_1_1lang_1_1invoke_1_1_switch_point_ac9d017841e04766ecbf277f9374d9e8d_cgraph" alt=""/></div>
<map name="classjava_1_1lang_1_1invoke_1_1_switch_point_ac9d017841e04766ecbf277f9374d9e8d_cgraph" id="classjava_1_1lang_1_1invoke_1_1_switch_point_ac9d017841e04766ecbf277f9374d9e8d_cgraph">
<area shape="rect" id="node2" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html#a230cbbd86c5d49b82022da30be5ae21b" title="java.lang.invoke.Mutable\lCallSite.getTarget" alt="" coords="264,5,427,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9e688bed3122c0dbbfe5e81691de2eb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void java.lang.invoke.SwitchPoint.invalidateAll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html">SwitchPoint</a>[]&#160;</td>
          <td class="paramname"><em>switchPoints</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets all of the given switch points into the invalid state. After this call executes, no thread will observe any of the switch points to be in a valid state. </p>
<p>This operation is likely to be expensive and should be used sparingly. If possible, it should be buffered for batch processing on sets of switch points. </p>
<p>If</p><div class="fragment"><div class="line">switchPoints </div></div><!-- fragment --><p> contains a null element, a</p><div class="fragment"><div class="line">NullPointerException </div></div><!-- fragment --><p> will be raised. In this case, some non-null elements in the array may be processed before the method returns abnormally. Which elements these are (if any) is implementation-dependent.</p>
<p><em>Discussion:</em> For performance reasons,</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9e688bed3122c0dbbfe5e81691de2eb8">invalidateAll</a> </div></div><!-- fragment --><p> is not a virtual method on a single switch point, but rather applies to a set of switch points. Some implementations may incur a large fixed overhead cost for processing one or more invalidation operations, but a small incremental cost for each additional invalidation. In any case, this operation is likely to be costly, since other threads may have to be somehow interrupted in order to make them notice the updated switch point state. However, it may be observed that a single call to invalidate several switch points has the same formal effect as many calls, each on just one of the switch points.</p>
<p><em>Implementation Note:</em> Simple implementations of</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9409ec66f8b8b2029d546c5a37ab77e7">SwitchPoint</a> </div></div><!-- fragment --><p> may use a private <a class="el" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html">MutableCallSite</a> to publish the state of a switch point. In such an implementation, the</p><div class="fragment"><div class="line"><a class="code" href="classjava_1_1lang_1_1invoke_1_1_switch_point.html#a9e688bed3122c0dbbfe5e81691de2eb8">invalidateAll</a> </div></div><!-- fragment --><p> method can simply change the call site's target, and issue one call to  <a class="el" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html#a691573d27e1e864b1d15f61a6a9a7f33">MutableCallSite::syncAll</a> synchronize} all the private call sites.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">switchPoints</td><td>an array of call sites to be synchronized </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjava_1_1lang_1_1_null_pointer_exception.html">NullPointerException</a></td><td>if the<div class="fragment"><div class="line">switchPoints </div></div><!-- fragment --> array reference is null or the array contains a null </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_switch_point_8java_source.html#l00217">217</a> of file <a class="el" href="_switch_point_8java_source.html">SwitchPoint.java</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classjava_1_1lang_1_1invoke_1_1_switch_point_a9e688bed3122c0dbbfe5e81691de2eb8_cgraph.png" border="0" usemap="#classjava_1_1lang_1_1invoke_1_1_switch_point_a9e688bed3122c0dbbfe5e81691de2eb8_cgraph" alt=""/></div>
<map name="classjava_1_1lang_1_1invoke_1_1_switch_point_a9e688bed3122c0dbbfe5e81691de2eb8_cgraph" id="classjava_1_1lang_1_1invoke_1_1_switch_point_a9e688bed3122c0dbbfe5e81691de2eb8_cgraph">
<area shape="rect" id="node2" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html#af0f79b52827cd47d161890fd7bf94dcb" title="java.lang.invoke.Mutable\lCallSite.setTarget" alt="" coords="311,5,473,47"/>
<area shape="rect" id="node3" href="classjava_1_1lang_1_1invoke_1_1_mutable_call_site.html#a691573d27e1e864b1d15f61a6a9a7f33" title="java.lang.invoke.Mutable\lCallSite.syncAll" alt="" coords="311,71,473,112"/>
<area shape="rect" id="node4" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_integer.html#a5546614d110cffeef3cc3fd5dc982e64" title="java.util.concurrent.atomic.\lAtomicInteger.lazySet" alt="" coords="521,71,699,112"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/00_Code/openjdk8/java/lang/invoke/<a class="el" href="_switch_point_8java_source.html">SwitchPoint.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
