<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>openjdk8_analysis: Package java.util.concurrent.atomic</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openjdk8_analysis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Packages</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejava.html">java</a></li><li class="navelem"><a class="el" href="namespacejava_1_1util.html">util</a></li><li class="navelem"><a class="el" href="namespacejava_1_1util_1_1concurrent.html">concurrent</a></li><li class="navelem"><a class="el" href="namespacejava_1_1util_1_1concurrent_1_1atomic.html">atomic</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Package java.util.concurrent.atomic</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_boolean.html">AtomicBoolean</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_integer.html">AtomicInteger</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_integer_array.html">AtomicIntegerArray</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_integer_field_updater.html">AtomicIntegerFieldUpdater</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_long.html">AtomicLong</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_long_array.html">AtomicLongArray</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_long_field_updater.html">AtomicLongFieldUpdater</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_markable_reference.html">AtomicMarkableReference</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_reference.html">AtomicReference</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_reference_array.html">AtomicReferenceArray</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_reference_field_updater.html">AtomicReferenceFieldUpdater</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_stamped_reference.html">AtomicStampedReference</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_double_accumulator.html">DoubleAccumulator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_double_adder.html">DoubleAdder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_long_accumulator.html">LongAccumulator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_long_adder.html">LongAdder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>Striped64</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A small toolkit of classes that support lock-free thread-safe programming on single variables. In essence, the classes in this package extend the notion of</p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> values, fields, and array elements to those that also provide an atomic conditional update operation of the form:</p>
<pre><div class="fragment"><div class="line"><span class="keywordtype">boolean</span> compareAndSet(expectedValue, updateValue); </div></div><!-- fragment --> </pre><p>This method (which varies in argument types across different classes) atomically sets a variable to the</p><div class="fragment"><div class="line">updateValue </div></div><!-- fragment --><p> if it currently holds the</p><div class="fragment"><div class="line">expectedValue </div></div><!-- fragment --><p> , reporting</p><div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --><p> on success. The classes in this package also contain methods to get and unconditionally set values, as well as a weaker conditional atomic update operation</p><div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> described below.</p>
<p>The specifications of these methods enable implementations to employ efficient machine-level atomic instructions that are available on contemporary processors. However on some platforms, support may entail some form of internal locking. Thus the methods are not strictly guaranteed to be non-blocking &ndash; a thread may block transiently before performing the operation.</p>
<p>Instances of classes <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_boolean.html">java.util.concurrent.atomic.AtomicBoolean</a>, <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_integer.html">java.util.concurrent.atomic.AtomicInteger</a>, <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_long.html">java.util.concurrent.atomic.AtomicLong</a>, and <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_reference.html">java.util.concurrent.atomic.AtomicReference</a> each provide access and updates to a single variable of the corresponding type. Each class also provides appropriate utility methods for that type. For example, classes</p><div class="fragment"><div class="line">AtomicLong </div></div><!-- fragment --><p> and </p><div class="fragment"><div class="line">AtomicInteger </div></div><!-- fragment --><p> provide atomic increment methods. One application is to generate sequence numbers, as in:</p>
<pre><div class="fragment"><div class="line"><span class="keyword">class </span>Sequencer {</div><div class="line">  <span class="keyword">private</span> <span class="keyword">final</span> AtomicLong sequenceNumber</div><div class="line">    = <span class="keyword">new</span> AtomicLong(0);</div><div class="line">  <span class="keyword">public</span> <span class="keywordtype">long</span> next() {</div><div class="line">    <span class="keywordflow">return</span> sequenceNumber.getAndIncrement();</div><div class="line">  }</div><div class="line">} </div></div><!-- fragment --> </pre><p>It is straightforward to define new utility functions that, like </p><div class="fragment"><div class="line">getAndIncrement </div></div><!-- fragment --><p> , apply a function to a value atomically. For example, given some transformation </p><pre><div class="fragment"><div class="line"><span class="keywordtype">long</span> transform(<span class="keywordtype">long</span> input) </div></div><!-- fragment --> </pre><p>write your utility method as follows: </p><pre><div class="fragment"><div class="line"><span class="keywordtype">long</span> getAndTransform(AtomicLong var) {</div><div class="line">  <span class="keywordtype">long</span> prev, next;</div><div class="line">  <span class="keywordflow">do</span> {</div><div class="line">    prev = var.get();</div><div class="line">    next = transform(prev);</div><div class="line">  } <span class="keywordflow">while</span> (!var.compareAndSet(prev, next));</div><div class="line">  <span class="keywordflow">return</span> prev; <span class="comment">// return next; for transformAndGet</span></div><div class="line">} </div></div><!-- fragment --> </pre><p>The memory effects for accesses and updates of atomics generally follow the rules for volatiles, as stated in <a href="https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4">The Java Language Specification (17.4 Memory Model)</a>:</p>
<ul>
<li>
<div class="fragment"><div class="line"><span class="keyword">get</span> </div></div><!-- fragment --><p> has the memory effects of reading a </p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> variable.</p>
<p class="endli"></p>
</li>
<li>
<div class="fragment"><div class="line"><span class="keyword">set</span> </div></div><!-- fragment --><p> has the memory effects of writing (assigning) a </p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> variable.</p>
<p class="endli"></p>
</li>
<li>
<div class="fragment"><div class="line">lazySet </div></div><!-- fragment --><p> has the memory effects of writing (assigning) a</p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> variable except that it permits reorderings with subsequent (but not previous) memory actions that do not themselves impose reordering constraints with ordinary non-</p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> writes. Among other usage contexts,</p><div class="fragment"><div class="line">lazySet </div></div><!-- fragment --><p> may apply when nulling out, for the sake of garbage collection, a reference that is never accessed again.</p>
<p class="endli"></p>
</li>
<li>
<div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> atomically reads and conditionally writes a variable but does <em>not</em> create any happens-before orderings, so provides no guarantees with respect to previous or subsequent reads and writes of any variables other than the target of the</p><div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> .</p>
<p class="endli"></p>
</li>
<li>
<div class="fragment"><div class="line">compareAndSet </div></div><!-- fragment --> and all other read-and-update operations such as<div class="fragment"><div class="line">getAndIncrement </div></div><!-- fragment --> have the memory effects of both reading and writing<div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --> variables. </li>
</ul>
<p>In addition to classes representing single values, this package contains <em>Updater</em> classes that can be used to obtain </p><div class="fragment"><div class="line">compareAndSet </div></div><!-- fragment --><p> operations on any selected</p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> field of any selected class.</p>
<p><a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_reference_field_updater.html">java.util.concurrent.atomic.AtomicReferenceFieldUpdater</a>, <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_integer_field_updater.html">java.util.concurrent.atomic.AtomicIntegerFieldUpdater</a>, and <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_long_field_updater.html">java.util.concurrent.atomic.AtomicLongFieldUpdater</a> are reflection-based utilities that provide access to the associated field types. These are mainly of use in atomic data structures in which several</p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> fields of the same node (for example, the links of a tree node) are independently subject to atomic updates. These classes enable greater flexibility in how and when to use atomic updates, at the expense of more awkward reflection-based setup, less convenient usage, and weaker guarantees.</p>
<p>The <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_integer_array.html">java.util.concurrent.atomic.AtomicIntegerArray</a>, <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_long_array.html">java.util.concurrent.atomic.AtomicLongArray</a>, and <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_reference_array.html">java.util.concurrent.atomic.AtomicReferenceArray</a> classes further extend atomic operation support to arrays of these types. These classes are also notable in providing</p><div class="fragment"><div class="line"><span class="keyword">volatile</span> </div></div><!-- fragment --><p> access semantics for their array elements, which is not supported for ordinary arrays.</p>
<p>The atomic classes also support method </p><div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> , which has limited applicability. On some platforms, the weak version may be more efficient than</p><div class="fragment"><div class="line">compareAndSet </div></div><!-- fragment --><p> in the normal case, but differs in that any given invocation of the</p><div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> method may return</p><div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --><p> <em>spuriously</em> (that is, for no apparent reason). A </p><div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --><p> return means only that the operation may be retried if desired, relying on the guarantee that repeated invocation when the variable holds</p><div class="fragment"><div class="line">expectedValue </div></div><!-- fragment --><p> and no other thread is also attempting to set the variable will eventually succeed. (Such spurious failures may for example be due to memory contention effects that are unrelated to whether the expected and current values are equal.) Additionally</p><div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> does not provide ordering guarantees that are usually needed for synchronization control. However, the method may be useful for updating counters and statistics when such updates are unrelated to the other happens-before orderings of a program. When a thread sees an update to an atomic variable caused by a</p><div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> , it does not necessarily see updates to any <em>other</em> variables that occurred before the</p><div class="fragment"><div class="line">weakCompareAndSet </div></div><!-- fragment --><p> . This may be acceptable when, for example, updating performance statistics, but rarely otherwise.</p>
<p>The <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_markable_reference.html">java.util.concurrent.atomic.AtomicMarkableReference</a> class associates a single boolean with a reference. For example, this bit might be used inside a data structure to mean that the object being referenced has logically been deleted.</p>
<p>The <a class="el" href="classjava_1_1util_1_1concurrent_1_1atomic_1_1_atomic_stamped_reference.html">java.util.concurrent.atomic.AtomicStampedReference</a> class associates an integer value with a reference. This may be used for example, to represent version numbers corresponding to series of updates.</p>
<p>Atomic classes are designed primarily as building blocks for implementing non-blocking data structures and related infrastructure classes. The</p><div class="fragment"><div class="line">compareAndSet </div></div><!-- fragment --><p> method is not a general replacement for locking. It applies only when critical updates for an object are confined to a <em>single</em> variable.</p>
<p>Atomic classes are not general purpose replacements for </p><div class="fragment"><div class="line"><a class="code" href="namespacejava.html">java</a>.<a class="code" href="namespacejava_1_1lang.html">lang</a>.<a class="code" href="classjava_1_1lang_1_1_integer.html">Integer</a> </div></div><!-- fragment --><p> and related classes. They do <em>not</em> define methods such as</p><div class="fragment"><div class="line">equals </div></div><!-- fragment --><p> ,</p><div class="fragment"><div class="line">hashCode </div></div><!-- fragment --><p> and </p><div class="fragment"><div class="line">compareTo </div></div><!-- fragment --><p> . (Because atomic variables are expected to be mutated, they are poor choices for hash table keys.) Additionally, classes are provided only for those types that are commonly useful in intended applications. For example, there is no atomic class for representing</p><div class="fragment"><div class="line">byte </div></div><!-- fragment --><p> . In those infrequent cases where you would like to do so, you can use an</p><div class="fragment"><div class="line">AtomicInteger </div></div><!-- fragment --><p> to hold </p><div class="fragment"><div class="line">byte </div></div><!-- fragment --><p> values, and cast appropriately.</p>
<p>You can also hold floats using <a class="el" href="classjava_1_1lang_1_1_float.html#a4791449f6ee1123dc5bd4dcc4e2a2544">java.lang.Float#floatToRawIntBits</a> and <a class="el" href="classjava_1_1lang_1_1_float.html#ac69db2850980a359cd0802e8a2de6f1b">java.lang.Float#intBitsToFloat</a> conversions, and doubles using <a class="el" href="classjava_1_1lang_1_1_double.html#a2d0eb2ae1d92084d41b26a53895eab5e">java.lang.Double#doubleToRawLongBits</a> and <a class="el" href="classjava_1_1lang_1_1_double.html#ab8d9d806894ac034880a1342308dacb8">java.lang.Double#longBitsToDouble</a> conversions.</p>
<dl class="section since"><dt>Since</dt><dd>1.5 </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
